import{d as e,r as a,G as t,g as l,h as s,z as n,H as u,y as i,o,c,w as d,a as r,b as f,t as v,k as m,J as h,E as p,K as g,L as b,i as y,e as _,M as x,N as k,O as T,_ as w,l as M,B as S,F as $,j as C,D as A,x as L,u as P,m as N,p as D,n as B,A as F,s as I,v as R,f as E,P as W,Q as Y,C as V}from"./index-DVWvtVDx.js";import{S as U}from"./SoftwarePicker.CoML_QnP.js";import{D as X}from"./DateTimePicker.D9mM-U7s.js";const q=w(e({__name:"TrendChart",props:{title:{},subtitle:{default:""},points:{},total:{default:void 0},totalLabel:{default:void 0},maxValue:{default:void 0}},setup(e){var w;const M=e,S=`trend-${Math.random().toString(36).slice(2)}`,$=a(640),C=a(320),A=a(640),L=a(320),P=a(1);let N=!0;N=!1,"undefined"!=typeof wx&&(N=!1);const D=null==(w=t)?void 0:w();if(D){const e=`${D.uniPlatform||""}`.toLowerCase(),a=`${D.appName||""}`.toLowerCase();(e.includes("mp")||e.includes("wechat")||a.includes("wechat"))&&(N=!1)}let B=1;const F=a(!1),I=k(),R=a(null),E=a([]),W=l({visible:!1,x:0,y:0,label:"",value:0}),Y=s((()=>({left:`${W.x}px`,top:`${W.y}px`})));const V=s((()=>{if(null==M.total)return"";return`${M.totalLabel||"累计总计"}：${M.total}`}));function U(e){if(!e.length)return;const a=T(S,null==I?void 0:I.proxy),t=P.value||1;"function"==typeof a.scale&&Math.abs(B-1)>.001&&(a.scale(1/B,1/B),B=1),a.clearRect(0,0,$.value,C.value),1!==t&&"function"==typeof a.scale?(a.scale(t,t),B=t):B=1;const l=A.value||$.value/t,s=L.value||C.value/t,n=60,i=50,o=e=>1!==t?e/t:e,c=e.map((e=>Number(e.value??0))),d=Math.min(...c),r=Math.max(...c),f="number"==typeof M.maxValue&&M.maxValue>0?M.maxValue:r,v=Math.max(f,r),m=Math.min(d,0),h=v-m,p=0===h?1:h,g=Math.max(e.length-1,1),b=e.map(((e,a)=>({x:n+a/g*(l-120),y:s-i-(e.value-m)/p*(s-100),value:Number(e.value??0),label:e.date})));a.setStrokeStyle("rgba(148, 163, 184, 0.18)"),a.setLineWidth(o(1));for(let u=0;u<=4;u+=1){const e=i+(s-100)/4*u;a.beginPath(),a.moveTo(n,e),a.lineTo(l-n,e),a.stroke()}a.setStrokeStyle("rgba(148, 163, 184, 0.28)"),a.setLineWidth(o(1.5)),a.beginPath(),a.moveTo(n,i),a.lineTo(n,s-i),a.lineTo(l-n,s-i),a.stroke(),a.setFillStyle("rgba(226, 232, 240, 0.8)"),a.setFontSize(o(16));for(let u=0;u<=4;u+=1){const e=Math.round(v/4*(4-u)),t=i+(s-100)/4*u;a.fillText(`${e}`,16,t+6)}a.beginPath();const y=a.createLinearGradient(0,0,l,0);y.addColorStop(0,"#38bdf8"),y.addColorStop(1,"#6366f1"),a.setLineWidth(o(3)),a.setStrokeStyle(y),a.setLineJoin("round"),a.setLineCap("round"),b.forEach(((e,t)=>{0===t?a.moveTo(e.x,e.y):a.lineTo(e.x,e.y)})),a.stroke();const _=a.createLinearGradient(0,i,0,s-i);_.addColorStop(0,"rgba(56, 189, 248, 0.32)"),_.addColorStop(1,"rgba(15, 23, 42, 0.05)"),a.setFillStyle(_),a.beginPath(),b.forEach(((e,t)=>{0===t?a.moveTo(e.x,e.y):a.lineTo(e.x,e.y)})),a.lineTo(l-n,s-i),a.lineTo(n,s-i),a.closePath(),a.fill(),a.setFillStyle("rgba(226, 232, 240, 0.65)"),a.setFontSize(o(18));const x=a.textAlign;if("function"==typeof a.setTextAlign&&a.setTextAlign("center"),b.forEach(((t,l)=>{if(l%2==0||l===e.length-1){const n=s-i+24,u=function(e){var a,t;if(!e)return"";const l=e.trim();if(!l)return"";const s=l.split("T")[0].split(" ")[0],n=s.match(/^(\d{4})[-/](\d{1,2})[-/](\d{1,2})$/);if(n){const[,,e,a]=n;return`${e.padStart(2,"0")}-${a.padStart(2,"0")}`}const u=s.split(/[-/]/).filter(Boolean);if(u.length>=2){const e=null==(a=u[u.length-2])?void 0:a.padStart(2,"0"),l=null==(t=u[u.length-1])?void 0:t.padStart(2,"0");if(e&&l)return`${e}-${l}`}return l}(e[l].date);a.fillText(u,t.x,n)}})),"function"==typeof a.setTextAlign){const e="string"==typeof x?x:"left";a.setTextAlign(e)}b.forEach((e=>{a.beginPath(),a.setFillStyle("#38bdf8"),a.arc(e.x,e.y,o(4),0,2*Math.PI),a.fill()})),a.draw(),E.value=b,u((()=>{q()}))}function X(){F.value&&U(M.points)}function q(){b().in(null==I?void 0:I.proxy).select(`#${S}`).boundingClientRect((e=>{var a;if(e){const l=null==(a=t)?void 0:a();let s=1;l&&"number"==typeof l.pixelRatio&&(s=N?Math.max(l.pixelRatio,1):1);const n=Math.max(e.width,1),i=Math.max(e.height,1),o=n*s,c=i*s;R.value={width:n,height:i,left:e.left,top:e.top};let d=!1;Math.abs($.value-o)>1&&($.value=o,d=!0),Math.abs(C.value-c)>1&&(C.value=c,d=!0),(Math.abs(A.value-n)>.5||Math.abs(L.value-i)>.5)&&(A.value=n,L.value=i,d=!0),Math.abs(P.value-s)>.01&&(P.value=s,d=!0),d&&u((()=>{X()}))}})).exec()}function j(e){const a=function(e){if((null==e?void 0:e.detail)&&"number"==typeof e.detail.x)return{x:e.detail.x,y:e.detail.y};if((null==e?void 0:e.changedTouches)&&e.changedTouches.length){const a=e.changedTouches[0];if("number"==typeof a.x&&"number"==typeof a.y)return{x:a.x,y:a.y};if(R.value&&"number"==typeof a.pageX&&"number"==typeof a.pageY)return{x:a.pageX-R.value.left,y:a.pageY-R.value.top}}return"number"==typeof(null==e?void 0:e.offsetX)&&"number"==typeof(null==e?void 0:e.offsetY)?{x:e.offsetX,y:e.offsetY}:null}(e);if(!a)return;let t=R.value;t||(q(),t=R.value);const l=P.value||1,s=A.value||$.value/l,n=L.value||C.value/l,u=t&&t.width?s/t.width:1,i=function(e){if(!E.value.length)return null;let a=E.value[0],t=Math.abs(a.x-e);return E.value.forEach((l=>{const s=Math.abs(l.x-e);s<t&&(a=l,t=s)})),t<=40?a:null}(a.x*u);if(!i)return void(W.visible=!1);const o=(null==t?void 0:t.width)??s,c=(null==t?void 0:t.height)??n;W.visible=!0,W.label=i.label,W.value=`数量：${i.value}`,W.x=i.x/s*o,W.y=i.y/n*c}function z(){W.visible=!1}return n((async()=>{await u(),F.value=!0,X(),q()})),i((()=>M.points),(e=>{e.length&&u((()=>{X(),q()}))}),{deep:!0}),(e,a)=>{const t=y,l=_,s=x;return o(),c(l,{class:"chart-card glass-card"},{default:d((()=>[r(l,{class:"chart-header"},{default:d((()=>[r(l,null,{default:d((()=>[r(t,{class:"chart-title"},{default:d((()=>[f(v(e.title),1)])),_:1}),e.subtitle?(o(),c(t,{key:0,class:"chart-subtitle"},{default:d((()=>[f(v(e.subtitle),1)])),_:1})):m("",!0)])),_:1}),r(l,{class:"chart-extra"},{default:d((()=>[h(e.$slots,"extra",{},void 0,!0),V.value?(o(),c(t,{key:0,class:"chart-summary"},{default:d((()=>[f(v(V.value),1)])),_:1})):m("",!0)])),_:3})])),_:3}),r(l,{class:"chart-body"},{default:d((()=>[r(s,{"canvas-id":S,id:S,class:"chart-canvas",width:$.value,height:C.value,onTouchstart:p(j,["stop"]),onTouchmove:p(j,["stop"]),onTouchend:z,onTouchcancel:z,onMousemove:j,onMouseleave:z},null,8,["width","height"]),W.visible?(o(),c(l,{key:0,class:"chart-tooltip",style:g(Y.value)},{default:d((()=>[r(t,{class:"tooltip-title"},{default:d((()=>[f(v(W.label),1)])),_:1}),r(t,{class:"tooltip-value"},{default:d((()=>[f(v(W.value),1)])),_:1})])),_:1},8,["style"])):m("",!0)])),_:1})])),_:3})}}}),[["__scopeId","data-v-9f492634"]]),j=w(e({__name:"SubTrendChart",props:{title:{},subtitle:{default:""},categories:{default:()=>[]},series:{default:()=>[]},total:{default:void 0}},setup(e){var h;const w=e,C=`sub-trend-${Math.random().toString(36).slice(2)}`,A=a(640),L=a(360),P=a(640),N=a(360),D=a(1);let B=!0;B=!1,"undefined"!=typeof wx&&(B=!1);const F=null==(h=t)?void 0:h();if(F){const e=`${F.uniPlatform||""}`.toLowerCase(),a=`${F.appName||""}`.toLowerCase();(e.includes("mp")||e.includes("wechat")||a.includes("wechat"))&&(B=!1)}let I=1;const R=["#38bdf8","#8b5cf6","#f97316","#22d3ee","#f472b6","#34d399","#a855f7"],E=k(),W=a(!1),Y=a(null),V=a([]),U=l({visible:!1,x:0,y:0,category:"",items:[]}),X=s((()=>({left:`${U.x}px`,top:`${U.y}px`}))),q=s((()=>w.series)),j=s((()=>null==w.total?"":`最近子代理7天合计：${w.total}`));function z(){if(!W.value)return;const e=T(C,null==E?void 0:E.proxy),a=D.value||1;"function"==typeof e.scale&&Math.abs(I-1)>.001&&(e.scale(1/I,1/I),I=1),e.clearRect(0,0,A.value,L.value),1!==a&&"function"==typeof e.scale?(e.scale(a,a),I=a):I=1;const t=P.value||A.value/a,l=N.value||L.value/a,s=Array.isArray(w.categories)?w.categories:[],n=q.value;if(!s.length||!n.length)return e.draw(),V.value=[],void(U.visible=!1);const i=Math.max(...n.map((e=>{var a;const t=(null==(a=e.values)?void 0:a.length)?e.values.map((e=>Number(e??0))):[0];return Math.max(...t)})),0),o=i>0?Math.ceil(1.1*i):1,c=o||1,d=e=>1!==a?e/a:e;e.setStrokeStyle("rgba(148, 163, 184, 0.18)"),e.setLineWidth(d(1));for(let u=0;u<=4;u+=1){const a=60+(l-120)/4*u;e.beginPath(),e.moveTo(60,a),e.lineTo(t-60,a),e.stroke()}e.setStrokeStyle("rgba(148, 163, 184, 0.3)"),e.setLineWidth(d(1.5)),e.beginPath(),e.moveTo(60,60),e.lineTo(60,l-60),e.lineTo(t-60,l-60),e.stroke(),e.setFillStyle("rgba(226, 232, 240, 0.85)"),e.setFontSize(d(16));for(let u=0;u<=4;u+=1){const a=Math.round(o/4*(4-u)),t=60+(l-120)/4*u;e.fillText(`${a}`,18,t+6)}const r=s.length>1?(t-120)/(s.length-1):0,f=s.map(((e,a)=>{const t=n.map(((e,t)=>{var s;const n=Number((null==(s=e.values)?void 0:s[a])??0),u=Number.isFinite(n)?n:0,i=l-60-u/c*(l-120);return{name:e.name,value:u,color:R[t%R.length],y:i}})),s=t.length?Math.min(...t.map((e=>e.y))):l-60;return{x:60+r*a,label:e,anchorY:s,items:t}}));n.forEach(((a,t)=>{const s=R[t%R.length];e.setStrokeStyle(s),e.setLineWidth(d(2.5)),e.setLineJoin("round"),e.setLineCap("round"),e.beginPath(),f.forEach(((a,s)=>{const n=a.items[t],u=n?n.y:l-60;0===s?e.moveTo(a.x,u):e.lineTo(a.x,u)})),e.stroke(),f.forEach((a=>{const l=a.items[t];l&&(e.beginPath(),e.setFillStyle(s),e.arc(a.x,l.y,d(3.5),0,2*Math.PI),e.fill())}))})),e.setFillStyle("rgba(226, 232, 240, 0.78)"),e.setFontSize(d(18));const v=e.textAlign;if("function"==typeof e.setTextAlign&&e.setTextAlign("center"),f.forEach(((a,t)=>{if(t%2==0||t===f.length-1){const t=l-60+26,s=function(e){var a,t;if(!e)return"";const l=e.trim();if(!l)return"";const s=l.split("T")[0].split(" ")[0],n=s.match(/^(\d{4})[-/](\d{1,2})[-/](\d{1,2})$/);if(n){const[,,e,a]=n;return`${e.padStart(2,"0")}-${a.padStart(2,"0")}`}const u=s.split(/[-/]/).filter(Boolean);if(u.length>=2){const e=null==(a=u[u.length-2])?void 0:a.padStart(2,"0"),l=null==(t=u[u.length-1])?void 0:t.padStart(2,"0");if(e&&l)return`${e}-${l}`}return l}(a.label);e.fillText(s,a.x,t)}})),"function"==typeof e.setTextAlign){const a="string"==typeof v?v:"left";e.setTextAlign(a)}e.draw(),V.value=f,u((()=>{O()}))}function O(){b().in(null==E?void 0:E.proxy).select(`#${C}`).boundingClientRect((e=>{var a;if(e){const l=null==(a=t)?void 0:a();let s=1;l&&"number"==typeof l.pixelRatio&&(s=B?Math.max(l.pixelRatio,1):1);const n=Math.max(e.width,1),i=Math.max(e.height,1),o=n*s,c=i*s;Y.value={width:n,height:i,left:e.left,top:e.top};let d=!1;Math.abs(A.value-o)>1&&(A.value=o,d=!0),Math.abs(L.value-c)>1&&(L.value=c,d=!0),(Math.abs(P.value-n)>.5||Math.abs(N.value-i)>.5)&&(P.value=n,N.value=i,d=!0),Math.abs(D.value-s)>.01&&(D.value=s,d=!0),d&&u((()=>{z()}))}})).exec()}function H(e){const a=function(e){if((null==e?void 0:e.detail)&&"number"==typeof e.detail.x)return{x:e.detail.x,y:e.detail.y};if((null==e?void 0:e.changedTouches)&&e.changedTouches.length){const a=e.changedTouches[0];if("number"==typeof a.x&&"number"==typeof a.y)return{x:a.x,y:a.y};if(Y.value&&"number"==typeof a.pageX&&"number"==typeof a.pageY)return{x:a.pageX-Y.value.left,y:a.pageY-Y.value.top}}return"number"==typeof(null==e?void 0:e.offsetX)&&"number"==typeof(null==e?void 0:e.offsetY)?{x:e.offsetX,y:e.offsetY}:null}(e);if(!a)return;let t=Y.value;t||(O(),t=Y.value);const l=D.value||1,s=P.value||A.value/l,n=N.value||L.value/l,u=t&&t.width?s/t.width:1,i=function(e){if(!V.value.length)return null;let a=V.value[0],t=Math.abs(a.x-e);V.value.forEach((l=>{const s=Math.abs(l.x-e);s<t&&(a=l,t=s)}));const l=V.value.length>1?Math.max(Math.abs(V.value[1].x-V.value[0].x)/2,40):60;return t<=l?a:null}(a.x*u);if(!i)return void(U.visible=!1);const o=(null==t?void 0:t.width)??s,c=(null==t?void 0:t.height)??n;U.visible=!0,U.category=i.label,U.items=i.items.slice().sort(((e,a)=>a.value-e.value)).map((e=>({name:e.name,value:`数量：${e.value}`,color:e.color}))),U.x=i.x/s*o,U.y=i.anchorY/n*c}function G(){U.visible=!1}return n((async()=>{await u(),W.value=!0,z(),O()})),i((()=>[w.categories,q.value]),(()=>{u((()=>{z(),O()}))}),{deep:!0}),(e,a)=>{const t=y,l=_,s=x;return o(),c(l,{class:"chart-card glass-card"},{default:d((()=>[r(l,{class:"chart-header"},{default:d((()=>[r(l,null,{default:d((()=>[r(t,{class:"chart-title"},{default:d((()=>[f(v(e.title),1)])),_:1}),e.subtitle?(o(),c(t,{key:0,class:"chart-subtitle"},{default:d((()=>[f(v(e.subtitle),1)])),_:1})):m("",!0)])),_:1}),j.value?(o(),c(t,{key:0,class:"chart-summary"},{default:d((()=>[f(v(j.value),1)])),_:1})):m("",!0)])),_:1}),r(l,{class:"chart-body"},{default:d((()=>[r(s,{"canvas-id":C,id:C,class:"chart-canvas",width:A.value,height:L.value,onTouchstart:p(H,["stop"]),onTouchmove:p(H,["stop"]),onTouchend:G,onTouchcancel:G,onMousemove:H,onMouseleave:G},null,8,["width","height"]),U.visible?(o(),c(l,{key:0,class:"chart-tooltip",style:g(X.value)},{default:d((()=>[r(t,{class:"tooltip-title"},{default:d((()=>[f(v(U.category),1)])),_:1}),r(l,{class:"tooltip-list"},{default:d((()=>[(o(!0),M($,null,S(U.items,(e=>(o(),c(l,{key:e.name,class:"tooltip-row"},{default:d((()=>[r(l,{class:"tooltip-dot",style:g({background:e.color})},null,8,["style"]),r(t,{class:"tooltip-name"},{default:d((()=>[f(v(e.name),1)])),_:2},1024),r(t,{class:"tooltip-value"},{default:d((()=>[f(v(e.value),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1},8,["style"])):m("",!0)])),_:1}),q.value.length?(o(),c(l,{key:0,class:"legend"},{default:d((()=>[(o(!0),M($,null,S(q.value,((e,a)=>(o(),c(l,{key:e.name,class:"legend-item"},{default:d((()=>[r(l,{class:"legend-dot",style:g({background:R[a%R.length]})},null,8,["style"]),r(t,{class:"legend-name"},{default:d((()=>[f(v(e.name),1)])),_:2},1024),r(t,{class:"legend-value"},{default:d((()=>[f(v(e.total),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1})):(o(),c(l,{key:1,class:"empty"},{default:d((()=>[f("暂无子代理激活记录")])),_:1}))])),_:1})}}}),[["__scopeId","data-v-f2106042"]]),z=w(e({__name:"StatCard",props:{title:{},value:{},delta:{},trend:{}},setup(e){const a=e,t=s((()=>"up"===a.trend?"delta-up":"down"===a.trend?"delta-down":"delta-flat")),l=s((()=>`${Math.abs(a.delta)}%`));return(e,a)=>{const s=_,n=y;return o(),c(s,{class:"stat-card glass-card"},{default:d((()=>[r(s,{class:"stat-title"},{default:d((()=>[f(v(e.title),1)])),_:1}),r(s,{class:"stat-value"},{default:d((()=>[f(v(e.value),1)])),_:1}),r(s,{class:"stat-footer"},{default:d((()=>[r(s,{class:C(["delta",t.value])},{default:d((()=>["up"===e.trend?(o(),c(n,{key:0},{default:d((()=>[f("▲")])),_:1})):"down"===e.trend?(o(),c(n,{key:1},{default:d((()=>[f("▼")])),_:1})):(o(),c(n,{key:2},{default:d((()=>[f("◼")])),_:1})),r(n,{class:"delta-value"},{default:d((()=>[f(v(l.value),1)])),_:1})])),_:1},8,["class"]),r(n,{class:"delta-label"},{default:d((()=>[f("较昨日")])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-383daff0"]]),O=w(e({__name:"index",setup(e){const t=A(),{dashboard:u,systemStatus:h,profile:g,selectedSoftware:b,cardTypes:x,agents:k,theme:T,chatUnreadCount:w,hasNewBlacklistLogs:O,settlementHasReminder:H}=L(t),G=P(),{agentWeChatBinding:J,agentWechatSubscriptions:Q,wechatTemplates:K,wechatTemplatePreviews:Z}=L(G),ee=a(!1),ae=s((()=>Boolean(J.value))),te=s((()=>G.loading.wechatBinding||G.loading.wechatBind||G.loading.wechatUnbind)),le=s((()=>{var e,a,t,l,s,n;const u=K.value;if(!u)return[];return[{key:"instant",title:"即时沟通提醒",description:"客户有新留言或待处理消息时提醒",templateId:(null==(e=u.instantCommunication)?void 0:e.trim())??"",preview:(null==(a=Z.value)?void 0:a.instant)??null},{key:"blacklist",title:"黑名单严重警告",description:"黑名单记录触发时第一时间通知",templateId:(null==(t=u.blacklistAlert)?void 0:t.trim())??"",preview:(null==(l=Z.value)?void 0:l.blacklist)??null},{key:"settlement",title:"结算账单通知",description:"结算周期到期后提醒待对账金额",templateId:(null==(s=u.settlementNotice)?void 0:s.trim())??"",preview:(null==(n=Z.value)?void 0:n.settlement)??null}].filter((e=>e.templateId.length>=10&&!e.templateId.includes("...")))})),se=s((()=>Q.value??{}));s((()=>ae.value&&le.value.length>0)),s((()=>{var e;const a=J.value;if(!a)return"";const t=null==(e=a.nickname)?void 0:e.trim();return t||((l=a.openId)?l.length<=6?l:`${l.slice(0,4)}***${l.slice(-3)}`:"");var l})),s((()=>te.value?"处理中...":ae.value?"重新绑定":"绑定微信")),s((()=>ee.value?te.value&&!J.value?"加载中...":ae.value?"已绑定":"未绑定":"仅微信小程序支持")),a(!1);const ne=a(!1),ue=s((()=>G.bindings.map((e=>{var a;const t=null==(a=e.authorDisplayName)?void 0:a.trim();return t||(e.softwareType?`${e.softwareType} (${e.softwareCode})`:e.softwareCode)})))),ie=s((()=>{if(!G.selectedBinding)return 0;const e=G.bindings.findIndex((e=>{var a;return e.bindingId===(null==(a=G.selectedBinding)?void 0:a.bindingId)}));return e>=0?e:0})),oe=s((()=>{if(!G.bindings.length)return"尚未绑定软件码";if(!G.selectedBinding)return ue.value[ie.value]??"请选择软件码";if(!ue.value.length){const e=G.selectedBinding;return e?e.authorDisplayName||e.softwareCode:"请选择软件码"}return ue.value[ie.value]??ue.value[0]})),ce=s((()=>!G.bindings.length||ne.value||G.loading.bindings));i((()=>{var e;return[(null==(e=J.value)?void 0:e.openId)??null,le.value.length]}),(()=>{!function(){if(!ae.value||!le.value.length)return;const e=se.value;e&&Object.keys(e).length>0||le.value.forEach((e=>{G.setAgentWechatSubscription(e.key,!0)}))}()}),{immediate:!0});const de=s((()=>u.value.stats??[])),re=s((()=>de.value.map((e=>({key:e.key,label:e.label,value:e.value,delta:0,trend:"flat"}))))),fe=s((()=>u.value.trend??[])),ve=s((()=>u.value.trendTotal??0)),me=s((()=>Math.max(0,Math.ceil(u.value.trendMax??0)))),he=s((()=>u.value.subAgentTrend??{categories:[],series:[],total:0})),pe=s((()=>u.value.announcements??[])),ge=s((()=>u.value.usageHeatmap??[])),be=s((()=>{var e,a;const t=null==(a=null==(e=g.value)?void 0:e.name)?void 0:a.trim();return t?t.charAt(0).toUpperCase():"访"})),ye=s((()=>t.loading.dashboard)),_e=s((()=>t.loading.sales)),xe=s((()=>t.loading.logout)),ke=s((()=>u.value.salesResult??{count:0,cards:[]})),Te=s((()=>ke.value.settlements??[])),we=s((()=>Number(ke.value.totalAmount??0))),Me=a(1),Se=s((()=>{const e=ke.value.cards||[],a=20*(Me.value-1);return e.slice(a,a+20)})),$e=s((()=>{var e;const a=(null==(e=ke.value.cards)?void 0:e.length)??0;return Math.max(1,Math.ceil(a/20))})),Ce=s((()=>{const e=u.value.salesFilters;if(!e)return"";return`时间：${(e.startTime??"-")||"-"} ~ ${(e.endTime??"-")||"-"}，代理：${(e.agent?e.agent:"全部")||"全部"}`})),Ae=s((()=>["全部",...x.value.map((e=>e.name))])),Le=["全部","启用","禁用"],Pe=s((()=>["全部",...k.value.map((e=>e.username))])),Ne=a(0),De=a(0),Be=a(0),Fe=l({cardType:"",status:"",agent:"",includeDescendants:!0,startTime:"",endTime:""}),Ie=[{label:"暗夜",value:"dark"},{label:"明亮",value:"light"},{label:"卡通",value:"cartoon"}],Re=Ie.map((e=>e.label)),Ee=a(0),We=[{label:"软件绑定管理",description:"新增、修改与删除绑定软件码",path:"/pages/agent/bind"},{label:"结算设置",description:"为当前账号维护各卡密类型的结算价格",path:"/pages/agent/settlement"},{label:"卡密管理",description:"搜索、启用禁用与解绑操作",path:"/pages/cards/index"},{label:"代理管理",description:"封禁启用、加款与权限配置",path:"/pages/agents/index"},{label:"即时沟通",description:"与渠道实时协同巡检",path:"/pages/chat/index"},{label:"卡密验证",description:"批量验证与下载链接",path:"/pages/verify/index"},{label:"黑名单记录",description:"查询黑名单触发日志",path:"/pages/blacklist/logs/index"},{label:"黑名单机器码",description:"管理封禁机器码",path:"/pages/blacklist/machines/index"}],Ye=s((()=>{const e=w.value,a=O.value;return We.map((t=>{const l={...t};return"/pages/chat/index"===t.path&&e>0?l.badge={type:"info",label:"新消息",value:e>99?"99+":String(e)}:"/pages/agent/settlement"===t.path&&H.value?l.badge={type:"alert",label:"待结算",subtext:"请尽快处理"}:"/pages/blacklist/logs/index"===t.path&&a&&(l.badge={type:"alert",label:"严重警告",subtext:"有人尝试破解"}),l}))})),Ve=s((()=>{const e=h.value;return e?{machine:e.machineName||"未识别主机",os:e.osDescription||"未知系统",cpu:null!=e.cpuLoadPercentage?`${e.cpuLoadPercentage.toFixed(1)}%`:"--",memory:null!=e.memoryUsagePercentage?`${e.memoryUsagePercentage.toFixed(1)}%`:"--",uptime:sa(e.uptimeSeconds),boot:e.bootTime?Y(e.bootTime):"--",warnings:Array.isArray(e.warnings)?e.warnings:[]}:null}));function Ue(e){const a=e=>e.toString().padStart(2,"0");return`${e.getFullYear()}-${a(e.getMonth()+1)}-${a(e.getDate())} ${a(e.getHours())}:${a(e.getMinutes())}`}function Xe(e){if(!e)return"";const a=e.trim();if(!a)return"";if(/^\d{4}-\d{2}-\d{2}\s\d{2}:\d{2}$/.test(a))return a;const t=new Date(a.replace("T"," ").replace(/\//g,"-"));return Number.isNaN(t.getTime())?"":Ue(t)}function qe(e){return Xe(e)}function je(e){const a=Number(e??0);return Number.isFinite(a)?a.toFixed(2):"0.00"}function ze(e){const a=new Date,t=new Date(a.getTime()-5184e5);Fe.cardType=(null==e?void 0:e.cardType)??"",Fe.status=(null==e?void 0:e.status)??"",Fe.agent=(null==e?void 0:e.agent)??"",Fe.includeDescendants=(null==e?void 0:e.includeDescendants)??!0,Fe.startTime=Xe(null==e?void 0:e.startTime)||Ue(t),Fe.endTime=Xe(null==e?void 0:e.endTime)||Ue(a),Ne.value=Math.max(0,Ae.value.indexOf(Fe.cardType||"全部")),De.value=Math.max(0,Le.indexOf(Fe.status||"全部")),Be.value=Math.max(0,Pe.value.indexOf(Fe.agent||"全部")),Me.value=1}function Oe(e){const a=(e??"").toString().trim();a?V({data:a,success:()=>{I({title:"已复制",icon:"success",duration:800})},fail:()=>{I({title:"复制失败",icon:"none"})}}):I({title:"无可复制内容",icon:"none"})}function He(e){e<1||e>$e.value||e===Me.value||(Me.value=e)}function Ge(e){const a=Number(e.detail.value),l=Ie[a]??Ie[0];Ee.value=a,t.setTheme(l.value)}async function Je(){if(!xe.value)try{await t.logout()}catch(e){console.error("退出登录失败",e),I({title:"退出失败，请重试",icon:"none"})}}function Qe(){ze({includeDescendants:!0}),t.clearSalesResult({includeDescendants:Fe.includeDescendants,cardType:"",status:"",agent:"",startTime:Fe.startTime,endTime:Fe.endTime})}async function Ke(){if(b.value)try{const e=qe(Fe.startTime),a=qe(Fe.endTime);await t.runSalesQuery({cardType:Fe.cardType||void 0,status:Fe.status||void 0,agent:Fe.agent||void 0,includeDescendants:Fe.includeDescendants,startTime:e||void 0,endTime:a||void 0}),I({title:"查询完成",icon:"success"})}catch(e){console.error("submitSalesQuery error",e),I({title:"查询失败",icon:"none"})}else I({title:"请先选择软件位",icon:"none"})}function Ze(e){const a=Number(e.detail.value);Ne.value=a,Fe.cardType=0===a?"":Ae.value[a]}function ea(e){const a=Number(e.detail.value);De.value=a,Fe.status=0===a?"":Le[a]}function aa(e){const a=Number(e.detail.value);Be.value=a,Fe.agent=0===a?"":Pe.value[a]}async function ta(e,a){if(e.authorAccount&&e.authorPassword){ne.value=!0;try{await t.login({username:e.authorAccount,password:e.authorPassword},{skipBootstrap:!1})}catch(l){if(!(null==a?void 0:a.silent)){const e=(null==l?void 0:l.message)&&"string"==typeof l.message?l.message:"同步作者登录失败";I({title:e,icon:"none"})}throw l}finally{ne.value=!1}}}function la(e){var a;const t=Number(e.detail.value??ie.value),l=G.bindings[t];l&&(null==(a=G.selectedBinding)?void 0:a.bindingId)!==l.bindingId&&(G.selectBinding(l),ta(l,{silent:!0}).then((()=>{I({title:`已切换 ${l.softwareCode}`,icon:"success"})})).catch((()=>{})))}function sa(e){if(null==e)return"—";const a=Number(e);if(!Number.isFinite(a)||a<=0)return"—";const t=Math.floor(a/86400),l=Math.floor(a%86400/3600),s=Math.floor(a%3600/60);if(t>0)return`${t}天${l}小时`;if(l>0)return`${l}小时${s}分钟`;return`${s}分钟${Math.floor(a%60)}秒`}return n((async()=>{if(G.isAuthenticated)if(await async function(){ee.value&&G.isAuthenticated&&await G.fetchWeChatBinding("agent").catch((()=>{}))}(),ee.value&&G.fetchWeChatTemplates().catch((()=>{})),G.bindings.length||await G.fetchAgentProfile(),!G.selectedBinding&&G.bindings.length&&G.selectBinding(G.bindings[0]),G.selectedBinding){try{await ta(G.selectedBinding,{silent:!0})}catch(e){console.warn("自动同步作者凭证失败",e)}await t.ensureReady(),await t.loadDashboard(),await Promise.all([t.loadCardTypes(),t.loadAgents({limit:200}),t.loadChatSessions().catch((e=>{console.warn("加载即时沟通会话失败",e)})),t.loadBlacklistLogs(100).catch((e=>{console.warn("加载黑名单日志失败",e)}))]),ze(u.value.salesFilters??{includeDescendants:!0})}else D({title:"尚未绑定作者",content:"请先绑定软件码后再访问控制台。",showCancel:!1,success:()=>{B({url:"/pages/agent/bind"})}});else N({url:"/pages/login/agent"})})),i((()=>b.value),((e,a)=>{e&&e!==a&&(t.loadDashboard(),t.loadCardTypes(!0),t.loadAgents({limit:200,page:1,keyword:""}),t.loadChatSessions().catch((e=>{console.warn("切换软件时加载会话失败",e)})),t.loadBlacklistLogs(100).catch((e=>{console.warn("切换软件时加载黑名单日志失败",e)})),Qe())})),i((()=>u.value.salesFilters),(e=>{e?ze(e):Qe()}),{immediate:!0}),i((()=>u.value.salesResult),(()=>{Me.value=1})),i(T,(e=>{const a=Ie.findIndex((a=>a.value===e));Ee.value=a>=0?a:0}),{immediate:!0}),(e,a)=>{const t=y,l=_,s=R,n=E,u=W;return o(),c(l,{class:"page"},{default:d((()=>[r(l,{class:"hero glass-card"},{default:d((()=>[r(l,{class:"hero-text"},{default:d((()=>[r(t,{class:"hero-badge"},{default:d((()=>[f("SProtect · 代理后台中心")])),_:1}),r(t,{class:"hero-title"},{default:d((()=>[f("代理监控面板")])),_:1}),r(t,{class:"hero-subtitle"},{default:d((()=>[f(" 实时掌握软件激活、代理活跃度与卡密发放情况，支持桌面与移动端自适配。 ")])),_:1})])),_:1}),r(l,{class:"hero-meta"},{default:d((()=>[r(l,{class:"meta-item"},{default:d((()=>[r(t,{class:"meta-label"},{default:d((()=>[f("绑定软件码")])),_:1}),r(s,{mode:"selector",range:ue.value,value:ie.value,disabled:ce.value,onChange:la},{default:d((()=>[r(l,{class:C(["picker-display",ce.value?"picker-disabled":""])},{default:d((()=>[f(v(oe.value),1)])),_:1},8,["class"])])),_:1},8,["range","value","disabled"])])),_:1}),r(l,{class:"meta-item"},{default:d((()=>[r(t,{class:"meta-label"},{default:d((()=>[f("当前软件位")])),_:1}),r(U)])),_:1}),r(l,{class:"meta-item theme-item"},{default:d((()=>[r(t,{class:"meta-label"},{default:d((()=>[f("主题样式")])),_:1}),r(s,{mode:"selector",range:F(Re),value:Ee.value,onChange:Ge},{default:d((()=>[r(l,{class:"picker-display"},{default:d((()=>[f(v(F(Re)[Ee.value]),1)])),_:1})])),_:1},8,["range","value"])])),_:1}),r(l,{class:"meta-item account-item"},{default:d((()=>[r(t,{class:"meta-label"},{default:d((()=>[f("登录账号")])),_:1}),r(l,{class:"account-info"},{default:d((()=>[r(l,{class:"account-avatar"},{default:d((()=>[f(v(be.value),1)])),_:1}),r(t,{class:"meta-value"},{default:d((()=>{var e;return[f(v((null==(e=F(g))?void 0:e.name)??"未登录"),1)]})),_:1})])),_:1})])),_:1}),r(l,{class:"meta-item role-item"},{default:d((()=>[r(t,{class:"meta-label"},{default:d((()=>[f("角色权限")])),_:1}),r(l,{class:"role-row"},{default:d((()=>[r(t,{class:"meta-value"},{default:d((()=>{var e;return[f(v((null==(e=F(g))?void 0:e.role)??"访客"),1)]})),_:1}),r(n,{class:"meta-button ghost",disabled:xe.value,onClick:Je},{default:d((()=>[f(v(xe.value?"正在退出...":"退出登录"),1)])),_:1},8,["disabled"])])),_:1})])),_:1})])),_:1})])),_:1}),r(l,{class:"quick-nav glass-card"},{default:d((()=>[r(l,{class:"quick-nav-title"},{default:d((()=>[f("快捷导航")])),_:1}),r(l,{class:"quick-nav-grid"},{default:d((()=>[(o(!0),M($,null,S(Ye.value,(e=>(o(),c(l,{key:e.path,class:"quick-nav-item",onClick:a=>{return t=e.path,void B({url:t});var t}},{default:d((()=>[e.badge?(o(),c(l,{key:0,class:C(["quick-nav-badge",`badge-${e.badge.type}`])},{default:d((()=>[r(l,{class:"badge-main"},{default:d((()=>[r(t,{class:"badge-text"},{default:d((()=>[f(v(e.badge.label),1)])),_:2},1024),e.badge.value?(o(),c(t,{key:0,class:"badge-count"},{default:d((()=>[f(v(e.badge.value),1)])),_:2},1024)):m("",!0)])),_:2},1024),e.badge.subtext?(o(),c(t,{key:0,class:"badge-subtext"},{default:d((()=>[f(v(e.badge.subtext),1)])),_:2},1024)):m("",!0)])),_:2},1032,["class"])):m("",!0),r(l,{class:"quick-nav-item-head"},{default:d((()=>[f(v(e.label),1)])),_:2},1024),r(l,{class:"quick-nav-item-desc"},{default:d((()=>[f(v(e.description),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1}),Ve.value?(o(),c(l,{key:0,class:"system glass-card"},{default:d((()=>[r(l,{class:"system-header"},{default:d((()=>[r(t,{class:"system-title"},{default:d((()=>[f("服务器状态")])),_:1}),r(t,{class:"system-subtitle"},{default:d((()=>[f(v(Ve.value.machine)+" · "+v(Ve.value.os),1)])),_:1})])),_:1}),r(l,{class:"system-grid"},{default:d((()=>[r(l,{class:"system-item"},{default:d((()=>[r(t,{class:"system-label"},{default:d((()=>[f("CPU 负载")])),_:1}),r(t,{class:"system-value"},{default:d((()=>[f(v(Ve.value.cpu),1)])),_:1})])),_:1}),r(l,{class:"system-item"},{default:d((()=>[r(t,{class:"system-label"},{default:d((()=>[f("内存占用")])),_:1}),r(t,{class:"system-value"},{default:d((()=>[f(v(Ve.value.memory),1)])),_:1})])),_:1}),r(l,{class:"system-item"},{default:d((()=>[r(t,{class:"system-label"},{default:d((()=>[f("运行时长")])),_:1}),r(t,{class:"system-value"},{default:d((()=>[f(v(Ve.value.uptime),1)])),_:1})])),_:1}),r(l,{class:"system-item"},{default:d((()=>[r(t,{class:"system-label"},{default:d((()=>[f("最近启动")])),_:1}),r(t,{class:"system-value"},{default:d((()=>[f(v(Ve.value.boot),1)])),_:1})])),_:1})])),_:1}),Ve.value.warnings.length?(o(),c(l,{key:0,class:"system-warning"},{default:d((()=>[(o(!0),M($,null,S(Ve.value.warnings,((e,a)=>(o(),c(t,{key:a},{default:d((()=>[f(v(e),1)])),_:2},1024)))),128))])),_:1})):m("",!0)])),_:1})):m("",!0),r(l,{class:"stat-grid"},{default:d((()=>[(o(!0),M($,null,S(re.value,(e=>(o(),c(z,{key:e.key,title:e.label,value:e.value,delta:e.delta,trend:e.trend},null,8,["title","value","delta","trend"])))),128))])),_:1}),r(q,{title:"过去 7 日总体态势",subtitle:"包含封禁",points:fe.value,total:ve.value,"total-label":"最近7天总计","max-value":me.value},{extra:d((()=>[r(l,{class:"chart-extra"},{default:d((()=>[f("单位：综合评分")])),_:1})])),_:1},8,["points","total","max-value"]),r(j,{title:"最近子代理 7 天激活趋势",subtitle:"洞察各下级代理激活情况",categories:he.value.categories,series:he.value.series,total:he.value.total},null,8,["categories","series","total"]),r(l,{class:"panel glass-card sales-panel"},{default:d((()=>[r(l,{class:"panel-header"},{default:d((()=>[r(t,{class:"panel-title"},{default:d((()=>[f("销量查询")])),_:1}),r(t,{class:"panel-subtitle"},{default:d((()=>[f("按卡种、状态、代理多条件筛选激活记录")])),_:1})])),_:1}),r(l,{class:"sales-form"},{default:d((()=>[r(l,{class:"form-field"},{default:d((()=>[r(t,{class:"form-label"},{default:d((()=>[f("卡种")])),_:1}),r(s,{mode:"selector",range:Ae.value,value:Ne.value,onChange:Ze},{default:d((()=>[r(l,{class:"picker-display"},{default:d((()=>[f(v(Ae.value[Ne.value]),1)])),_:1})])),_:1},8,["range","value"])])),_:1}),r(l,{class:"form-field"},{default:d((()=>[r(t,{class:"form-label"},{default:d((()=>[f("状态")])),_:1}),r(s,{mode:"selector",range:Le,value:De.value,onChange:ea},{default:d((()=>[r(l,{class:"picker-display"},{default:d((()=>[f(v(Le[De.value]),1)])),_:1})])),_:1},8,["value"])])),_:1}),r(l,{class:"form-field"},{default:d((()=>[r(t,{class:"form-label"},{default:d((()=>[f("代理")])),_:1}),r(s,{mode:"selector",range:Pe.value,value:Be.value,onChange:aa},{default:d((()=>[r(l,{class:"picker-display"},{default:d((()=>[f(v(Pe.value[Be.value]),1)])),_:1})])),_:1},8,["range","value"])])),_:1}),r(l,{class:"form-field switch-field"},{default:d((()=>[r(t,{class:"form-label"},{default:d((()=>[f("包含下级")])),_:1}),r(u,{checked:Fe.includeDescendants,onChange:a[0]||(a[0]=e=>Fe.includeDescendants=e.detail.value)},null,8,["checked"])])),_:1}),r(l,{class:"form-field"},{default:d((()=>[r(t,{class:"form-label"},{default:d((()=>[f("开始时间")])),_:1}),r(X,{modelValue:Fe.startTime,"onUpdate:modelValue":a[1]||(a[1]=e=>Fe.startTime=e),placeholder:"选择开始时间"},null,8,["modelValue"])])),_:1}),r(l,{class:"form-field"},{default:d((()=>[r(t,{class:"form-label"},{default:d((()=>[f("结束时间")])),_:1}),r(X,{modelValue:Fe.endTime,"onUpdate:modelValue":a[2]||(a[2]=e=>Fe.endTime=e),placeholder:"选择结束时间"},null,8,["modelValue"])])),_:1})])),_:1}),r(l,{class:"sales-actions"},{default:d((()=>[r(n,{class:"btn primary",disabled:_e.value,onClick:Ke},{default:d((()=>[f(v(_e.value?"查询中...":"查询"),1)])),_:1},8,["disabled"]),r(n,{class:"btn ghost",disabled:_e.value,onClick:Qe},{default:d((()=>[f("重置")])),_:1},8,["disabled"])])),_:1}),_e.value?(o(),c(l,{key:1,class:"panel-empty"},{default:d((()=>[f("查询中...")])),_:1})):(o(),c(l,{key:0,class:"sales-result"},{default:d((()=>[r(l,{class:"sales-summary"},{default:d((()=>[r(t,{class:"sales-count"},{default:d((()=>[f("激活数量："),r(t,{class:"highlight"},{default:d((()=>[f(v(ke.value.count),1)])),_:1})])),_:1}),r(t,{class:"sales-total"},{default:d((()=>[f("结算总额："),r(t,{class:"highlight"},{default:d((()=>[f("￥"+v(je(we.value)),1)])),_:1})])),_:1}),r(t,{class:"sales-meta"},{default:d((()=>[f(v(Ce.value),1)])),_:1})])),_:1}),Te.value.length?(o(),c(l,{key:0,class:"sales-settlement"},{default:d((()=>[r(l,{class:"settlement-header"},{default:d((()=>[r(t,{class:"settlement-col type"},{default:d((()=>[f("卡种")])),_:1}),r(t,{class:"settlement-col count"},{default:d((()=>[f("激活数量")])),_:1}),r(t,{class:"settlement-col price"},{default:d((()=>[f("结算单价")])),_:1}),r(t,{class:"settlement-col total"},{default:d((()=>[f("结算金额")])),_:1})])),_:1}),(o(!0),M($,null,S(Te.value,(e=>(o(),c(l,{key:e.cardType,class:"settlement-row"},{default:d((()=>[r(t,{class:"settlement-col type"},{default:d((()=>[f(v(e.cardType),1)])),_:2},1024),r(t,{class:"settlement-col count"},{default:d((()=>[f(v(e.count),1)])),_:2},1024),r(t,{class:"settlement-col price"},{default:d((()=>[f("￥"+v(je(e.price)),1)])),_:2},1024),r(t,{class:"settlement-col total"},{default:d((()=>[f("￥"+v(je(e.total)),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1})):m("",!0),ke.value.cards.length?(o(),c(l,{key:2,class:"sales-list"},{default:d((()=>[(o(!0),M($,null,S(Se.value,(e=>(o(),c(l,{key:`${e.card}-${e.activateTime}`,class:"sales-entry glass-light"},{default:d((()=>[r(l,{class:"sales-field"},{default:d((()=>[r(t,{class:"sales-label"},{default:d((()=>[f("卡密")])),_:1}),r(t,{class:"sales-value copyable",onLongpress:a=>Oe(e.card),onClick:p((a=>Oe(e.card)),["stop"])},{default:d((()=>[f(v(e.card),1)])),_:2},1032,["onLongpress","onClick"])])),_:2},1024),r(l,{class:"sales-field"},{default:d((()=>[r(t,{class:"sales-label"},{default:d((()=>[f("激活时间")])),_:1}),r(t,{class:"sales-value copyable",onLongpress:a=>Oe(e.activateTime||"-"),onClick:p((a=>Oe(e.activateTime||"-")),["stop"])},{default:d((()=>[f(v(e.activateTime||"-"),1)])),_:2},1032,["onLongpress","onClick"])])),_:2},1024)])),_:2},1024)))),128)),$e.value>1?(o(),c(l,{key:0,class:"sales-pagination"},{default:d((()=>[r(l,{class:"sales-page-info"},{default:d((()=>[f("第 "+v(Me.value)+" / "+v($e.value)+" 页",1)])),_:1}),r(l,{class:"sales-page-actions"},{default:d((()=>[r(n,{class:"page-btn",disabled:Me.value<=1||_e.value,onClick:a[3]||(a[3]=e=>He(Me.value-1))},{default:d((()=>[f(" 上一页 ")])),_:1},8,["disabled"]),r(n,{class:"page-btn",disabled:Me.value>=$e.value||_e.value,onClick:a[4]||(a[4]=e=>He(Me.value+1))},{default:d((()=>[f(" 下一页 ")])),_:1},8,["disabled"])])),_:1})])),_:1})):m("",!0)])),_:1})):(o(),c(l,{key:1,class:"panel-empty"},{default:d((()=>[f("暂无数据")])),_:1}))])),_:1}))])),_:1}),r(l,{class:"layout-grid"},{default:d((()=>[r(l,{class:"panel glass-card"},{default:d((()=>[r(l,{class:"panel-header"},{default:d((()=>[r(t,{class:"panel-title"},{default:d((()=>[f("代理中心公告")])),_:1}),r(t,{class:"panel-subtitle"},{default:d((()=>[f("与渠道共享最新巡检、版本升级信息")])),_:1})])),_:1}),ye.value?(o(),c(l,{key:0,class:"panel-empty"},{default:d((()=>[f("公告加载中...")])),_:1})):pe.value.length?(o(),c(l,{key:2,class:"announcement-list"},{default:d((()=>[(o(!0),M($,null,S(pe.value,(e=>(o(),c(l,{key:e.id,class:"announcement-item"},{default:d((()=>[r(t,{class:"announcement-title"},{default:d((()=>[f(v(e.title),1)])),_:2},1024),r(t,{class:"announcement-content"},{default:d((()=>[f(v(e.content),1)])),_:2},1024),r(l,{class:"announcement-meta"},{default:d((()=>[r(t,null,{default:d((()=>[f(v(e.updatedAt),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})):(o(),c(l,{key:1,class:"panel-empty"},{default:d((()=>[f("暂无公告")])),_:1}))])),_:1}),r(l,{class:"panel glass-card"},{default:d((()=>[r(l,{class:"panel-header"},{default:d((()=>[r(t,{class:"panel-title"},{default:d((()=>[f("激活地区排行榜")])),_:1}),r(t,{class:"panel-subtitle"},{default:d((()=>[f("核心地区授权分布情况")])),_:1})])),_:1}),ye.value?(o(),c(l,{key:0,class:"panel-empty"},{default:d((()=>[f("数据同步中...")])),_:1})):ge.value.length?(o(),c(l,{key:2,class:"heatmap-grid"},{default:d((()=>[(o(!0),M($,null,S(ge.value,(e=>(o(),c(l,{key:e.name,class:"heatmap-item glass-light"},{default:d((()=>[r(t,{class:"heatmap-name"},{default:d((()=>[f(v(e.name),1)])),_:2},1024),r(l,{class:"heatmap-stats"},{default:d((()=>[r(l,null,{default:d((()=>[r(t,{class:"heatmap-label"},{default:d((()=>[f("激活量")])),_:1}),r(t,{class:"heatmap-value"},{default:d((()=>[f(v(e.count),1)])),_:2},1024)])),_:2},1024),r(l,null,{default:d((()=>[r(t,{class:"heatmap-label"},{default:d((()=>[f("占比")])),_:1}),r(t,{class:"heatmap-value"},{default:d((()=>[f(v(e.percentage)+"%",1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})):(o(),c(l,{key:1,class:"panel-empty"},{default:d((()=>[f("暂无节点统计")])),_:1}))])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-99102857"]]);export{O as default};

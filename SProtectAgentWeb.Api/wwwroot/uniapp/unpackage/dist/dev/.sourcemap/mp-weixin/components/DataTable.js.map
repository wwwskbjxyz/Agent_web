{"version":3,"file":"DataTable.js","sources":["components/DataTable.vue","E:/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/QzovVXNlcnMvQWRtaW5pc3RyYXRvci9zb3VyY2UvcmVwb3Mvd3d3c2tianh5ei9TUFRFU1QtVjEvU1Byb3RlY3RBZ2VudFdlYi5BcGkvd3d3cm9vdC91bmlhcHAvY29tcG9uZW50cy9EYXRhVGFibGUudnVl"],"sourcesContent":["<template>\r\n  <view class=\"table-container glass-card\" :class=\"layoutClass\">\r\n    <view class=\"table-header\">\r\n      <view>\r\n        <text class=\"table-title\">{{ title }}</text>\r\n        <text class=\"table-subtitle\" v-if=\"subtitle\">{{ subtitle }}</text>\r\n      </view>\r\n      <view class=\"table-actions\">\r\n        <slot name=\"actions\" />\r\n      </view>\r\n    </view>\r\n    <scroll-view v-if=\"layout === 'table'\" scroll-x class=\"table-scroll\" :show-scrollbar=\"false\">\r\n      <view class=\"table-wrapper\" :style=\"wrapperStyle\">\r\n        <view class=\"table-row table-row--head\" :style=\"rowStyle\">\r\n          <view v-for=\"column in columns\" :key=\"column.key\" class=\"table-cell\" :style=\"column.style\">\r\n            {{ column.label }}\r\n          </view>\r\n        </view>\r\n        <view v-if=\"loading\" class=\"table-empty\">加载中...</view>\r\n        <view v-else-if=\"!rows.length\" class=\"table-empty\">暂无数据</view>\r\n        <template v-else>\r\n          <view v-for=\"(row, rowIndex) in rows\" :key=\"rowIndex\" class=\"table-row\" :style=\"rowStyle\">\r\n            <view v-for=\"column in columns\" :key=\"column.key\" class=\"table-cell\" :style=\"column.style\">\r\n              <slot :name=\"column.key\" :row=\"row\">\r\n                {{ formatValue(row[column.key]) }}\r\n              </slot>\r\n            </view>\r\n          </view>\r\n        </template>\r\n      </view>\r\n    </scroll-view>\r\n    <view v-else class=\"stack-list\">\r\n      <view v-if=\"loading\" class=\"table-empty\">加载中...</view>\r\n      <view v-else-if=\"!rows.length\" class=\"table-empty\">暂无数据</view>\r\n      <template v-else>\r\n        <view\r\n          v-for=\"(row, rowIndex) in rows\"\r\n          :key=\"getRowId(row, rowIndex)\"\r\n          class=\"stack-row glass-light\"\r\n        >\r\n          <view class=\"stack-header\">\r\n            <view class=\"stack-title\">\r\n              <slot :name=\"primaryKey\" :row=\"row\">\r\n                {{ formatValue(primaryKey ? row[primaryKey] : '') }}\r\n              </slot>\r\n            </view>\r\n            <button\r\n              v-if=\"detailColumns.length && collapseDetails\"\r\n              class=\"stack-toggle\"\r\n              @tap=\"toggleRow(getRowId(row, rowIndex))\"\r\n            >\r\n              {{ isExpanded(getRowId(row, rowIndex)) ? '收起' : '详情' }}\r\n            </button>\r\n          </view>\r\n        <view v-if=\"hasOperationsSlot\" class=\"stack-operations\">\r\n          <slot\r\n            v-if=\"operationsKey === 'operations'\"\r\n            name=\"operations\"\r\n            :row=\"row\"\r\n          >\r\n            {{ formatValue(row[operationsKey]) }}\r\n          </slot>\r\n          <slot v-else :name=\"operationsKey\" :row=\"row\">\r\n            {{ formatValue(row[operationsKey]) }}\r\n          </slot>\r\n        </view>\r\n          <view\r\n            v-if=\"!collapseDetails || isExpanded(getRowId(row, rowIndex))\"\r\n            class=\"stack-body\"\r\n          >\r\n            <view v-for=\"column in detailColumns\" :key=\"column.key\" class=\"stack-field\">\r\n              <text class=\"stack-label\">{{ column.label }}</text>\r\n              <view class=\"stack-value\">\r\n                <slot :name=\"column.key\" :row=\"row\">\r\n                  {{ formatValue(row[column.key]) }}\r\n                </slot>\r\n              </view>\r\n            </view>\r\n          </view>\r\n        </view>\r\n      </template>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { computed, ref, watch, useSlots } from 'vue';\r\n\r\ninterface TableColumn {\r\n  key: string;\r\n  label: string;\r\n  style?: string;\r\n}\r\n\r\nconst props = withDefaults(\r\n  defineProps<{\r\n    title: string;\r\n    subtitle?: string;\r\n    columns: TableColumn[];\r\n    rows: Record<string, any>[];\r\n    loading?: boolean;\r\n    layout?: 'table' | 'stack';\r\n    primaryColumn?: string;\r\n    operationsColumn?: string;\r\n    collapseDetails?: boolean;\r\n  }>(),\r\n  {\r\n    loading: false,\r\n    subtitle: '',\r\n    layout: 'table',\r\n    primaryColumn: '',\r\n    operationsColumn: '',\r\n    collapseDetails: true\r\n  }\r\n);\r\n\r\nconst columnCount = computed(() => (props.columns?.length ? props.columns.length : 1));\r\nconst rowStyle = computed(() => ({\r\n  gridTemplateColumns: `repeat(${columnCount.value}, minmax(200rpx, auto))`\r\n}));\r\nconst wrapperStyle = computed(() => ({\r\n  '--column-count': columnCount.value,\r\n  minWidth: `${Math.max(columnCount.value * 220, 600)}rpx`\r\n}));\r\n\r\nconst layout = computed(() => props.layout ?? 'table');\r\nconst layoutClass = computed(() => (layout.value === 'stack' ? 'table--stack' : 'table--grid'));\r\n\r\nconst primaryKey = computed(() => {\r\n  if (props.primaryColumn) {\r\n    return props.primaryColumn;\r\n  }\r\n  return props.columns?.[0]?.key ?? '';\r\n});\r\n\r\nconst operationsKey = computed(() => {\r\n  if (props.operationsColumn) {\r\n    return props.operationsColumn;\r\n  }\r\n  const hasOperations = props.columns?.some((column) => column.key === 'operations');\r\n  return hasOperations ? 'operations' : '';\r\n});\r\n\r\nconst slots = useSlots();\r\n\r\nconst hasOperationsSlot = computed(() => {\r\n  const key = operationsKey.value;\r\n  if (!key) return false;\r\n  return !!slots[key];\r\n});\r\n\r\nconst detailColumns = computed(() =>\r\n  (props.columns || []).filter(\r\n    (column) => column.key !== primaryKey.value && column.key !== operationsKey.value\r\n  )\r\n);\r\n\r\nconst collapseDetails = computed(() => !!props.collapseDetails);\r\nconst expandedRows = ref<Record<string, boolean>>({});\r\n\r\nwatch(\r\n  () => props.rows,\r\n  () => {\r\n    expandedRows.value = {};\r\n  }\r\n);\r\n\r\nfunction getRowId(row: Record<string, any>, index: number) {\r\n  const key = primaryKey.value;\r\n  if (key && row && row[key] != null) {\r\n    return String(row[key]);\r\n  }\r\n  return `row-${index}`;\r\n}\r\n\r\nfunction toggleRow(id: string) {\r\n  expandedRows.value[id] = !expandedRows.value[id];\r\n}\r\n\r\nfunction isExpanded(id: string) {\r\n  return !!expandedRows.value[id];\r\n}\r\n\r\nfunction formatValue(value: any) {\r\n  if (value === undefined || value === null || value === '') {\r\n    return '—';\r\n  }\r\n  if (typeof value === 'string' || typeof value === 'number') {\r\n    return value;\r\n  }\r\n  if (Array.isArray(value)) {\r\n    return value.join(', ');\r\n  }\r\n  if (typeof value === 'boolean') {\r\n    return value ? '是' : '否';\r\n  }\r\n  return String(value);\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.table-container {\r\n  padding: 32rpx;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 24rpx;\r\n}\r\n\r\n.table-header {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 20rpx;\r\n\r\n  @media (min-width: 768px) {\r\n    flex-direction: row;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n  }\r\n}\r\n\r\n.table-title {\r\n  font-size: 32rpx;\r\n  font-weight: 600;\r\n  color: var(--text-primary);\r\n}\r\n\r\n.table-subtitle {\r\n  font-size: 24rpx;\r\n  color: var(--text-muted);\r\n  margin-top: 8rpx;\r\n}\r\n\r\n.table-actions {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 16rpx;\r\n}\r\n\r\n.table-scroll {\r\n  width: 100%;\r\n}\r\n\r\n.table-wrapper {\r\n  min-width: 100%;\r\n}\r\n\r\n.table-row {\r\n  display: grid;\r\n  align-items: stretch;\r\n  border-bottom: 1rpx solid rgba(148, 163, 184, 0.24);\r\n  border-bottom: 1rpx solid var(--outline-color);\r\n}\r\n\r\n.table-row--head {\r\n  color: rgba(148, 163, 184, 0.75);\r\n  color: var(--text-muted);\r\n  font-size: 24rpx;\r\n  text-transform: uppercase;\r\n  letter-spacing: 0.08em;\r\n}\r\n\r\n.table-cell {\r\n  padding: 22rpx 18rpx;\r\n  font-size: 26rpx;\r\n  color: #f8fafc;\r\n  color: var(--text-primary);\r\n  white-space: normal;\r\n  word-break: break-word;\r\n  user-select: text;\r\n  -webkit-user-select: text;\r\n}\r\n\r\n.table-row:not(.table-row--head):nth-child(even) {\r\n  background: rgba(12, 19, 33, 0.55);\r\n  background: var(--surface-light);\r\n}\r\n\r\n.table-empty {\r\n  padding: 48rpx 24rpx;\r\n  text-align: center;\r\n  color: rgba(148, 163, 184, 0.75);\r\n  color: var(--text-muted);\r\n}\r\n\r\n.table--stack {\r\n  padding: 28rpx;\r\n}\r\n\r\n.stack-list {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 20rpx;\r\n}\r\n\r\n.stack-row {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 18rpx;\r\n  padding: 24rpx 22rpx;\r\n  border-radius: 24rpx;\r\n  border: 1rpx solid rgba(148, 163, 184, 0.24);\r\n  border: 1rpx solid var(--outline-color);\r\n  background: rgba(12, 19, 33, 0.55);\r\n  background: var(--surface-light);\r\n  backdrop-filter: blur(16rpx);\r\n\r\n  @media (min-width: 768px) {\r\n    padding: 28rpx 26rpx;\r\n  }\r\n}\r\n\r\n.table--stack .stack-row {\r\n  background: rgba(15, 23, 42, 0.72);\r\n  background: var(--card-background);\r\n}\r\n\r\n.stack-header {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 16rpx;\r\n}\r\n\r\n.stack-title {\r\n  flex: 1;\r\n  min-width: 0;\r\n  font-size: 30rpx;\r\n  font-weight: 600;\r\n  color: #f8fafc;\r\n  color: var(--text-primary);\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n}\r\n\r\n.stack-toggle {\r\n  padding: 10rpx 26rpx;\r\n  border-radius: 999rpx;\r\n  border: 1rpx solid rgba(148, 163, 184, 0.24);\r\n  border: 1rpx solid var(--outline-color);\r\n  background: transparent;\r\n  color: rgba(148, 163, 184, 0.75);\r\n  color: var(--text-muted);\r\n  font-size: 24rpx;\r\n}\r\n\r\n.stack-operations {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 12rpx;\r\n  border-top: 1rpx solid rgba(148, 163, 184, 0.24);\r\n  border-top: 1rpx solid var(--outline-color);\r\n  padding-top: 14rpx;\r\n}\r\n\r\n.stack-body {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(240rpx, 1fr));\r\n  gap: 16rpx;\r\n}\r\n\r\n.stack-field {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 6rpx;\r\n}\r\n\r\n.stack-label {\r\n  font-size: 22rpx;\r\n  color: rgba(148, 163, 184, 0.75);\r\n  color: var(--text-muted);\r\n}\r\n\r\n.stack-value {\r\n  font-size: 26rpx;\r\n  color: var(--text-primary);\r\n  word-break: break-word;\r\n  line-height: 1.5;\r\n}\r\n</style>","import Component from 'C:/Users/Administrator/source/repos/wwwskbjxyz/SPTEST-V1/SProtectAgentWeb.Api/wwwroot/uniapp/components/DataTable.vue'\nwx.createComponent(Component)"],"names":["computed","useSlots","ref","watch"],"mappings":";;;;;;;;;;;;;;;;AA8FA,UAAM,QAAQ;AAsBR,UAAA,cAAcA,cAAAA,SAAS,MAAO;;AAAA,0BAAM,YAAN,mBAAe,UAAS,MAAM,QAAQ,SAAS;AAAA,KAAE;AAC/E,UAAA,WAAWA,cAAAA,SAAS,OAAO;AAAA,MAC/B,qBAAqB,UAAU,YAAY,KAAK;AAAA,IAChD,EAAA;AACI,UAAA,eAAeA,cAAAA,SAAS,OAAO;AAAA,MACnC,kBAAkB,YAAY;AAAA,MAC9B,UAAU,GAAG,KAAK,IAAI,YAAY,QAAQ,KAAK,GAAG,CAAC;AAAA,IACnD,EAAA;AAEF,UAAM,SAASA,cAAAA,SAAS,MAAM,MAAM,UAAU,OAAO;AACrD,UAAM,cAAcA,cAAS,SAAA,MAAO,OAAO,UAAU,UAAU,iBAAiB,aAAc;AAExF,UAAA,aAAaA,cAAAA,SAAS,MAAM;;AAChC,UAAI,MAAM,eAAe;AACvB,eAAO,MAAM;AAAA,MACf;AACA,eAAO,iBAAM,YAAN,mBAAgB,OAAhB,mBAAoB,QAAO;AAAA,IAAA,CACnC;AAEK,UAAA,gBAAgBA,cAAAA,SAAS,MAAM;;AACnC,UAAI,MAAM,kBAAkB;AAC1B,eAAO,MAAM;AAAA,MACf;AACM,YAAA,iBAAgB,WAAM,YAAN,mBAAe,KAAK,CAAC,WAAW,OAAO,QAAQ;AACrE,aAAO,gBAAgB,eAAe;AAAA,IAAA,CACvC;AAED,UAAM,QAAQC,cAAAA;AAER,UAAA,oBAAoBD,cAAAA,SAAS,MAAM;AACvC,YAAM,MAAM,cAAc;AAC1B,UAAI,CAAC;AAAY,eAAA;AACV,aAAA,CAAC,CAAC,MAAM,GAAG;AAAA,IAAA,CACnB;AAED,UAAM,gBAAgBA,cAAA;AAAA,MAAS,OAC5B,MAAM,WAAW,CAAA,GAAI;AAAA,QACpB,CAAC,WAAW,OAAO,QAAQ,WAAW,SAAS,OAAO,QAAQ,cAAc;AAAA,MAC9E;AAAA,IAAA;AAGF,UAAM,kBAAkBA,cAAAA,SAAS,MAAM,CAAC,CAAC,MAAM,eAAe;AACxD,UAAA,eAAeE,kBAA6B,CAAA,CAAE;AAEpDC,kBAAA;AAAA,MACE,MAAM,MAAM;AAAA,MACZ,MAAM;AACJ,qBAAa,QAAQ;MACvB;AAAA,IAAA;AAGO,aAAA,SAAS,KAA0B,OAAe;AACzD,YAAM,MAAM,WAAW;AACvB,UAAI,OAAO,OAAO,IAAI,GAAG,KAAK,MAAM;AAC3B,eAAA,OAAO,IAAI,GAAG,CAAC;AAAA,MACxB;AACA,aAAO,OAAO,KAAK;AAAA,IACrB;AAEA,aAAS,UAAU,IAAY;AAC7B,mBAAa,MAAM,EAAE,IAAI,CAAC,aAAa,MAAM,EAAE;AAAA,IACjD;AAEA,aAAS,WAAW,IAAY;AAC9B,aAAO,CAAC,CAAC,aAAa,MAAM,EAAE;AAAA,IAChC;AAEA,aAAS,YAAY,OAAY;AAC/B,UAAI,UAAU,UAAa,UAAU,QAAQ,UAAU,IAAI;AAClD,eAAA;AAAA,MACT;AACA,UAAI,OAAO,UAAU,YAAY,OAAO,UAAU,UAAU;AACnD,eAAA;AAAA,MACT;AACI,UAAA,MAAM,QAAQ,KAAK,GAAG;AACjB,eAAA,MAAM,KAAK,IAAI;AAAA,MACxB;AACI,UAAA,OAAO,UAAU,WAAW;AAC9B,eAAO,QAAQ,MAAM;AAAA,MACvB;AACA,aAAO,OAAO,KAAK;AAAA,IACrB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpMA,GAAG,gBAAgB,SAAS;"}
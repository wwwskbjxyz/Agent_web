{"version":3,"file":"SubTrendChart.js","sources":["components/SubTrendChart.vue","E:/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/QzovVXNlcnMvQWRtaW5pc3RyYXRvci9zb3VyY2UvcmVwb3Mvd3d3c2tianh5ei9TUFRFU1QtVjEvU1Byb3RlY3RBZ2VudFdlYi5BcGkvd3d3cm9vdC91bmlhcHAvY29tcG9uZW50cy9TdWJUcmVuZENoYXJ0LnZ1ZQ"],"sourcesContent":["<template>\r\n  <view class=\"chart-card glass-card\">\r\n    <view class=\"chart-header\">\r\n      <view>\r\n        <text class=\"chart-title\">{{ title }}</text>\r\n        <text v-if=\"subtitle\" class=\"chart-subtitle\">{{ subtitle }}</text>\r\n      </view>\r\n      <text v-if=\"summaryText\" class=\"chart-summary\">{{ summaryText }}</text>\r\n    </view>\r\n    <view class=\"chart-body\">\r\n      <canvas\r\n        :canvas-id=\"canvasId\"\r\n        :id=\"canvasId\"\r\n        class=\"chart-canvas\"\r\n        :width=\"canvasWidth\"\r\n        :height=\"canvasHeight\"\r\n        @touchstart.stop=\"handlePointer\"\r\n        @touchmove.stop=\"handlePointer\"\r\n        @touchend=\"hideTooltip\"\r\n        @touchcancel=\"hideTooltip\"\r\n        @mousemove=\"handlePointer\"\r\n        @mouseleave=\"hideTooltip\"\r\n      ></canvas>\r\n      <view v-if=\"tooltip.visible\" class=\"chart-tooltip\" :style=\"tooltipStyle\">\r\n        <text class=\"tooltip-title\">{{ tooltip.category }}</text>\r\n        <view class=\"tooltip-list\">\r\n          <view v-for=\"item in tooltip.items\" :key=\"item.name\" class=\"tooltip-row\">\r\n            <view class=\"tooltip-dot\" :style=\"{ background: item.color }\"></view>\r\n            <text class=\"tooltip-name\">{{ item.name }}</text>\r\n            <text class=\"tooltip-value\">{{ item.value }}</text>\r\n          </view>\r\n        </view>\r\n      </view>\r\n    </view>\r\n    <view v-if=\"displayedSeries.length\" class=\"legend\">\r\n      <view v-for=\"(item, index) in displayedSeries\" :key=\"item.name\" class=\"legend-item\">\r\n        <view class=\"legend-dot\" :style=\"{ background: palette[index % palette.length] }\"></view>\r\n        <text class=\"legend-name\">{{ item.name }}</text>\r\n        <text class=\"legend-value\">{{ item.total }}</text>\r\n      </view>\r\n    </view>\r\n    <view v-else class=\"empty\">暂无子代理激活记录</view>\r\n  </view>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { computed, getCurrentInstance, nextTick, onMounted, reactive, ref, watch } from 'vue';\r\n\r\ninterface SeriesItem {\r\n  name: string;\r\n  values: number[];\r\n  total: number;\r\n}\r\n\r\nconst props = withDefaults(\r\n  defineProps<{\r\n    title: string;\r\n    subtitle?: string;\r\n    categories: string[];\r\n    series: SeriesItem[];\r\n    total?: number;\r\n  }>(),\r\n  {\r\n    subtitle: '',\r\n    categories: () => [],\r\n    series: () => [],\r\n    total: undefined\r\n  }\r\n);\r\n\r\nconst canvasId = `sub-trend-${Math.random().toString(36).slice(2)}`;\r\nconst canvasWidth = ref(640);\r\nconst canvasHeight = ref(360);\r\nconst displayWidth = ref(640);\r\nconst displayHeight = ref(360);\r\nconst pixelRatio = ref(1);\r\n\r\nlet preferHighDpiScaling = true;\r\n\r\n\r\n\r\n\r\npreferHighDpiScaling = false;\r\n\r\nif (typeof wx !== 'undefined') {\r\n  preferHighDpiScaling = false;\r\n}\r\nconst systemInfo = uni.getSystemInfoSync?.();\r\nif (systemInfo) {\r\n  const runtime = `${systemInfo.uniPlatform || ''}`.toLowerCase();\r\n  const appName = `${systemInfo.appName || ''}`.toLowerCase();\r\n  if (runtime.includes('mp') || runtime.includes('wechat') || appName.includes('wechat')) {\r\n    preferHighDpiScaling = false;\r\n  }\r\n}\r\nlet lastScale = 1;\r\nconst paddingX = 60;\r\nconst paddingY = 60;\r\nconst palette = ['#38bdf8', '#8b5cf6', '#f97316', '#22d3ee', '#f472b6', '#34d399', '#a855f7'];\r\n\r\nconst instance = getCurrentInstance();\r\nconst contextReady = ref(false);\r\nconst canvasRect = ref<{ width: number; height: number; left: number; top: number } | null>(null);\r\nconst categoryPoints = ref<\r\n  {\r\n    x: number;\r\n    label: string;\r\n    anchorY: number;\r\n    items: { name: string; value: number; color: string; y: number }[];\r\n  }[]\r\n>([]);\r\nconst tooltip = reactive({\r\n  visible: false,\r\n  x: 0,\r\n  y: 0,\r\n  category: '',\r\n  items: [] as { name: string; value: number; color: string }[]\r\n});\r\nconst tooltipStyle = computed(() => ({ left: `${tooltip.x}px`, top: `${tooltip.y}px` }));\r\n\r\nconst displayedSeries = computed(() => props.series);\r\nconst summaryText = computed(() => {\r\n  if (props.total == null) return '';\r\n  return `最近子代理7天合计：${props.total}`;\r\n});\r\n\r\nfunction formatCategoryLabel(date: string): string {\r\n  if (!date) {\r\n    return '';\r\n  }\r\n\r\n  const trimmed = date.trim();\r\n  if (!trimmed) {\r\n    return '';\r\n  }\r\n\r\n  const withoutTime = trimmed.split('T')[0].split(' ')[0];\r\n  const match = withoutTime.match(/^(\\d{4})[-/](\\d{1,2})[-/](\\d{1,2})$/);\r\n  if (match) {\r\n    const [, , month, day] = match;\r\n    return `${month.padStart(2, '0')}-${day.padStart(2, '0')}`;\r\n  }\r\n\r\n  const segments = withoutTime.split(/[-/]/).filter(Boolean);\r\n  if (segments.length >= 2) {\r\n    const month = segments[segments.length - 2]?.padStart(2, '0');\r\n    const day = segments[segments.length - 1]?.padStart(2, '0');\r\n    if (month && day) {\r\n      return `${month}-${day}`;\r\n    }\r\n  }\r\n\r\n  return trimmed;\r\n}\r\n\r\nfunction draw() {\r\n  if (!contextReady.value) return;\r\n  const ctx = uni.createCanvasContext(canvasId, instance?.proxy);\r\n  const ratio = pixelRatio.value || 1;\r\n  if (typeof ctx.scale === 'function' && Math.abs(lastScale - 1) > 0.001) {\r\n    ctx.scale(1 / lastScale, 1 / lastScale);\r\n    lastScale = 1;\r\n  }\r\n  ctx.clearRect(0, 0, canvasWidth.value, canvasHeight.value);\r\n  if (ratio !== 1 && typeof ctx.scale === 'function') {\r\n    ctx.scale(ratio, ratio);\r\n    lastScale = ratio;\r\n  } else {\r\n    lastScale = 1;\r\n  }\r\n  const width = displayWidth.value || canvasWidth.value / ratio;\r\n  const height = displayHeight.value || canvasHeight.value / ratio;\r\n  const categories = Array.isArray(props.categories) ? props.categories : [];\r\n  const series = displayedSeries.value;\r\n\r\n  if (!categories.length || !series.length) {\r\n    ctx.draw();\r\n    categoryPoints.value = [];\r\n    tooltip.visible = false;\r\n    return;\r\n  }\r\n\r\n  const maxValue = Math.max(\r\n    ...series.map((item) => {\r\n      const values = item.values?.length ? item.values.map((value) => Number(value ?? 0)) : [0];\r\n      return Math.max(...values);\r\n    }),\r\n    0\r\n  );\r\n  const upperBound = maxValue > 0 ? Math.ceil(maxValue * 1.1) : 1;\r\n  const effectiveRange = upperBound || 1;\r\n  const gridLines = 4;\r\n  const adjust = (value: number) => (ratio !== 1 ? value / ratio : value);\r\n\r\n  ctx.setStrokeStyle('rgba(148, 163, 184, 0.18)');\r\n  ctx.setLineWidth(adjust(1));\r\n  for (let i = 0; i <= gridLines; i += 1) {\r\n    const y = paddingY + ((height - paddingY * 2) / gridLines) * i;\r\n    ctx.beginPath();\r\n    ctx.moveTo(paddingX, y);\r\n    ctx.lineTo(width - paddingX, y);\r\n    ctx.stroke();\r\n  }\r\n\r\n  ctx.setStrokeStyle('rgba(148, 163, 184, 0.3)');\r\n  ctx.setLineWidth(adjust(1.5));\r\n  ctx.beginPath();\r\n  ctx.moveTo(paddingX, paddingY);\r\n  ctx.lineTo(paddingX, height - paddingY);\r\n  ctx.lineTo(width - paddingX, height - paddingY);\r\n  ctx.stroke();\r\n\r\n  ctx.setFillStyle('rgba(226, 232, 240, 0.85)');\r\n  ctx.setFontSize(adjust(16));\r\n  for (let i = 0; i <= gridLines; i += 1) {\r\n    const value = Math.round((upperBound / gridLines) * (gridLines - i));\r\n    const y = paddingY + ((height - paddingY * 2) / gridLines) * i;\r\n    ctx.fillText(`${value}`, 18, y + 6);\r\n  }\r\n\r\n  const stepX =\r\n    categories.length > 1 ? (width - paddingX * 2) / (categories.length - 1) : 0;\r\n  const points = categories.map((label, index) => {\r\n    const items = series.map((item, seriesIndex) => {\r\n      const raw = Number(item.values?.[index] ?? 0);\r\n      const value = Number.isFinite(raw) ? raw : 0;\r\n      const y =\r\n        height -\r\n        paddingY -\r\n        (value / effectiveRange) * (height - paddingY * 2);\r\n      return { name: item.name, value, color: palette[seriesIndex % palette.length], y };\r\n    });\r\n    const anchorY = items.length\r\n      ? Math.min(...items.map((entry) => entry.y))\r\n      : height - paddingY;\r\n    return {\r\n      x: paddingX + stepX * index,\r\n      label,\r\n      anchorY,\r\n      items\r\n    };\r\n  });\r\n\r\n  series.forEach((item, seriesIndex) => {\r\n    const color = palette[seriesIndex % palette.length];\r\n    ctx.setStrokeStyle(color);\r\n    ctx.setLineWidth(adjust(2.5));\r\n    ctx.setLineJoin('round');\r\n    ctx.setLineCap('round');\r\n    ctx.beginPath();\r\n    points.forEach((point, idx) => {\r\n      const entry = point.items[seriesIndex];\r\n      const y = entry ? entry.y : height - paddingY;\r\n      if (idx === 0) {\r\n        ctx.moveTo(point.x, y);\r\n      } else {\r\n        ctx.lineTo(point.x, y);\r\n      }\r\n    });\r\n    ctx.stroke();\r\n\r\n    points.forEach((point) => {\r\n      const entry = point.items[seriesIndex];\r\n      if (!entry) return;\r\n      ctx.beginPath();\r\n      ctx.setFillStyle(color);\r\n      ctx.arc(point.x, entry.y, adjust(3.5), 0, Math.PI * 2);\r\n      ctx.fill();\r\n    });\r\n  });\r\n\r\n  ctx.setFillStyle('rgba(226, 232, 240, 0.78)');\r\n  ctx.setFontSize(adjust(18));\r\n  const previousTextAlign = (ctx as any).textAlign;\r\n  if (typeof ctx.setTextAlign === 'function') {\r\n    ctx.setTextAlign('center');\r\n  }\r\n  points.forEach((point, index) => {\r\n    if (index % 2 === 0 || index === points.length - 1) {\r\n      const y = height - paddingY + 26;\r\n      const label = formatCategoryLabel(point.label);\r\n      ctx.fillText(label, point.x, y);\r\n    }\r\n  });\r\n  if (typeof ctx.setTextAlign === 'function') {\r\n    const fallback = typeof previousTextAlign === 'string' ? previousTextAlign : 'left';\r\n    ctx.setTextAlign(fallback);\r\n  }\r\n\r\n  ctx.draw();\r\n  categoryPoints.value = points;\r\n  nextTick(() => {\r\n    refreshCanvasRect();\r\n  });\r\n}\r\n\r\nonMounted(async () => {\r\n  await nextTick();\r\n  contextReady.value = true;\r\n  draw();\r\n  refreshCanvasRect();\r\n});\r\n\r\nwatch(\r\n  () => [props.categories, displayedSeries.value],\r\n  () => {\r\n    nextTick(() => {\r\n      draw();\r\n      refreshCanvasRect();\r\n    });\r\n  },\r\n  { deep: true }\r\n);\r\n\r\nfunction refreshCanvasRect() {\r\n  uni.createSelectorQuery()\r\n    .in(instance?.proxy)\r\n    .select(`#${canvasId}`)\r\n    .boundingClientRect((rect) => {\r\n      if (rect) {\r\n        const info = uni.getSystemInfoSync?.();\r\n        let ratio = 1;\r\n        if (info && typeof info.pixelRatio === 'number') {\r\n          ratio = preferHighDpiScaling ? Math.max(info.pixelRatio, 1) : 1;\r\n        }\r\n        const width = Math.max(rect.width, 1);\r\n        const height = Math.max(rect.height, 1);\r\n        const scaledWidth = width * ratio;\r\n        const scaledHeight = height * ratio;\r\n\r\n        canvasRect.value = {\r\n          width,\r\n          height,\r\n          left: rect.left,\r\n          top: rect.top\r\n        };\r\n\r\n        let sizeChanged = false;\r\n        if (Math.abs(canvasWidth.value - scaledWidth) > 1) {\r\n          canvasWidth.value = scaledWidth;\r\n          sizeChanged = true;\r\n        }\r\n        if (Math.abs(canvasHeight.value - scaledHeight) > 1) {\r\n          canvasHeight.value = scaledHeight;\r\n          sizeChanged = true;\r\n        }\r\n        if (Math.abs(displayWidth.value - width) > 0.5 || Math.abs(displayHeight.value - height) > 0.5) {\r\n          displayWidth.value = width;\r\n          displayHeight.value = height;\r\n          sizeChanged = true;\r\n        }\r\n        if (Math.abs(pixelRatio.value - ratio) > 0.01) {\r\n          pixelRatio.value = ratio;\r\n          sizeChanged = true;\r\n        }\r\n\r\n        if (sizeChanged) {\r\n          nextTick(() => {\r\n            draw();\r\n          });\r\n        }\r\n      }\r\n    })\r\n    .exec();\r\n}\r\n\r\nfunction resolvePointerPosition(event: any): { x: number; y: number } | null {\r\n  if (event?.detail && typeof event.detail.x === 'number') {\r\n    return { x: event.detail.x, y: event.detail.y };\r\n  }\r\n  if (event?.changedTouches && event.changedTouches.length) {\r\n    const touch = event.changedTouches[0];\r\n    if (typeof touch.x === 'number' && typeof touch.y === 'number') {\r\n      return { x: touch.x, y: touch.y };\r\n    }\r\n    if (canvasRect.value && typeof touch.pageX === 'number' && typeof touch.pageY === 'number') {\r\n      return {\r\n        x: touch.pageX - canvasRect.value.left,\r\n        y: touch.pageY - canvasRect.value.top\r\n      };\r\n    }\r\n  }\r\n  if (typeof event?.offsetX === 'number' && typeof event?.offsetY === 'number') {\r\n    return { x: event.offsetX, y: event.offsetY };\r\n  }\r\n  return null;\r\n}\r\n\r\nfunction findNearestCategory(canvasX: number) {\r\n  if (!categoryPoints.value.length) {\r\n    return null;\r\n  }\r\n  let nearest = categoryPoints.value[0];\r\n  let minDistance = Math.abs(nearest.x - canvasX);\r\n  categoryPoints.value.forEach((point) => {\r\n    const distance = Math.abs(point.x - canvasX);\r\n    if (distance < minDistance) {\r\n      nearest = point;\r\n      minDistance = distance;\r\n    }\r\n  });\r\n  const tolerance = categoryPoints.value.length > 1\r\n    ? Math.max(Math.abs(categoryPoints.value[1].x - categoryPoints.value[0].x) / 2, 40)\r\n    : 60;\r\n  return minDistance <= tolerance ? nearest : null;\r\n}\r\n\r\nfunction handlePointer(event: any) {\r\n  const pointer = resolvePointerPosition(event);\r\n  if (!pointer) {\r\n    return;\r\n  }\r\n  let rect = canvasRect.value;\r\n  if (!rect) {\r\n    refreshCanvasRect();\r\n    rect = canvasRect.value;\r\n  }\r\n  const ratio = pixelRatio.value || 1;\r\n  const width = displayWidth.value || canvasWidth.value / ratio;\r\n  const height = displayHeight.value || canvasHeight.value / ratio;\r\n  const scaleX = rect && rect.width ? width / rect.width : 1;\r\n  const canvasX = pointer.x * scaleX;\r\n  const target = findNearestCategory(canvasX);\r\n  if (!target) {\r\n    tooltip.visible = false;\r\n    return;\r\n  }\r\n  const displayWidthValue = rect?.width ?? width;\r\n  const displayHeightValue = rect?.height ?? height;\r\n  tooltip.visible = true;\r\n  tooltip.category = target.label;\r\n  tooltip.items = target.items\r\n    .slice()\r\n    .sort((a, b) => b.value - a.value)\r\n    .map((item) => ({ name: item.name, value: `数量：${item.value}`, color: item.color }));\r\n  tooltip.x = (target.x / width) * displayWidthValue;\r\n  tooltip.y = (target.anchorY / height) * displayHeightValue;\r\n}\r\n\r\nfunction hideTooltip() {\r\n  tooltip.visible = false;\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.chart-card {\r\n  padding: 32rpx;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 24rpx;\r\n}\r\n\r\n.chart-header {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n}\r\n\r\n.chart-title {\r\n  font-size: 32rpx;\r\n  font-weight: 600;\r\n  color: #f8fafc;\r\n}\r\n\r\n.chart-subtitle {\r\n  font-size: 24rpx;\r\n  color: rgba(148, 163, 184, 0.78);\r\n  margin-top: 6rpx;\r\n}\r\n\r\n.chart-summary {\r\n  font-size: 26rpx;\r\n  color: rgba(148, 163, 184, 0.85);\r\n}\r\n\r\n.chart-body {\r\n  position: relative;\r\n}\r\n\r\n.chart-canvas {\r\n  width: 100%;\r\n  height: 360rpx;\r\n  background: radial-gradient(circle at top, rgba(56, 189, 248, 0.12), transparent 60%), rgba(15, 23, 42, 0.65);\r\n  border-radius: 28rpx;\r\n}\r\n\r\n.chart-tooltip {\r\n  position: absolute;\r\n  min-width: 200rpx;\r\n  padding: 18rpx 22rpx;\r\n  border-radius: 20rpx;\r\n  background: rgba(15, 23, 42, 0.94);\r\n  border: 1rpx solid rgba(56, 189, 248, 0.35);\r\n  transform: translate(-50%, -120%);\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 10rpx;\r\n  pointer-events: none;\r\n  z-index: 3;\r\n}\r\n\r\n.tooltip-title {\r\n  font-size: 26rpx;\r\n  color: rgba(226, 232, 240, 0.95);\r\n  font-weight: 600;\r\n}\r\n\r\n.tooltip-list {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 8rpx;\r\n}\r\n\r\n.tooltip-row {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10rpx;\r\n  font-size: 24rpx;\r\n  color: rgba(226, 232, 240, 0.88);\r\n}\r\n\r\n.tooltip-dot {\r\n  width: 14rpx;\r\n  height: 14rpx;\r\n  border-radius: 50%;\r\n}\r\n\r\n.tooltip-name {\r\n  flex: 1;\r\n}\r\n\r\n.tooltip-value {\r\n  font-weight: 600;\r\n  color: #38bdf8;\r\n}\r\n\r\n.legend {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 16rpx 24rpx;\r\n}\r\n\r\n.legend-item {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10rpx;\r\n  color: rgba(226, 232, 240, 0.85);\r\n  font-size: 24rpx;\r\n}\r\n\r\n.legend-dot {\r\n  width: 16rpx;\r\n  height: 16rpx;\r\n  border-radius: 50%;\r\n}\r\n\r\n.legend-name {\r\n  font-weight: 500;\r\n}\r\n\r\n.legend-value {\r\n  color: rgba(148, 163, 184, 0.8);\r\n}\r\n\r\n.empty {\r\n  text-align: center;\r\n  color: rgba(148, 163, 184, 0.6);\r\n  padding: 20rpx 0;\r\n}\r\n</style>","import Component from 'C:/Users/Administrator/source/repos/wwwskbjxyz/SPTEST-V1/SProtectAgentWeb.Api/wwwroot/uniapp/components/SubTrendChart.vue'\nwx.createComponent(Component)"],"names":["ref","wx","uni","getCurrentInstance","reactive","computed","_a","_b","nextTick","onMounted","watch"],"mappings":"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"}
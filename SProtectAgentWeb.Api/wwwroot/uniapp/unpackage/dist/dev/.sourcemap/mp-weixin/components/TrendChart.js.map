{"version":3,"file":"TrendChart.js","sources":["components/TrendChart.vue","E:/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/QzovVXNlcnMvQWRtaW5pc3RyYXRvci9zb3VyY2UvcmVwb3Mvd3d3c2tianh5ei9TUFRFU1QtVjEvU1Byb3RlY3RBZ2VudFdlYi5BcGkvd3d3cm9vdC91bmlhcHAvY29tcG9uZW50cy9UcmVuZENoYXJ0LnZ1ZQ"],"sourcesContent":["\r\n<template>\r\n  <view class=\"chart-card glass-card\">\r\n    <view class=\"chart-header\">\r\n      <view>\r\n        <text class=\"chart-title\">{{ title }}</text>\r\n        <text class=\"chart-subtitle\" v-if=\"subtitle\">{{ subtitle }}</text>\r\n      </view>\r\n      <view class=\"chart-extra\">\r\n        <slot name=\"extra\" />\r\n        <text v-if=\"summaryText\" class=\"chart-summary\">{{ summaryText }}</text>\r\n      </view>\r\n    </view>\r\n    <view class=\"chart-body\">\r\n      <canvas\r\n        :canvas-id=\"canvasId\"\r\n        :id=\"canvasId\"\r\n        class=\"chart-canvas\"\r\n        :width=\"canvasWidth\"\r\n        :height=\"canvasHeight\"\r\n        @touchstart.stop=\"handlePointer\"\r\n        @touchmove.stop=\"handlePointer\"\r\n        @touchend=\"hideTooltip\"\r\n        @touchcancel=\"hideTooltip\"\r\n        @mousemove=\"handlePointer\"\r\n        @mouseleave=\"hideTooltip\"\r\n      ></canvas>\r\n      <view v-if=\"tooltip.visible\" class=\"chart-tooltip\" :style=\"tooltipStyle\">\r\n        <text class=\"tooltip-title\">{{ tooltip.label }}</text>\r\n        <text class=\"tooltip-value\">{{ tooltip.value }}</text>\r\n      </view>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { computed, getCurrentInstance, nextTick, onMounted, reactive, ref, watch } from 'vue';\r\nimport type { TrendPoint } from '../common/types';\r\n\r\nconst props = withDefaults(\r\n  defineProps<{\r\n    title: string;\r\n    subtitle?: string;\r\n    points: TrendPoint[];\r\n    total?: number;\r\n    totalLabel?: string;\r\n    maxValue?: number;\r\n  }>(),\r\n  {\r\n    subtitle: '',\r\n    total: undefined,\r\n    totalLabel: undefined,\r\n    maxValue: undefined\r\n  }\r\n);\r\n\r\nconst canvasId = `trend-${Math.random().toString(36).slice(2)}`;\r\nconst canvasWidth = ref(640);\r\nconst canvasHeight = ref(320);\r\nconst displayWidth = ref(640);\r\nconst displayHeight = ref(320);\r\nconst pixelRatio = ref(1);\r\n\r\nlet preferHighDpiScaling = true;\r\n\r\n\r\n\r\n\r\npreferHighDpiScaling = false;\r\n\r\nif (typeof wx !== 'undefined') {\r\n  preferHighDpiScaling = false;\r\n}\r\nconst systemInfo = uni.getSystemInfoSync?.();\r\nif (systemInfo) {\r\n  const runtime = `${systemInfo.uniPlatform || ''}`.toLowerCase();\r\n  const appName = `${systemInfo.appName || ''}`.toLowerCase();\r\n  if (runtime.includes('mp') || runtime.includes('wechat') || appName.includes('wechat')) {\r\n    preferHighDpiScaling = false;\r\n  }\r\n}\r\nlet lastScale = 1;\r\nconst contextReady = ref(false);\r\nconst instance = getCurrentInstance();\r\nconst canvasRect = ref<{ width: number; height: number; left: number; top: number } | null>(null);\r\nconst pointPositions = ref<{ x: number; y: number; value: number; label: string }[]>([]);\r\nconst tooltip = reactive({ visible: false, x: 0, y: 0, label: '', value: 0 });\r\nconst tooltipStyle = computed(() => ({ left: `${tooltip.x}px`, top: `${tooltip.y}px` }));\r\n\r\nconst summaryText = computed(() => {\r\n  if (props.total == null) {\r\n    return '';\r\n  }\r\n  const label = props.totalLabel || '累计总计';\r\n  return `${label}：${props.total}`;\r\n});\r\n\r\nfunction draw(points: TrendPoint[]) {\r\n  if (!points.length) return;\r\n  const ctx = uni.createCanvasContext(canvasId, instance?.proxy);\r\n  const ratio = pixelRatio.value || 1;\r\n  if (typeof ctx.scale === 'function' && Math.abs(lastScale - 1) > 0.001) {\r\n    ctx.scale(1 / lastScale, 1 / lastScale);\r\n    lastScale = 1;\r\n  }\r\n  ctx.clearRect(0, 0, canvasWidth.value, canvasHeight.value);\r\n  if (ratio !== 1 && typeof ctx.scale === 'function') {\r\n    ctx.scale(ratio, ratio);\r\n    lastScale = ratio;\r\n  } else {\r\n    lastScale = 1;\r\n  }\r\n  const width = displayWidth.value || canvasWidth.value / ratio;\r\n  const height = displayHeight.value || canvasHeight.value / ratio;\r\n  const paddingX = 60;\r\n  const paddingY = 50;\r\n  const adjust = (value: number) => (ratio !== 1 ? value / ratio : value);\r\n\r\n  const values = points.map((item) => Number(item.value ?? 0));\r\n  const min = Math.min(...values);\r\n  const max = Math.max(...values);\r\n  const providedMax = typeof props.maxValue === 'number' && props.maxValue > 0 ? props.maxValue : max;\r\n  const upperBound = Math.max(providedMax, max);\r\n  const baseMin = Math.min(min, 0);\r\n  const range = upperBound - baseMin;\r\n  const effectiveRange = range === 0 ? 1 : range;\r\n  const denominator = Math.max(points.length - 1, 1);\r\n  const coordinates = points.map((point, index) => {\r\n    const x = paddingX + (index / denominator) * (width - paddingX * 2);\r\n    const y = height - paddingY - ((point.value - baseMin) / effectiveRange) * (height - paddingY * 2);\r\n    const value = Number(point.value ?? 0);\r\n    return { x, y, value, label: point.date };\r\n  });\r\n\r\n  // background grid\r\n  const gridLines = 4;\r\n  ctx.setStrokeStyle('rgba(148, 163, 184, 0.18)');\r\n  ctx.setLineWidth(adjust(1));\r\n  for (let i = 0; i <= gridLines; i += 1) {\r\n    const y = paddingY + ((height - paddingY * 2) / gridLines) * i;\r\n    ctx.beginPath();\r\n    ctx.moveTo(paddingX, y);\r\n    ctx.lineTo(width - paddingX, y);\r\n    ctx.stroke();\r\n  }\r\n\r\n  // axes\r\n  ctx.setStrokeStyle('rgba(148, 163, 184, 0.28)');\r\n  ctx.setLineWidth(adjust(1.5));\r\n  ctx.beginPath();\r\n  ctx.moveTo(paddingX, paddingY);\r\n  ctx.lineTo(paddingX, height - paddingY);\r\n  ctx.lineTo(width - paddingX, height - paddingY);\r\n  ctx.stroke();\r\n\r\n  // y-axis labels\r\n  ctx.setFillStyle('rgba(226, 232, 240, 0.8)');\r\n  ctx.setFontSize(adjust(16));\r\n  for (let i = 0; i <= gridLines; i += 1) {\r\n    const value = Math.round((upperBound / gridLines) * (gridLines - i));\r\n    const y = paddingY + ((height - paddingY * 2) / gridLines) * i;\r\n    ctx.fillText(`${value}`, 16, y + 6);\r\n  }\r\n\r\n  ctx.beginPath();\r\n  const gradient = ctx.createLinearGradient(0, 0, width, 0);\r\n  gradient.addColorStop(0, '#38bdf8');\r\n  gradient.addColorStop(1, '#6366f1');\r\n\r\n  ctx.setLineWidth(adjust(3));\r\n  ctx.setStrokeStyle(gradient);\r\n  ctx.setLineJoin('round');\r\n  ctx.setLineCap('round');\r\n\r\n  coordinates.forEach((coord, index) => {\r\n    if (index === 0) {\r\n      ctx.moveTo(coord.x, coord.y);\r\n    } else {\r\n      ctx.lineTo(coord.x, coord.y);\r\n    }\r\n  });\r\n  ctx.stroke();\r\n\r\n  const fillGradient = ctx.createLinearGradient(0, paddingY, 0, height - paddingY);\r\n  fillGradient.addColorStop(0, 'rgba(56, 189, 248, 0.32)');\r\n  fillGradient.addColorStop(1, 'rgba(15, 23, 42, 0.05)');\r\n  ctx.setFillStyle(fillGradient);\r\n  ctx.beginPath();\r\n  coordinates.forEach((coord, index) => {\r\n    if (index === 0) {\r\n      ctx.moveTo(coord.x, coord.y);\r\n    } else {\r\n      ctx.lineTo(coord.x, coord.y);\r\n    }\r\n  });\r\n  ctx.lineTo(width - paddingX, height - paddingY);\r\n  ctx.lineTo(paddingX, height - paddingY);\r\n  ctx.closePath();\r\n  ctx.fill();\r\n\r\n  ctx.setFillStyle('rgba(226, 232, 240, 0.65)');\r\n  ctx.setFontSize(adjust(18));\r\n  coordinates.forEach((coord, index) => {\r\n    if (index % 2 === 0 || index === points.length - 1) {\r\n      const y = height - paddingY + 24;\r\n      ctx.fillText(points[index].date, coord.x - 24, y);\r\n    }\r\n  });\r\n\r\n  coordinates.forEach((coord) => {\r\n    ctx.beginPath();\r\n    ctx.setFillStyle('#38bdf8');\r\n    ctx.arc(coord.x, coord.y, adjust(4), 0, Math.PI * 2);\r\n    ctx.fill();\r\n  });\r\n\r\n  ctx.draw();\r\n  pointPositions.value = coordinates;\r\n  nextTick(() => {\r\n    refreshCanvasRect();\r\n  });\r\n}\r\n\r\nfunction render() {\r\n  if (!contextReady.value) return;\r\n  draw(props.points);\r\n}\r\n\r\nfunction refreshCanvasRect() {\r\n  uni.createSelectorQuery()\r\n    .in(instance?.proxy)\r\n    .select(`#${canvasId}`)\r\n    .boundingClientRect((rect) => {\r\n      if (rect) {\r\n        const info = uni.getSystemInfoSync?.();\r\n        let ratio = 1;\r\n        if (info && typeof info.pixelRatio === 'number') {\r\n          ratio = preferHighDpiScaling ? Math.max(info.pixelRatio, 1) : 1;\r\n        }\r\n        const width = Math.max(rect.width, 1);\r\n        const height = Math.max(rect.height, 1);\r\n        const scaledWidth = width * ratio;\r\n        const scaledHeight = height * ratio;\r\n\r\n        canvasRect.value = {\r\n          width,\r\n          height,\r\n          left: rect.left,\r\n          top: rect.top\r\n        };\r\n\r\n        let sizeChanged = false;\r\n        if (Math.abs(canvasWidth.value - scaledWidth) > 1) {\r\n          canvasWidth.value = scaledWidth;\r\n          sizeChanged = true;\r\n        }\r\n        if (Math.abs(canvasHeight.value - scaledHeight) > 1) {\r\n          canvasHeight.value = scaledHeight;\r\n          sizeChanged = true;\r\n        }\r\n        if (Math.abs(displayWidth.value - width) > 0.5 || Math.abs(displayHeight.value - height) > 0.5) {\r\n          displayWidth.value = width;\r\n          displayHeight.value = height;\r\n          sizeChanged = true;\r\n        }\r\n        if (Math.abs(pixelRatio.value - ratio) > 0.01) {\r\n          pixelRatio.value = ratio;\r\n          sizeChanged = true;\r\n        }\r\n\r\n        if (sizeChanged) {\r\n          nextTick(() => {\r\n            render();\r\n          });\r\n        }\r\n      }\r\n    })\r\n    .exec();\r\n}\r\n\r\nfunction resolvePointerPosition(event: any): { x: number; y: number } | null {\r\n  if (event?.detail && typeof event.detail.x === 'number') {\r\n    return { x: event.detail.x, y: event.detail.y };\r\n  }\r\n  if (event?.changedTouches && event.changedTouches.length) {\r\n    const touch = event.changedTouches[0];\r\n    if (typeof touch.x === 'number' && typeof touch.y === 'number') {\r\n      return { x: touch.x, y: touch.y };\r\n    }\r\n    if (canvasRect.value && typeof touch.pageX === 'number' && typeof touch.pageY === 'number') {\r\n      return {\r\n        x: touch.pageX - canvasRect.value.left,\r\n        y: touch.pageY - canvasRect.value.top\r\n      };\r\n    }\r\n  }\r\n  if (typeof event?.offsetX === 'number' && typeof event?.offsetY === 'number') {\r\n    return { x: event.offsetX, y: event.offsetY };\r\n  }\r\n  return null;\r\n}\r\n\r\nfunction findNearestPoint(canvasX: number) {\r\n  if (!pointPositions.value.length) {\r\n    return null;\r\n  }\r\n  let nearest = pointPositions.value[0];\r\n  let minDistance = Math.abs(nearest.x - canvasX);\r\n  pointPositions.value.forEach((point) => {\r\n    const distance = Math.abs(point.x - canvasX);\r\n    if (distance < minDistance) {\r\n      nearest = point;\r\n      minDistance = distance;\r\n    }\r\n  });\r\n  return minDistance <= 40 ? nearest : null;\r\n}\r\n\r\nfunction handlePointer(event: any) {\r\n  const pointer = resolvePointerPosition(event);\r\n  if (!pointer) {\r\n    return;\r\n  }\r\n  let rect = canvasRect.value;\r\n  if (!rect) {\r\n    refreshCanvasRect();\r\n    rect = canvasRect.value;\r\n  }\r\n  const ratio = pixelRatio.value || 1;\r\n  const width = displayWidth.value || canvasWidth.value / ratio;\r\n  const height = displayHeight.value || canvasHeight.value / ratio;\r\n  const scaleX = rect && rect.width ? width / rect.width : 1;\r\n  const canvasX = pointer.x * scaleX;\r\n  const target = findNearestPoint(canvasX);\r\n  if (!target) {\r\n    tooltip.visible = false;\r\n    return;\r\n  }\r\n  const displayWidthValue = rect?.width ?? width;\r\n  const displayHeightValue = rect?.height ?? height;\r\n  tooltip.visible = true;\r\n  tooltip.label = target.label;\r\n  tooltip.value = `数量：${target.value}`;\r\n  tooltip.x = (target.x / width) * displayWidthValue;\r\n  tooltip.y = (target.y / height) * displayHeightValue;\r\n}\r\n\r\nfunction hideTooltip() {\r\n  tooltip.visible = false;\r\n}\r\n\r\nonMounted(async () => {\r\n  await nextTick();\r\n  contextReady.value = true;\r\n  render();\r\n  refreshCanvasRect();\r\n});\r\n\r\nwatch(\r\n  () => props.points,\r\n  (value) => {\r\n    if (!value.length) return;\r\n    nextTick(() => {\r\n      render();\r\n      refreshCanvasRect();\r\n    });\r\n  },\r\n  { deep: true }\r\n);\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.chart-card {\r\n  padding: 32rpx;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 24rpx;\r\n}\r\n\r\n.chart-header {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n}\r\n\r\n.chart-title {\r\n  font-size: 32rpx;\r\n  font-weight: 600;\r\n  color: #f8fafc;\r\n}\r\n\r\n.chart-subtitle {\r\n  font-size: 24rpx;\r\n  color: rgba(148, 163, 184, 0.78);\r\n  margin-top: 6rpx;\r\n}\r\n\r\n.chart-extra {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 8rpx;\r\n  align-items: flex-end;\r\n}\r\n\r\n.chart-summary {\r\n  font-size: 26rpx;\r\n  color: rgba(148, 163, 184, 0.85);\r\n}\r\n\r\n.chart-body {\r\n  position: relative;\r\n}\r\n\r\n.chart-canvas {\r\n  width: 100%;\r\n  height: 320rpx;\r\n  background: radial-gradient(circle at top, rgba(56, 189, 248, 0.15), transparent 60%),\r\n    rgba(15, 23, 42, 0.65);\r\n  border-radius: 28rpx;\r\n}\r\n\r\n.chart-tooltip {\r\n  position: absolute;\r\n  min-width: 160rpx;\r\n  padding: 16rpx 20rpx;\r\n  border-radius: 18rpx;\r\n  background: rgba(15, 23, 42, 0.92);\r\n  border: 1rpx solid rgba(56, 189, 248, 0.35);\r\n  transform: translate(-50%, -120%);\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 6rpx;\r\n  pointer-events: none;\r\n  z-index: 3;\r\n}\r\n\r\n.tooltip-title {\r\n  font-size: 24rpx;\r\n  color: rgba(226, 232, 240, 0.92);\r\n}\r\n\r\n.tooltip-value {\r\n  font-size: 28rpx;\r\n  font-weight: 600;\r\n  color: #38bdf8;\r\n}\r\n</style>","import Component from 'C:/Users/Administrator/source/repos/wwwskbjxyz/SPTEST-V1/SProtectAgentWeb.Api/wwwroot/uniapp/components/TrendChart.vue'\nwx.createComponent(Component)"],"names":["ref","wx","uni","getCurrentInstance","reactive","computed","nextTick","onMounted","watch"],"mappings":";;;;;;;;;;;;;;AAuCA,UAAM,QAAQ;AAiBR,UAAA,WAAW,SAAS,KAAK,OAAO,EAAE,SAAS,EAAE,EAAE,MAAM,CAAC,CAAC;AACvD,UAAA,cAAcA,kBAAI,GAAG;AACrB,UAAA,eAAeA,kBAAI,GAAG;AACtB,UAAA,eAAeA,kBAAI,GAAG;AACtB,UAAA,gBAAgBA,kBAAI,GAAG;AACvB,UAAA,aAAaA,kBAAI,CAAC;AAExB,QAAI,uBAAuB;AAKJ,2BAAA;AAEnB,QAAA,OAAOC,uBAAO,aAAa;AACN,6BAAA;AAAA,IACzB;AACM,UAAA,cAAaC,gCAAI,sBAAJA;AACnB,QAAI,YAAY;AACd,YAAM,UAAU,GAAG,WAAW,eAAe,EAAE,GAAG;AAClD,YAAM,UAAU,GAAG,WAAW,WAAW,EAAE,GAAG;AAC1C,UAAA,QAAQ,SAAS,IAAI,KAAK,QAAQ,SAAS,QAAQ,KAAK,QAAQ,SAAS,QAAQ,GAAG;AAC/D,+BAAA;AAAA,MACzB;AAAA,IACF;AACA,QAAI,YAAY;AACV,UAAA,eAAeF,kBAAI,KAAK;AAC9B,UAAM,WAAWG,cAAAA;AACX,UAAA,aAAaH,kBAAyE,IAAI;AAC1F,UAAA,iBAAiBA,kBAA8D,CAAA,CAAE;AACvF,UAAM,UAAUI,cAAA,SAAS,EAAE,SAAS,OAAO,GAAG,GAAG,GAAG,GAAG,OAAO,IAAI,OAAO,EAAG,CAAA;AAC5E,UAAM,eAAeC,cAAAA,SAAS,OAAO,EAAE,MAAM,GAAG,QAAQ,CAAC,MAAM,KAAK,GAAG,QAAQ,CAAC,KAAO,EAAA;AAEjF,UAAA,cAAcA,cAAAA,SAAS,MAAM;AAC7B,UAAA,MAAM,SAAS,MAAM;AAChB,eAAA;AAAA,MACT;AACM,YAAA,QAAQ,MAAM,cAAc;AAClC,aAAO,GAAG,KAAK,IAAI,MAAM,KAAK;AAAA,IAAA,CAC/B;AAED,aAAS,KAAK,QAAsB;AAClC,UAAI,CAAC,OAAO;AAAQ;AACpB,YAAM,MAAMH,cAAAA,MAAI,oBAAoB,UAAU,qCAAU,KAAK;AACvD,YAAA,QAAQ,WAAW,SAAS;AAC9B,UAAA,OAAO,IAAI,UAAU,cAAc,KAAK,IAAI,YAAY,CAAC,IAAI,MAAO;AACtE,YAAI,MAAM,IAAI,WAAW,IAAI,SAAS;AAC1B,oBAAA;AAAA,MACd;AACA,UAAI,UAAU,GAAG,GAAG,YAAY,OAAO,aAAa,KAAK;AACzD,UAAI,UAAU,KAAK,OAAO,IAAI,UAAU,YAAY;AAC9C,YAAA,MAAM,OAAO,KAAK;AACV,oBAAA;AAAA,MAAA,OACP;AACO,oBAAA;AAAA,MACd;AACA,YAAM,QAAQ,aAAa,SAAS,YAAY,QAAQ;AACxD,YAAM,SAAS,cAAc,SAAS,aAAa,QAAQ;AAC3D,YAAM,WAAW;AACjB,YAAM,WAAW;AACjB,YAAM,SAAS,CAAC,UAAmB,UAAU,IAAI,QAAQ,QAAQ;AAE3D,YAAA,SAAS,OAAO,IAAI,CAAC,SAAS,OAAO,KAAK,SAAS,CAAC,CAAC;AAC3D,YAAM,MAAM,KAAK,IAAI,GAAG,MAAM;AAC9B,YAAM,MAAM,KAAK,IAAI,GAAG,MAAM;AACxB,YAAA,cAAc,OAAO,MAAM,aAAa,YAAY,MAAM,WAAW,IAAI,MAAM,WAAW;AAChG,YAAM,aAAa,KAAK,IAAI,aAAa,GAAG;AAC5C,YAAM,UAAU,KAAK,IAAI,KAAK,CAAC;AAC/B,YAAM,QAAQ,aAAa;AACrB,YAAA,iBAAiB,UAAU,IAAI,IAAI;AACzC,YAAM,cAAc,KAAK,IAAI,OAAO,SAAS,GAAG,CAAC;AACjD,YAAM,cAAc,OAAO,IAAI,CAAC,OAAO,UAAU;AAC/C,cAAM,IAAI,WAAY,QAAQ,eAAgB,QAAQ,WAAW;AAC3D,cAAA,IAAI,SAAS,YAAa,MAAM,QAAQ,WAAW,kBAAmB,SAAS,WAAW;AAChG,cAAM,QAAQ,OAAO,MAAM,SAAS,CAAC;AACrC,eAAO,EAAE,GAAG,GAAG,OAAO,OAAO,MAAM;MAAK,CACzC;AAGD,YAAM,YAAY;AAClB,UAAI,eAAe,2BAA2B;AAC1C,UAAA,aAAa,OAAO,CAAC,CAAC;AAC1B,eAAS,IAAI,GAAG,KAAK,WAAW,KAAK,GAAG;AACtC,cAAM,IAAI,YAAa,SAAS,WAAW,KAAK,YAAa;AAC7D,YAAI,UAAU;AACV,YAAA,OAAO,UAAU,CAAC;AAClB,YAAA,OAAO,QAAQ,UAAU,CAAC;AAC9B,YAAI,OAAO;AAAA,MACb;AAGA,UAAI,eAAe,2BAA2B;AAC1C,UAAA,aAAa,OAAO,GAAG,CAAC;AAC5B,UAAI,UAAU;AACV,UAAA,OAAO,UAAU,QAAQ;AACzB,UAAA,OAAO,UAAU,SAAS,QAAQ;AACtC,UAAI,OAAO,QAAQ,UAAU,SAAS,QAAQ;AAC9C,UAAI,OAAO;AAGX,UAAI,aAAa,0BAA0B;AACvC,UAAA,YAAY,OAAO,EAAE,CAAC;AAC1B,eAAS,IAAI,GAAG,KAAK,WAAW,KAAK,GAAG;AACtC,cAAM,QAAQ,KAAK,MAAO,aAAa,aAAc,YAAY,EAAE;AACnE,cAAM,IAAI,YAAa,SAAS,WAAW,KAAK,YAAa;AAC7D,YAAI,SAAS,GAAG,KAAK,IAAI,IAAI,IAAI,CAAC;AAAA,MACpC;AAEA,UAAI,UAAU;AACd,YAAM,WAAW,IAAI,qBAAqB,GAAG,GAAG,OAAO,CAAC;AAC/C,eAAA,aAAa,GAAG,SAAS;AACzB,eAAA,aAAa,GAAG,SAAS;AAE9B,UAAA,aAAa,OAAO,CAAC,CAAC;AAC1B,UAAI,eAAe,QAAQ;AAC3B,UAAI,YAAY,OAAO;AACvB,UAAI,WAAW,OAAO;AAEV,kBAAA,QAAQ,CAAC,OAAO,UAAU;AACpC,YAAI,UAAU,GAAG;AACf,cAAI,OAAO,MAAM,GAAG,MAAM,CAAC;AAAA,QAAA,OACtB;AACL,cAAI,OAAO,MAAM,GAAG,MAAM,CAAC;AAAA,QAC7B;AAAA,MAAA,CACD;AACD,UAAI,OAAO;AAEX,YAAM,eAAe,IAAI,qBAAqB,GAAG,UAAU,GAAG,SAAS,QAAQ;AAClE,mBAAA,aAAa,GAAG,0BAA0B;AAC1C,mBAAA,aAAa,GAAG,wBAAwB;AACrD,UAAI,aAAa,YAAY;AAC7B,UAAI,UAAU;AACF,kBAAA,QAAQ,CAAC,OAAO,UAAU;AACpC,YAAI,UAAU,GAAG;AACf,cAAI,OAAO,MAAM,GAAG,MAAM,CAAC;AAAA,QAAA,OACtB;AACL,cAAI,OAAO,MAAM,GAAG,MAAM,CAAC;AAAA,QAC7B;AAAA,MAAA,CACD;AACD,UAAI,OAAO,QAAQ,UAAU,SAAS,QAAQ;AAC1C,UAAA,OAAO,UAAU,SAAS,QAAQ;AACtC,UAAI,UAAU;AACd,UAAI,KAAK;AAET,UAAI,aAAa,2BAA2B;AACxC,UAAA,YAAY,OAAO,EAAE,CAAC;AACd,kBAAA,QAAQ,CAAC,OAAO,UAAU;AACpC,YAAI,QAAQ,MAAM,KAAK,UAAU,OAAO,SAAS,GAAG;AAC5C,gBAAA,IAAI,SAAS,WAAW;AAC1B,cAAA,SAAS,OAAO,KAAK,EAAE,MAAM,MAAM,IAAI,IAAI,CAAC;AAAA,QAClD;AAAA,MAAA,CACD;AAEW,kBAAA,QAAQ,CAAC,UAAU;AAC7B,YAAI,UAAU;AACd,YAAI,aAAa,SAAS;AACtB,YAAA,IAAI,MAAM,GAAG,MAAM,GAAG,OAAO,CAAC,GAAG,GAAG,KAAK,KAAK,CAAC;AACnD,YAAI,KAAK;AAAA,MAAA,CACV;AAED,UAAI,KAAK;AACT,qBAAe,QAAQ;AACvBI,oBAAAA,WAAS,MAAM;AACK;MAAA,CACnB;AAAA,IACH;AAEA,aAAS,SAAS;AAChB,UAAI,CAAC,aAAa;AAAO;AACzB,WAAK,MAAM,MAAM;AAAA,IACnB;AAEA,aAAS,oBAAoB;AAC3BJ,oBAAAA,MAAI,oBAAoB,EACrB,GAAG,qCAAU,KAAK,EAClB,OAAO,IAAI,QAAQ,EAAE,EACrB,mBAAmB,CAAC,SAAS;;AAC5B,YAAI,MAAM;AACF,gBAAA,QAAOA,OAAAA,MAAAA,qBAAI,sBAAJA,gBAAAA,IAAAA,KAAAA;AACb,cAAI,QAAQ;AACZ,cAAI,QAAQ,OAAO,KAAK,eAAe,UAAU;AAC/C,oBAAQ,uBAAuB,KAAK,IAAI,KAAK,YAAY,CAAC,IAAI;AAAA,UAChE;AACA,gBAAM,QAAQ,KAAK,IAAI,KAAK,OAAO,CAAC;AACpC,gBAAM,SAAS,KAAK,IAAI,KAAK,QAAQ,CAAC;AACtC,gBAAM,cAAc,QAAQ;AAC5B,gBAAM,eAAe,SAAS;AAE9B,qBAAW,QAAQ;AAAA,YACjB;AAAA,YACA;AAAA,YACA,MAAM,KAAK;AAAA,YACX,KAAK,KAAK;AAAA,UAAA;AAGZ,cAAI,cAAc;AAClB,cAAI,KAAK,IAAI,YAAY,QAAQ,WAAW,IAAI,GAAG;AACjD,wBAAY,QAAQ;AACN,0BAAA;AAAA,UAChB;AACA,cAAI,KAAK,IAAI,aAAa,QAAQ,YAAY,IAAI,GAAG;AACnD,yBAAa,QAAQ;AACP,0BAAA;AAAA,UAChB;AACA,cAAI,KAAK,IAAI,aAAa,QAAQ,KAAK,IAAI,OAAO,KAAK,IAAI,cAAc,QAAQ,MAAM,IAAI,KAAK;AAC9F,yBAAa,QAAQ;AACrB,0BAAc,QAAQ;AACR,0BAAA;AAAA,UAChB;AACA,cAAI,KAAK,IAAI,WAAW,QAAQ,KAAK,IAAI,MAAM;AAC7C,uBAAW,QAAQ;AACL,0BAAA;AAAA,UAChB;AAEA,cAAI,aAAa;AACfI,0BAAAA,WAAS,MAAM;AACN;YAAA,CACR;AAAA,UACH;AAAA,QACF;AAAA,MAAA,CACD,EACA,KAAK;AAAA,IACV;AAEA,aAAS,uBAAuB,OAA6C;AAC3E,WAAI,+BAAO,WAAU,OAAO,MAAM,OAAO,MAAM,UAAU;AAChD,eAAA,EAAE,GAAG,MAAM,OAAO,GAAG,GAAG,MAAM,OAAO;MAC9C;AACA,WAAI,+BAAO,mBAAkB,MAAM,eAAe,QAAQ;AAClD,cAAA,QAAQ,MAAM,eAAe,CAAC;AACpC,YAAI,OAAO,MAAM,MAAM,YAAY,OAAO,MAAM,MAAM,UAAU;AAC9D,iBAAO,EAAE,GAAG,MAAM,GAAG,GAAG,MAAM;QAChC;AACI,YAAA,WAAW,SAAS,OAAO,MAAM,UAAU,YAAY,OAAO,MAAM,UAAU,UAAU;AACnF,iBAAA;AAAA,YACL,GAAG,MAAM,QAAQ,WAAW,MAAM;AAAA,YAClC,GAAG,MAAM,QAAQ,WAAW,MAAM;AAAA,UAAA;AAAA,QAEtC;AAAA,MACF;AACA,UAAI,QAAO,+BAAO,aAAY,YAAY,QAAO,+BAAO,aAAY,UAAU;AAC5E,eAAO,EAAE,GAAG,MAAM,SAAS,GAAG,MAAM;MACtC;AACO,aAAA;AAAA,IACT;AAEA,aAAS,iBAAiB,SAAiB;AACrC,UAAA,CAAC,eAAe,MAAM,QAAQ;AACzB,eAAA;AAAA,MACT;AACI,UAAA,UAAU,eAAe,MAAM,CAAC;AACpC,UAAI,cAAc,KAAK,IAAI,QAAQ,IAAI,OAAO;AAC/B,qBAAA,MAAM,QAAQ,CAAC,UAAU;AACtC,cAAM,WAAW,KAAK,IAAI,MAAM,IAAI,OAAO;AAC3C,YAAI,WAAW,aAAa;AAChB,oBAAA;AACI,wBAAA;AAAA,QAChB;AAAA,MAAA,CACD;AACM,aAAA,eAAe,KAAK,UAAU;AAAA,IACvC;AAEA,aAAS,cAAc,OAAY;AAC3B,YAAA,UAAU,uBAAuB,KAAK;AAC5C,UAAI,CAAC,SAAS;AACZ;AAAA,MACF;AACA,UAAI,OAAO,WAAW;AACtB,UAAI,CAAC,MAAM;AACS;AAClB,eAAO,WAAW;AAAA,MACpB;AACM,YAAA,QAAQ,WAAW,SAAS;AAClC,YAAM,QAAQ,aAAa,SAAS,YAAY,QAAQ;AACxD,YAAM,SAAS,cAAc,SAAS,aAAa,QAAQ;AAC3D,YAAM,SAAS,QAAQ,KAAK,QAAQ,QAAQ,KAAK,QAAQ;AACnD,YAAA,UAAU,QAAQ,IAAI;AACtB,YAAA,SAAS,iBAAiB,OAAO;AACvC,UAAI,CAAC,QAAQ;AACX,gBAAQ,UAAU;AAClB;AAAA,MACF;AACM,YAAA,qBAAoB,6BAAM,UAAS;AACnC,YAAA,sBAAqB,6BAAM,WAAU;AAC3C,cAAQ,UAAU;AAClB,cAAQ,QAAQ,OAAO;AACf,cAAA,QAAQ,MAAM,OAAO,KAAK;AAC1B,cAAA,IAAK,OAAO,IAAI,QAAS;AACzB,cAAA,IAAK,OAAO,IAAI,SAAU;AAAA,IACpC;AAEA,aAAS,cAAc;AACrB,cAAQ,UAAU;AAAA,IACpB;AAEAC,kBAAAA,UAAU,YAAY;AACpB,YAAMD,cAAS,WAAA;AACf,mBAAa,QAAQ;AACd;AACW;IAAA,CACnB;AAEDE,kBAAA;AAAA,MACE,MAAM,MAAM;AAAA,MACZ,CAAC,UAAU;AACT,YAAI,CAAC,MAAM;AAAQ;AACnBF,sBAAAA,WAAS,MAAM;AACN;AACW;QAAA,CACnB;AAAA,MACH;AAAA,MACA,EAAE,MAAM,KAAK;AAAA,IAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9Wf,GAAG,gBAAgB,SAAS;"}
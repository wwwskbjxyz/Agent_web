{"version":3,"file":"index.js","sources":["pages/agents/index.vue","E:/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvYWdlbnRzL2luZGV4LnZ1ZQ"],"sourcesContent":["<template>\r\n  <view class=\"page\">\r\n    <view class=\"header glass-card\">\r\n      <view class=\"header-main\">\r\n        <text class=\"title\">代理管理</text>\r\n        <text class=\"subtitle\">掌握渠道余额、库存及启用状态</text>\r\n      </view>\r\n      <view class=\"header-actions\">\r\n        <SoftwarePicker />\r\n        <button class=\"btn ghost\" :disabled=\"loading\" @tap=\"refreshList\">刷新</button>\r\n        <button class=\"btn primary\" :disabled=\"creating\" @tap=\"openCreateAgent\">{{ creating ? '创建中...' : '添加代理' }}</button>\r\n      </view>\r\n    </view>\r\n\r\n    <view class=\"filters glass-card\">\r\n      <view class=\"filters-grid\">\r\n        <view class=\"field keyword-field\">\r\n          <text class=\"label\">搜索关键字</text>\r\n          <input\r\n            class=\"input\"\r\n            v-model=\"filtersForm.keyword\"\r\n            placeholder=\"用户名 / 备注关键字\"\r\n            confirm-type=\"search\"\r\n            @confirm=\"searchAgents\"\r\n          />\r\n        </view>\r\n        <view class=\"field\">\r\n          <text class=\"label\">状态筛选</text>\r\n          <picker mode=\"selector\" :range=\"statusLabels\" :value=\"statusIndex\" @change=\"onStatusChange\">\r\n            <view class=\"picker-display\">{{ statusLabels[statusIndex] }}</view>\r\n          </picker>\r\n        </view>\r\n        <view class=\"field\">\r\n          <text class=\"label\">每页条数</text>\r\n          <picker mode=\"selector\" :range=\"pageSizeLabels\" :value=\"pageSizeIndex\" @change=\"onPageSizeChange\">\r\n            <view class=\"picker-display\">{{ pageSizeLabels[pageSizeIndex] }}</view>\r\n          </picker>\r\n        </view>\r\n      </view>\r\n      <view class=\"filter-actions\">\r\n        <button class=\"btn primary\" :disabled=\"loading\" @tap=\"searchAgents\">{{ loading ? '查询中...' : '搜索' }}</button>\r\n        <button class=\"btn ghost\" :disabled=\"loading\" @tap=\"resetFilters\">重置</button>\r\n      </view>\r\n    </view>\r\n\r\n    <DataTable\r\n      title=\"子代理列表\"\r\n      :subtitle=\"summaryText\"\r\n      :columns=\"columns\"\r\n      :rows=\"rows\"\r\n      :loading=\"loading\"\r\n      layout=\"stack\"\r\n      primary-column=\"username\"\r\n      operations-column=\"operations\"\r\n    >\r\n      <template #username=\"{ row }\">\r\n        <view class=\"agent-header\">\r\n          <text class=\"agent-name copyable\" @longpress=\"copyValue(row.username)\">{{ row.username }}</text>\r\n          <StatusTag :status=\"statusMap[row.status]\" :label=\"statusText[row.status]\" />\r\n        </view>\r\n      </template>\r\n      <template #status=\"{ row }\">\r\n        <StatusTag :status=\"statusMap[row.status]\" :label=\"statusText[row.status]\" />\r\n      </template>\r\n      <template #cardTypesDisplay=\"{ row }\">\r\n        <view v-if=\"row.cardTypes.length\" class=\"tag-list\">\r\n          <view v-for=\"item in row.cardTypes\" :key=\"item\" class=\"tag\">{{ item }}</view>\r\n        </view>\r\n        <text v-else class=\"placeholder\">默认全部</text>\r\n      </template>\r\n      <template #remark=\"{ row }\">\r\n        <text v-if=\"row.remark\" class=\"remark\">{{ row.remark }}</text>\r\n        <text v-else class=\"placeholder\">—</text>\r\n      </template>\r\n      <template #operations=\"{ row }\">\r\n        <view class=\"action-group\">\r\n          <button\r\n            class=\"action-btn\"\r\n            :disabled=\"loading || isActionBusy(row.username, 'enable')\"\r\n            @tap=\"toggleStatus(row, true)\"\r\n          >\r\n            {{ isActionBusy(row.username, 'enable') ? '处理中...' : '启用' }}\r\n          </button>\r\n          <button\r\n            class=\"action-btn warn\"\r\n            :disabled=\"loading || isActionBusy(row.username, 'disable')\"\r\n            @tap=\"toggleStatus(row, false)\"\r\n          >\r\n            {{ isActionBusy(row.username, 'disable') ? '处理中...' : '禁用' }}\r\n          </button>\r\n          <button\r\n            class=\"action-btn\"\r\n            :disabled=\"loading || isActionBusy(row.username, 'adjust')\"\r\n            @tap=\"openAdjust(row)\"\r\n          >\r\n            {{ isActionBusy(row.username, 'adjust') ? '处理中...' : '加款/加时' }}\r\n          </button>\r\n          <button\r\n            class=\"action-btn\"\r\n            :disabled=\"loading || isActionBusy(row.username, 'remark')\"\r\n            @tap=\"openRemark(row)\"\r\n          >\r\n            {{ isActionBusy(row.username, 'remark') ? '处理中...' : '备注' }}\r\n          </button>\r\n          <button\r\n            class=\"action-btn\"\r\n            :disabled=\"loading || isActionBusy(row.username, 'password')\"\r\n            @tap=\"openPassword(row)\"\r\n          >\r\n            {{ isActionBusy(row.username, 'password') ? '处理中...' : '重置密码' }}\r\n          </button>\r\n          <button\r\n            class=\"action-btn\"\r\n            :disabled=\"loading || isActionBusy(row.username, 'cardTypes')\"\r\n            @tap=\"openAssignCardTypes(row)\"\r\n          >\r\n            {{ isActionBusy(row.username, 'cardTypes') ? '处理中...' : '卡种配置' }}\r\n          </button>\r\n          <button\r\n            class=\"action-btn danger\"\r\n            :disabled=\"loading || isActionBusy(row.username, 'delete')\"\r\n            @tap=\"deleteAgent(row)\"\r\n          >\r\n            {{ isActionBusy(row.username, 'delete') ? '处理中...' : '删除' }}\r\n          </button>\r\n        </view>\r\n      </template>\r\n    </DataTable>\r\n\r\n    <view class=\"pagination glass-card\" v-if=\"totalPages > 1 || agentTotal\">\r\n      <view class=\"page-info\">第 {{ currentPage }} / {{ totalPages }} 页 · 共 {{ agentTotal }} 条</view>\r\n      <view class=\"page-actions\">\r\n        <button class=\"page-btn\" :disabled=\"currentPage <= 1 || loading\" @tap=\"changePage(currentPage - 1)\">上一页</button>\r\n        <button class=\"page-btn\" :disabled=\"currentPage >= totalPages || loading\" @tap=\"changePage(currentPage + 1)\">下一页</button>\r\n      </view>\r\n    </view>\r\n\r\n    <view v-if=\"showCreateAgentModal\" class=\"agent-create-modal\" @tap=\"closeCreateAgentModal\">\r\n      <view class=\"agent-create-panel glass-card\" @tap.stop=\"\">\r\n        <view class=\"agent-create-header\">\r\n          <text class=\"agent-create-title\">创建代理</text>\r\n          <button class=\"agent-create-close\" :disabled=\"creating\" @tap=\"closeCreateAgentModal\">关闭</button>\r\n        </view>\r\n        <view class=\"agent-create-body\">\r\n          <view class=\"agent-create-field\">\r\n            <text class=\"agent-create-label\">代理账号</text>\r\n            <input class=\"agent-create-input\" v-model=\"createAgentForm.username\" placeholder=\"请输入代理账号\" />\r\n          </view>\r\n          <view class=\"agent-create-field\">\r\n            <text class=\"agent-create-label\">初始密码</text>\r\n            <input class=\"agent-create-input\" password v-model=\"createAgentForm.password\" placeholder=\"请输入初始密码\" />\r\n          </view>\r\n          <view class=\"agent-create-grid\">\r\n            <view class=\"agent-create-field\">\r\n              <text class=\"agent-create-label\">初始余额(元)</text>\r\n              <input class=\"agent-create-input\" type=\"digit\" v-model=\"createAgentForm.balance\" placeholder=\"如 0\" />\r\n            </view>\r\n            <view class=\"agent-create-field\">\r\n              <text class=\"agent-create-label\">时间库存(小时)</text>\r\n              <input class=\"agent-create-input\" type=\"digit\" v-model=\"createAgentForm.timeStock\" placeholder=\"如 0\" />\r\n            </view>\r\n            <view class=\"agent-create-field\">\r\n              <text class=\"agent-create-label\">折扣(默认100)</text>\r\n              <input class=\"agent-create-input\" type=\"number\" v-model=\"createAgentForm.parities\" placeholder=\"100 表示不打折\" />\r\n            </view>\r\n          </view>\r\n          <view class=\"agent-create-field\">\r\n            <text class=\"agent-create-label\">备注信息</text>\r\n            <textarea\r\n              class=\"agent-create-textarea\"\r\n              v-model=\"createAgentForm.remark\"\r\n              placeholder=\"可填写备注，留空则不设置\"\r\n              auto-height\r\n            ></textarea>\r\n          </view>\r\n          <view class=\"agent-create-field\">\r\n            <text class=\"agent-create-label\">授权卡种</text>\r\n            <view class=\"agent-create-checkboxes\">\r\n              <text v-if=\"!cardTypeChoices.length\" class=\"agent-create-hint\">暂无卡种，可稍后在详情中配置</text>\r\n              <checkbox-group v-else :value=\"createAgentForm.cardTypes\" @change=\"onAgentCardTypesChange\">\r\n                <label v-for=\"item in cardTypeChoices\" :key=\"item.name\" class=\"agent-create-checkbox\">\r\n                  <checkbox :value=\"item.name\" />\r\n                  <text class=\"agent-create-checkbox-label\">{{ item.label }}</text>\r\n                </label>\r\n              </checkbox-group>\r\n            </view>\r\n          </view>\r\n        </view>\r\n        <view class=\"agent-create-actions\">\r\n          <button class=\"btn ghost\" :disabled=\"creating\" @tap=\"closeCreateAgentModal\">取消</button>\r\n          <button class=\"btn primary\" :disabled=\"creating\" @tap=\"submitCreateAgent\">\r\n            {{ creating ? '创建中...' : '确认创建' }}\r\n          </button>\r\n        </view>\r\n      </view>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { computed, onMounted, reactive, ref, watch } from 'vue';\r\nimport { storeToRefs } from 'pinia';\r\nimport DataTable from '@/components/DataTable.vue';\r\nimport StatusTag from '@/components/StatusTag.vue';\r\nimport SoftwarePicker from '@/components/SoftwarePicker.vue';\r\nimport { useAppStore } from '@/stores/app';\r\nimport { formatDurationFromSeconds } from '@/utils/time';\r\nimport type { CardTypeInfo } from '@/common/types';\r\n\r\ntype AgentRow = {\r\n  username: string;\r\n  status: 'enabled' | 'disabled';\r\n  balance: string;\r\n  timeStock: number;\r\n  parities: number;\r\n  totalParities: number;\r\n  remark: string;\r\n  cardTypes: string[];\r\n  cardTypesDisplay: string;\r\n};\r\n\r\ninterface PromptOptions {\r\n  title: string;\r\n  placeholder?: string;\r\n  defaultValue?: string;\r\n  optional?: boolean;\r\n}\r\n\r\nconst appStore = useAppStore();\r\nconst { agents, selectedSoftware, agentTotal, cardTypes } = storeToRefs(appStore);\r\nconst agentFilters = appStore.agentFilters;\r\n\r\nconst filtersForm = reactive({ keyword: '' });\r\nconst statusOptions = [\r\n  { label: '全部', value: 'all' },\r\n  { label: '启用', value: 'enabled' },\r\n  { label: '禁用', value: 'disabled' }\r\n];\r\nconst statusIndex = ref(0);\r\n\r\nconst pageSizeOptions = [20, 50, 100];\r\nconst pageSizeIndex = ref(1);\r\n\r\nconst loading = computed(() => appStore.loading.agents);\r\nconst statusLabels = computed(() => statusOptions.map((item) => item.label));\r\nconst pageSizeLabels = computed(() => pageSizeOptions.map((size) => `${size} 条/页`));\r\n\r\nconst actionState = reactive({ username: '', type: '' });\r\nconst creating = ref(false);\r\nconst showCreateAgentModal = ref(false);\r\nconst createAgentForm = reactive({\r\n  username: '',\r\n  password: '',\r\n  balance: '',\r\n  timeStock: '',\r\n  parities: '100',\r\n  remark: '',\r\n  cardTypes: [] as string[]\r\n});\r\nconst cardTypeChoices = computed(() => cardTypes.value.map((item) => ({\r\n  name: item.name,\r\n  label: formatAgentCardTypeLabel(item)\r\n})));\r\n\r\nconst rows = computed<AgentRow[]>(() => {\r\n  const statusValue = statusOptions[statusIndex.value]?.value ?? 'all';\r\n  return agents.value\r\n    .filter((item) => (statusValue === 'all' ? true : item.status === statusValue))\r\n    .map((item) => ({\r\n      username: item.username,\r\n      status: item.status,\r\n      balance: item.balance.toFixed(2),\r\n      timeStock: item.timeStock,\r\n      parities: item.parities,\r\n      totalParities: item.totalParities,\r\n      remark: item.remark ?? '',\r\n      cardTypes: item.cardTypes ?? [],\r\n      cardTypesDisplay: item.cardTypes && item.cardTypes.length ? item.cardTypes.join('、') : '默认全部'\r\n    }));\r\n});\r\n\r\nconst summaryText = computed(() => {\r\n  const total = agentTotal.value || 0;\r\n  const filtered = rows.value.length;\r\n  return filtered === total ? `共 ${total} 条记录` : `共 ${total} 条记录 · 当前筛选 ${filtered} 条`;\r\n});\r\n\r\nconst columns = [\r\n  { key: 'username', label: '代理账号', style: 'min-width:200rpx' },\r\n  { key: 'status', label: '状态', style: 'min-width:160rpx' },\r\n  { key: 'balance', label: '余额(元)', style: 'min-width:160rpx' },\r\n  { key: 'timeStock', label: '时间库存(小时)', style: 'min-width:220rpx' },\r\n  { key: 'parities', label: '剩余授权', style: 'min-width:180rpx' },\r\n  { key: 'totalParities', label: '累计授权', style: 'min-width:200rpx' },\r\n  { key: 'cardTypesDisplay', label: '可售卡种', style: 'min-width:240rpx' },\r\n  { key: 'remark', label: '备注信息', style: 'min-width:240rpx' },\r\n  { key: 'operations', label: '操作', style: 'min-width:360rpx' }\r\n];\r\n\r\nconst currentPage = computed(() => agentFilters.page ?? 1);\r\nconst pageSize = computed(() => agentFilters.limit ?? pageSizeOptions[pageSizeIndex.value] ?? 50);\r\nconst totalPages = computed(() => {\r\n  const size = pageSize.value || 1;\r\n  return Math.max(1, Math.ceil((agentTotal.value || 0) / size));\r\n});\r\n\r\nconst statusText = {\r\n  enabled: '启用',\r\n  disabled: '禁用'\r\n} as const;\r\n\r\nconst statusMap = {\r\n  enabled: 'success',\r\n  disabled: 'warning'\r\n} as const;\r\n\r\nfunction formatAgentCardTypeLabel(type: CardTypeInfo): string {\r\n  const durationText = formatDurationFromSeconds(type.duration);\r\n  return durationText ? `${type.name}（${durationText}）` : type.name;\r\n}\r\n\r\nfunction resetCreateAgentForm() {\r\n  createAgentForm.username = '';\r\n  createAgentForm.password = '';\r\n  createAgentForm.balance = '0';\r\n  createAgentForm.timeStock = '0';\r\n  createAgentForm.parities = '100';\r\n  createAgentForm.remark = '';\r\n  createAgentForm.cardTypes = [];\r\n}\r\n\r\nfunction closeCreateAgentModal() {\r\n  if (creating.value) return;\r\n  showCreateAgentModal.value = false;\r\n  resetCreateAgentForm();\r\n}\r\n\r\nfunction onAgentCardTypesChange(event: UniApp.CheckboxGroupChangeEvent) {\r\n  const values = Array.isArray(event.detail.value) ? (event.detail.value as string[]) : [];\r\n  createAgentForm.cardTypes = Array.from(new Set(values));\r\n}\r\nfunction isActionBusy(username: string, type: string) {\r\n  return actionState.username === username && actionState.type === type;\r\n}\r\n\r\nfunction setActionBusy(username: string, type: string) {\r\n  actionState.username = username;\r\n  actionState.type = type;\r\n}\r\n\r\nfunction clearActionBusy() {\r\n  actionState.username = '';\r\n  actionState.type = '';\r\n}\r\n\r\nasync function promptInput(options: PromptOptions) {\r\n  const { title, placeholder = '', defaultValue = '', optional = false } = options;\r\n  const result = await new Promise<UniApp.ShowModalRes>((resolve) => {\r\n    uni.showModal({\r\n      title,\r\n      content: defaultValue,\r\n      editable: true,\r\n      placeholderText: placeholder,\r\n      confirmText: '确定',\r\n      cancelText: optional ? '跳过' : '取消',\r\n      success: resolve,\r\n      fail: () => resolve({ confirm: false, cancel: true } as UniApp.ShowModalRes)\r\n    });\r\n  });\r\n  if (!result.confirm) {\r\n    return optional ? '' : null;\r\n  }\r\n  return (result.content ?? '').trim();\r\n}\r\n\r\nfunction syncFiltersFromStore() {\r\n  filtersForm.keyword = agentFilters.keyword ?? '';\r\n  const sizeIdx = pageSizeOptions.findIndex((value) => value === (agentFilters.limit ?? 50));\r\n  pageSizeIndex.value = sizeIdx >= 0 ? sizeIdx : 1;\r\n}\r\n\r\nasync function searchAgents() {\r\n  try {\r\n    await appStore.loadAgents({\r\n      keyword: filtersForm.keyword.trim(),\r\n      page: 1,\r\n      limit: pageSizeOptions[pageSizeIndex.value] ?? agentFilters.limit\r\n    });\r\n    uni.showToast({ title: '查询完成', icon: 'success' });\r\n  } catch (error) {\r\n    uni.__f__('error','at pages/agents/index.vue:391','searchAgents error', error);\r\n    uni.showToast({ title: '查询失败', icon: 'none' });\r\n  }\r\n}\r\n\r\nasync function resetFilters() {\r\n  filtersForm.keyword = '';\r\n  statusIndex.value = 0;\r\n  pageSizeIndex.value = pageSizeOptions.indexOf(50) >= 0 ? pageSizeOptions.indexOf(50) : 0;\r\n  await searchAgents();\r\n}\r\n\r\nasync function refreshList() {\r\n  try {\r\n    await appStore.loadAgents({\r\n      page: agentFilters.page,\r\n      limit: agentFilters.limit,\r\n      keyword: agentFilters.keyword\r\n    });\r\n    uni.showToast({ title: '已刷新', icon: 'none' });\r\n  } catch (error) {\r\n    uni.__f__('error','at pages/agents/index.vue:412','refreshList error', error);\r\n  }\r\n}\r\n\r\nasync function changePage(page: number) {\r\n  if (page < 1 || page > totalPages.value) return;\r\n  try {\r\n    await appStore.loadAgents({ page });\r\n  } catch (error) {\r\n    uni.__f__('error','at pages/agents/index.vue:421','changePage error', error);\r\n  }\r\n}\r\n\r\nasync function onPageSizeChange(event: UniApp.PickerChangeEvent) {\r\n  const index = Number(event.detail.value);\r\n  pageSizeIndex.value = index;\r\n  const size = pageSizeOptions[index] ?? 50;\r\n  try {\r\n    await appStore.loadAgents({ limit: size, page: 1, keyword: filtersForm.keyword.trim() });\r\n  } catch (error) {\r\n    uni.__f__('error','at pages/agents/index.vue:432','onPageSizeChange error', error);\r\n  }\r\n}\r\n\r\nfunction onStatusChange(event: UniApp.PickerChangeEvent) {\r\n  statusIndex.value = Number(event.detail.value);\r\n}\r\n\r\nfunction confirmAction(message: string) {\r\n  return new Promise<boolean>((resolve) => {\r\n    uni.showModal({\r\n      title: '确认操作',\r\n      content: message,\r\n      confirmText: '确定',\r\n      cancelText: '取消',\r\n      success: (result) => resolve(!!result.confirm),\r\n      fail: () => resolve(false)\r\n    });\r\n  });\r\n}\r\n\r\nfunction copyValue(value?: string) {\r\n  const text = (value ?? '').toString().trim();\r\n  if (!text) {\r\n    uni.showToast({ title: '无可复制内容', icon: 'none' });\r\n    return;\r\n  }\r\n  uni.setClipboardData({\r\n    data: text,\r\n    success: () => uni.showToast({ title: '已复制', icon: 'success', duration: 800 })\r\n  });\r\n}\r\n\r\nasync function toggleStatus(row: AgentRow, enable: boolean) {\r\n  const label = enable ? '启用' : '禁用';\r\n  const confirmed = await confirmAction(`确认${label}代理：${row.username}？`);\r\n  if (!confirmed) return;\r\n  setActionBusy(row.username, enable ? 'enable' : 'disable');\r\n  try {\r\n    const message = await appStore.toggleAgentStatus({ usernames: [row.username], enable });\r\n    uni.showToast({ title: message || `${label}成功`, icon: 'success' });\r\n  } catch (error) {\r\n    uni.__f__('error','at pages/agents/index.vue:474','toggleStatus error', error);\r\n    uni.showToast({ title: `${label}失败`, icon: 'none' });\r\n  } finally {\r\n    clearActionBusy();\r\n  }\r\n}\r\n\r\nasync function openAdjust(row: AgentRow) {\r\n  const balanceInput = await promptInput({ title: '加款金额 (元)', placeholder: '可填写正负数', defaultValue: '0' });\r\n  if (balanceInput === null) return;\r\n  const timeInput = await promptInput({ title: '加时长 (小时)', placeholder: '可填写正负数', defaultValue: '0' });\r\n  if (timeInput === null) return;\r\n  const balance = parseFloat(balanceInput) || 0;\r\n  const timeStock = parseFloat(timeInput) || 0;\r\n  if (!balance && !timeStock) {\r\n    uni.showToast({ title: '请至少输入一项调整数值', icon: 'none' });\r\n    return;\r\n  }\r\n  setActionBusy(row.username, 'adjust');\r\n  try {\r\n    const message = await appStore.adjustAgentBalance({ username: row.username, balance, timeStock });\r\n    uni.showToast({ title: message || '调整成功', icon: 'success' });\r\n  } catch (error) {\r\n    uni.__f__('error','at pages/agents/index.vue:497','openAdjust error', error);\r\n    uni.showToast({ title: '调整失败', icon: 'none' });\r\n  } finally {\r\n    clearActionBusy();\r\n  }\r\n}\r\n\r\nasync function openRemark(row: AgentRow) {\r\n  const remarkInput = await promptInput({ title: '修改备注', placeholder: '请输入备注内容', defaultValue: row.remark, optional: true });\r\n  if (remarkInput === null) return;\r\n  setActionBusy(row.username, 'remark');\r\n  try {\r\n    const message = await appStore.updateAgentRemark({ username: row.username, remark: remarkInput });\r\n    uni.showToast({ title: message || '备注已更新', icon: 'success' });\r\n  } catch (error) {\r\n    uni.__f__('error','at pages/agents/index.vue:512','openRemark error', error);\r\n    uni.showToast({ title: '备注更新失败', icon: 'none' });\r\n  } finally {\r\n    clearActionBusy();\r\n  }\r\n}\r\n\r\nasync function openPassword(row: AgentRow) {\r\n  const passwordInput = await promptInput({ title: '重置密码', placeholder: '请输入新的登录密码' });\r\n  if (passwordInput === null) return;\r\n  if (!passwordInput) {\r\n    uni.showToast({ title: '密码不能为空', icon: 'none' });\r\n    return;\r\n  }\r\n  setActionBusy(row.username, 'password');\r\n  try {\r\n    const message = await appStore.updateAgentPassword({ username: row.username, password: passwordInput });\r\n    uni.showToast({ title: message || '密码已重置', icon: 'success' });\r\n  } catch (error) {\r\n    uni.__f__('error','at pages/agents/index.vue:531','openPassword error', error);\r\n    uni.showToast({ title: '密码重置失败', icon: 'none' });\r\n  } finally {\r\n    clearActionBusy();\r\n  }\r\n}\r\n\r\nasync function openAssignCardTypes(row: AgentRow) {\r\n  try {\r\n    if (!cardTypes.value.length) {\r\n      await appStore.loadCardTypes();\r\n    }\r\n  } catch (error) {\r\n    uni.__f__('error','at pages/agents/index.vue:544','loadCardTypes error', error);\r\n  }\r\n  const candidates = cardTypes.value.map((item) => item.name);\r\n  const hint = candidates.length ? `可选：${candidates.slice(0, 6).join('、')}` : '请输入卡种名称，逗号分隔';\r\n  const input = await promptInput({\r\n    title: '配置授权卡种',\r\n    placeholder: hint,\r\n    defaultValue: row.cardTypes.join(','),\r\n    optional: true\r\n  });\r\n  if (input === null) return;\r\n  const cardTypeList = input\r\n    ? input\r\n        .split(/[，,\\s]+/)\r\n        .map((item) => item.trim())\r\n        .filter((item) => item.length > 0)\r\n    : [];\r\n  setActionBusy(row.username, 'cardTypes');\r\n  try {\r\n    const message = await appStore.assignAgentCardTypes({ username: row.username, cardTypes: cardTypeList });\r\n    uni.showToast({ title: message || '卡种配置成功', icon: 'success' });\r\n  } catch (error) {\r\n    uni.__f__('error','at pages/agents/index.vue:566','openAssignCardTypes error', error);\r\n    uni.showToast({ title: '卡种配置失败', icon: 'none' });\r\n  } finally {\r\n    clearActionBusy();\r\n  }\r\n}\r\n\r\nasync function deleteAgent(row: AgentRow) {\r\n  const confirmed = await confirmAction(`确认删除代理：${row.username}？此操作不可恢复。`);\r\n  if (!confirmed) return;\r\n  setActionBusy(row.username, 'delete');\r\n  try {\r\n    const message = await appStore.deleteAgents([row.username]);\r\n    uni.showToast({ title: message || '已删除', icon: 'success' });\r\n  } catch (error) {\r\n    uni.__f__('error','at pages/agents/index.vue:581','deleteAgent error', error);\r\n    uni.showToast({ title: '删除失败', icon: 'none' });\r\n  } finally {\r\n    clearActionBusy();\r\n  }\r\n}\r\n\r\nasync function openCreateAgent() {\r\n  await appStore.ensureReady();\r\n  if (!selectedSoftware.value) {\r\n    uni.showToast({ title: '请先选择软件位', icon: 'none' });\r\n    return;\r\n  }\r\n\r\n  try {\r\n    if (!cardTypes.value.length) {\r\n      await appStore.loadCardTypes();\r\n    }\r\n  } catch (error) {\r\n    uni.__f__('error','at pages/agents/index.vue:600','loadCardTypes error', error);\r\n  }\r\n\r\n  resetCreateAgentForm();\r\n  showCreateAgentModal.value = true;\r\n}\r\n\r\nasync function submitCreateAgent() {\r\n  if (creating.value) return;\r\n\r\n  const username = createAgentForm.username.trim();\r\n  if (!username) {\r\n    uni.showToast({ title: '账号不能为空', icon: 'none' });\r\n    return;\r\n  }\r\n\r\n  const password = createAgentForm.password.trim();\r\n  if (!password) {\r\n    uni.showToast({ title: '密码不能为空', icon: 'none' });\r\n    return;\r\n  }\r\n\r\n  const balance = parseFloat(createAgentForm.balance || '0') || 0;\r\n  const timeStock = parseFloat(createAgentForm.timeStock || '0') || 0;\r\n  const parities = Math.max(0, parseFloat(createAgentForm.parities || '100') || 100);\r\n  const remarks = createAgentForm.remark.trim();\r\n  const cardTypeList = createAgentForm.cardTypes.slice();\r\n\r\n  creating.value = true;\r\n  try {\r\n    const message = await appStore.createAgent({\r\n      username,\r\n      password,\r\n      balance,\r\n      timeStock,\r\n      parities,\r\n      totalParities: parities,\r\n      remarks,\r\n      cardTypes: cardTypeList\r\n    });\r\n    uni.showToast({ title: message || '创建成功', icon: 'success' });\r\n    showCreateAgentModal.value = false;\r\n    resetCreateAgentForm();\r\n  } catch (error) {\r\n    uni.__f__('error','at pages/agents/index.vue:644','submitCreateAgent error', error);\r\n    uni.showToast({ title: '创建失败', icon: 'none' });\r\n  } finally {\r\n    creating.value = false;\r\n  }\r\n}\r\n\r\nwatch(\r\n  () => [agentFilters.keyword, agentFilters.limit],\r\n  () => {\r\n    syncFiltersFromStore();\r\n  },\r\n  { immediate: true }\r\n);\r\n\r\nwatch(\r\n  () => cardTypeChoices.value,\r\n  (next) => {\r\n    const available = new Set(next.map((item) => item.name));\r\n    createAgentForm.cardTypes = createAgentForm.cardTypes.filter((name) => available.has(name));\r\n  },\r\n  { immediate: true }\r\n);\r\n\r\nonMounted(async () => {\r\n  await appStore.ensureReady();\r\n  try {\r\n    await appStore.loadAgents();\r\n  } catch (error) {\r\n    uni.__f__('error','at pages/agents/index.vue:673','agents/onMounted error', error);\r\n  }\r\n  syncFiltersFromStore();\r\n});\r\n\r\nwatch(\r\n  () => selectedSoftware.value,\r\n  async (next, prev) => {\r\n    if (!next || next === prev) return;\r\n    filtersForm.keyword = '';\r\n    statusIndex.value = 0;\r\n    pageSizeIndex.value = pageSizeOptions.indexOf(50) >= 0 ? pageSizeOptions.indexOf(50) : 0;\r\n    try {\r\n      await appStore.loadAgents({ page: 1, keyword: '', limit: pageSizeOptions[pageSizeIndex.value] });\r\n    } catch (error) {\r\n      uni.__f__('error','at pages/agents/index.vue:688','selectedSoftware change error', error);\r\n    }\r\n    syncFiltersFromStore();\r\n  }\r\n);\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.page {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 32rpx;\r\n  padding: 36rpx 28rpx 72rpx;\r\n}\r\n\r\n.header {\r\n  padding: 32rpx;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 18rpx;\r\n\r\n  @media (min-width: 768px) {\r\n    flex-direction: row;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n  }\r\n}\r\n\r\n.header-main {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 8rpx;\r\n}\r\n\r\n.title {\r\n  font-size: 42rpx;\r\n  font-weight: 600;\r\n  color: #f8fafc;\r\n  color: var(--text-primary);\r\n}\r\n\r\n.subtitle {\r\n  font-size: 26rpx;\r\n  color: rgba(148, 163, 184, 0.75);\r\n  color: var(--text-muted);\r\n}\r\n\r\n.header-actions {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 16rpx;\r\n  align-items: center;\r\n}\r\n\r\n.btn {\r\n  padding: 16rpx 32rpx;\r\n  border-radius: 999rpx;\r\n  border: none;\r\n  font-size: 26rpx;\r\n  font-weight: 600;\r\n}\r\n\r\n.btn.primary {\r\n  background: linear-gradient(135deg, rgba(56, 189, 248, 0.85), rgba(99, 102, 241, 0.85));\r\n  background: var(--accent-gradient);\r\n  color: #04101c;\r\n}\r\n\r\n.btn.ghost {\r\n  background: transparent;\r\n  border: 1rpx solid rgba(148, 163, 184, 0.24);\r\n  border: 1rpx solid var(--outline-color);\r\n  color: rgba(148, 163, 184, 0.75);\r\n  color: var(--text-muted);\r\n}\r\n\r\n.btn:disabled {\r\n  opacity: 0.6;\r\n}\r\n\r\n.filters {\r\n  padding: 32rpx;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 24rpx;\r\n}\r\n\r\n.filters-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(240rpx, 1fr));\r\n  gap: 20rpx;\r\n}\r\n\r\n.field {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 12rpx;\r\n}\r\n\r\n.keyword-field {\r\n  grid-column: 1 / -1;\r\n}\r\n\r\n.label {\r\n  font-size: 24rpx;\r\n  color: rgba(148, 163, 184, 0.75);\r\n  color: var(--text-muted);\r\n}\r\n\r\n.input,\r\n.picker-display {\r\n  width: 100%;\r\n  padding: 20rpx 24rpx;\r\n  border-radius: 18rpx;\r\n  background: rgba(12, 19, 33, 0.55);\r\n  background: var(--surface-light);\r\n  border: 1rpx solid rgba(148, 163, 184, 0.24);\r\n  border: 1rpx solid var(--outline-color);\r\n  color: #f8fafc;\r\n  color: var(--text-primary);\r\n  font-size: 26rpx;\r\n}\r\n\r\n.picker-display {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n}\r\n\r\n.filter-actions {\r\n  display: flex;\r\n  gap: 16rpx;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.tag-list {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 10rpx;\r\n}\r\n\r\n.tag {\r\n  padding: 8rpx 14rpx;\r\n  border-radius: 12rpx;\r\n  background: rgba(12, 19, 33, 0.55);\r\n  background: var(--surface-light);\r\n  border: 1rpx solid rgba(148, 163, 184, 0.24);\r\n  border: 1rpx solid var(--outline-color);\r\n  font-size: 24rpx;\r\n  color: #f8fafc;\r\n  color: var(--text-primary);\r\n}\r\n\r\n.placeholder {\r\n  font-size: 24rpx;\r\n  color: rgba(148, 163, 184, 0.75);\r\n  color: var(--text-muted);\r\n}\r\n\r\n.agent-header {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12rpx;\r\n  min-width: 0;\r\n}\r\n\r\n.agent-name {\r\n  font-size: 28rpx;\r\n  font-weight: 600;\r\n  color: #f8fafc;\r\n  color: var(--text-primary);\r\n  max-width: 100%;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n}\r\n\r\n.remark {\r\n  font-size: 24rpx;\r\n  color: #f8fafc;\r\n  color: var(--text-primary);\r\n  line-height: 1.5;\r\n}\r\n\r\n.action-group {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 12rpx;\r\n}\r\n\r\n.action-btn {\r\n  padding: 12rpx 22rpx;\r\n  border-radius: 12rpx;\r\n  border: 1rpx solid rgba(148, 163, 184, 0.24);\r\n  border: 1rpx solid var(--outline-color);\r\n  background: rgba(12, 19, 33, 0.55);\r\n  background: var(--surface-light);\r\n  color: #f8fafc;\r\n  color: var(--text-primary);\r\n  font-size: 24rpx;\r\n}\r\n\r\n.action-btn.warn {\r\n  border-color: rgba(248, 113, 113, 0.45);\r\n  background: rgba(248, 113, 113, 0.12);\r\n  color: #f87171;\r\n  color: var(--danger-color);\r\n}\r\n\r\n.action-btn.danger {\r\n  border-color: rgba(239, 68, 68, 0.45);\r\n  background: rgba(239, 68, 68, 0.12);\r\n  color: #f87171;\r\n  color: var(--danger-color);\r\n}\r\n\r\n.pagination {\r\n  padding: 26rpx 32rpx;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 18rpx;\r\n\r\n  @media (min-width: 768px) {\r\n    flex-direction: row;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n  }\r\n}\r\n\r\n.page-info {\r\n  font-size: 26rpx;\r\n  color: #f8fafc;\r\n  color: var(--text-primary);\r\n}\r\n\r\n.page-actions {\r\n  display: flex;\r\n  gap: 16rpx;\r\n}\r\n\r\n.page-btn {\r\n  padding: 16rpx 36rpx;\r\n  border-radius: 999rpx;\r\n  border: 1rpx solid rgba(148, 163, 184, 0.24);\r\n  border: 1rpx solid var(--outline-color);\r\n  background: transparent;\r\n  color: #f8fafc;\r\n  color: var(--text-primary);\r\n  font-size: 24rpx;\r\n}\r\n\r\n.agent-create-modal {\r\n  position: fixed;\r\n  inset: 0;\r\n  background: rgba(5, 7, 15, 0.65);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 40rpx;\r\n  z-index: 998;\r\n}\r\n\r\n.agent-create-panel {\r\n  width: 100%;\r\n  max-width: 700rpx;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 24rpx;\r\n}\r\n\r\n.agent-create-header {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n}\r\n\r\n.agent-create-title {\r\n  font-size: 32rpx;\r\n  font-weight: 600;\r\n  color: #f8fafc;\r\n  color: var(--text-primary);\r\n}\r\n\r\n.agent-create-close {\r\n  padding: 10rpx 22rpx;\r\n  border-radius: 999rpx;\r\n  border: 1rpx solid rgba(148, 163, 184, 0.24);\r\n  border: 1rpx solid var(--outline-color);\r\n  background: transparent;\r\n  color: rgba(148, 163, 184, 0.75);\r\n  color: var(--text-muted);\r\n  font-size: 24rpx;\r\n}\r\n\r\n.agent-create-body {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 20rpx;\r\n}\r\n\r\n.agent-create-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(200rpx, 1fr));\r\n  gap: 16rpx;\r\n}\r\n\r\n.agent-create-field {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 12rpx;\r\n}\r\n\r\n.agent-create-label {\r\n  font-size: 26rpx;\r\n  color: rgba(226, 232, 240, 0.78);\r\n  color: var(--text-secondary);\r\n}\r\n\r\n.agent-create-input {\r\n  padding: 16rpx 22rpx;\r\n  border-radius: 14rpx;\r\n  border: 1rpx solid rgba(148, 163, 184, 0.24);\r\n  border: 1rpx solid var(--outline-color);\r\n  background: rgba(12, 19, 33, 0.55);\r\n  background: var(--surface-light);\r\n  color: #f8fafc;\r\n  color: var(--text-primary);\r\n  font-size: 26rpx;\r\n}\r\n\r\n.agent-create-textarea {\r\n  padding: 16rpx 22rpx;\r\n  border-radius: 14rpx;\r\n  border: 1rpx solid rgba(148, 163, 184, 0.24);\r\n  border: 1rpx solid var(--outline-color);\r\n  background: rgba(12, 19, 33, 0.55);\r\n  background: var(--surface-light);\r\n  color: #f8fafc;\r\n  color: var(--text-primary);\r\n  font-size: 26rpx;\r\n  min-height: 120rpx;\r\n}\r\n\r\n.agent-create-checkboxes {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 16rpx;\r\n}\r\n\r\n.agent-create-hint {\r\n  font-size: 24rpx;\r\n  color: rgba(148, 163, 184, 0.75);\r\n  color: var(--text-muted);\r\n}\r\n\r\n.agent-create-checkbox {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12rpx;\r\n  padding: 12rpx 16rpx;\r\n  border-radius: 12rpx;\r\n  background: rgba(12, 19, 33, 0.55);\r\n  background: var(--surface-light);\r\n  border: 1rpx solid rgba(148, 163, 184, 0.24);\r\n  border: 1rpx solid var(--outline-color);\r\n}\r\n\r\n.agent-create-checkbox-label {\r\n  font-size: 24rpx;\r\n  color: #f8fafc;\r\n  color: var(--text-primary);\r\n}\r\n\r\n.agent-create-actions {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 16rpx;\r\n}\r\n</style>","import MiniProgramPage from 'C:/Users/Administrator/source/repos/wwwskbjxyz/SPTEST-V1/SProtectAgentWeb.Api/wwwroot/uniapp/pages/agents/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["useAppStore","storeToRefs","reactive","ref","computed","formatDurationFromSeconds","uni","watch","onMounted"],"mappings":"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"}
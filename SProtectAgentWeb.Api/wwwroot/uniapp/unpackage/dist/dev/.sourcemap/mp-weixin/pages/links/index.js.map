{"version":3,"file":"index.js","sources":["pages/links/index.vue","E:/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbGlua3MvaW5kZXgudnVl"],"sourcesContent":["<template>\r\n  <view class=\"page\">\r\n    <view class=\"header glass-card\">\r\n      <view>\r\n        <text class=\"title\">联动记录</text>\r\n        <text class=\"subtitle\">查看蓝奏云链接抓取与分发日志</text>\r\n      </view>\r\n      <view class=\"header-actions\">\r\n        <SoftwarePicker />\r\n        <button class=\"header-btn\" @tap=\"createLink\">新建联动</button>\r\n      </view>\r\n    </view>\r\n\r\n    <DataTable\r\n      title=\"蓝奏云记录\"\r\n      subtitle=\"包含链接、提取码及创建时间\"\r\n      :columns=\"columns\"\r\n      :rows=\"rows\"\r\n      :loading=\"loading\"\r\n    >\r\n      <template #url=\"{ row }\">\r\n        <view class=\"link-url\" @tap=\"copy(row.url)\">{{ row.url }}</view>\r\n      </template>\r\n      <template #content=\"{ row }\">\r\n        <view class=\"link-content\">{{ row.content || '—' }}</view>\r\n      </template>\r\n    </DataTable>\r\n  </view>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { computed, onMounted, watch } from 'vue';\r\nimport { storeToRefs } from 'pinia';\r\nimport DataTable from '@/components/DataTable.vue';\r\nimport SoftwarePicker from '@/components/SoftwarePicker.vue';\r\nimport { useAppStore } from '@/stores/app';\r\n\r\nconst appStore = useAppStore();\r\nconst { linkRecords, selectedSoftware } = storeToRefs(appStore);\r\n\r\nconst columns = [\r\n  { key: 'id', label: '编号', style: 'min-width:140rpx' },\r\n  { key: 'url', label: '蓝奏云链接', style: 'min-width:260rpx' },\r\n  { key: 'extractionCode', label: '提取码', style: 'min-width:140rpx' },\r\n  { key: 'createdAt', label: '抓取时间', style: 'min-width:200rpx' },\r\n  { key: 'content', label: '备注信息', style: 'min-width:240rpx' }\r\n];\r\n\r\nconst rows = computed(() =>\r\n  linkRecords.value.map((item) => ({\r\n    id: item.id,\r\n    url: item.url,\r\n    extractionCode: item.extractionCode || '—',\r\n    createdAt: item.createdAt,\r\n    content: item.content || ''\r\n  }))\r\n);\r\n\r\nconst loading = computed(() => appStore.loading.links);\r\n\r\nonMounted(async () => {\r\n  await appStore.ensureReady();\r\n  await appStore.loadLinkRecords();\r\n});\r\n\r\nwatch(\r\n  () => selectedSoftware.value,\r\n  (next, prev) => {\r\n    if (!next || next === prev) return;\r\n    appStore.loadLinkRecords();\r\n  }\r\n);\r\n\r\nfunction createLink() {\r\n  uni.showToast({ title: '请接入联动创建接口', icon: 'none' });\r\n}\r\n\r\nfunction copy(text: string) {\r\n  uni.setClipboardData({ data: text, success: () => uni.showToast({ title: '链接已复制', icon: 'success' }) });\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.page {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 32rpx;\r\n  padding: 40rpx 28rpx 80rpx;\r\n}\r\n\r\n.header {\r\n  padding: 32rpx;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 16rpx;\r\n\r\n  @media (min-width: 768px) {\r\n    flex-direction: row;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n  }\r\n}\r\n\r\n.title {\r\n  font-size: 42rpx;\r\n  font-weight: 600;\r\n  color: var(--text-primary);\r\n}\r\n\r\n.subtitle {\r\n  font-size: 26rpx;\r\n  color: var(--text-muted);\r\n}\r\n\r\n.header-actions {\r\n  display: flex;\r\n  align-items: center;\r\n  flex-wrap: wrap;\r\n  gap: 16rpx;\r\n}\r\n\r\n.header-btn {\r\n  padding: 16rpx 30rpx;\r\n  border-radius: 999rpx;\r\n  background: var(--accent-gradient);\r\n  color: #04101c;\r\n  border: none;\r\n  font-size: 26rpx;\r\n  font-weight: 600;\r\n}\r\n\r\n.header-btn:disabled {\r\n  opacity: 0.65;\r\n}\r\n\r\n.link-url {\r\n  color: var(--text-primary);\r\n  font-size: 24rpx;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n}\r\n\r\n.link-content {\r\n  color: var(--text-muted);\r\n  font-size: 24rpx;\r\n}\r\n</style>","import MiniProgramPage from 'C:/Users/Administrator/source/repos/wwwskbjxyz/SPTEST-V1/SProtectAgentWeb.Api/wwwroot/uniapp/pages/links/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["useAppStore","storeToRefs","computed","onMounted","watch","uni"],"mappings":";;;;;;AAiCA,MAAA,YAAsB,MAAA;AACtB,MAAA,iBAA2B,MAAA;;;;AAG3B,UAAM,WAAWA,WAAAA;AACjB,UAAM,EAAE,aAAa,iBAAiB,IAAIC,0BAAY,QAAQ;AAE9D,UAAM,UAAU;AAAA,MACd,EAAE,KAAK,MAAM,OAAO,MAAM,OAAO,mBAAmB;AAAA,MACpD,EAAE,KAAK,OAAO,OAAO,SAAS,OAAO,mBAAmB;AAAA,MACxD,EAAE,KAAK,kBAAkB,OAAO,OAAO,OAAO,mBAAmB;AAAA,MACjE,EAAE,KAAK,aAAa,OAAO,QAAQ,OAAO,mBAAmB;AAAA,MAC7D,EAAE,KAAK,WAAW,OAAO,QAAQ,OAAO,mBAAmB;AAAA,IAAA;AAG7D,UAAM,OAAOC,cAAA;AAAA,MAAS,MACpB,YAAY,MAAM,IAAI,CAAC,UAAU;AAAA,QAC/B,IAAI,KAAK;AAAA,QACT,KAAK,KAAK;AAAA,QACV,gBAAgB,KAAK,kBAAkB;AAAA,QACvC,WAAW,KAAK;AAAA,QAChB,SAAS,KAAK,WAAW;AAAA,MAAA,EACzB;AAAA,IAAA;AAGJ,UAAM,UAAUA,cAAAA,SAAS,MAAM,SAAS,QAAQ,KAAK;AAErDC,kBAAAA,UAAU,YAAY;AACpB,YAAM,SAAS;AACf,YAAM,SAAS;IAAgB,CAChC;AAEDC,kBAAA;AAAA,MACE,MAAM,iBAAiB;AAAA,MACvB,CAAC,MAAM,SAAS;AACV,YAAA,CAAC,QAAQ,SAAS;AAAM;AAC5B,iBAAS,gBAAgB;AAAA,MAC3B;AAAA,IAAA;AAGF,aAAS,aAAa;AACpBC,oBAAA,MAAI,UAAU,EAAE,OAAO,aAAa,MAAM,QAAQ;AAAA,IACpD;AAEA,aAAS,KAAK,MAAc;AAC1BA,oBAAA,MAAI,iBAAiB,EAAE,MAAM,MAAM,SAAS,MAAMA,cAAA,MAAI,UAAU,EAAE,OAAO,SAAS,MAAM,UAAW,CAAA,EAAG,CAAA;AAAA,IACxG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9EA,GAAG,WAAW,eAAe;"}
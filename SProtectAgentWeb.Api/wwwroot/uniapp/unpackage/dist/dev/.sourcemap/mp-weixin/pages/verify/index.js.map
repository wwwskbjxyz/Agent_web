{"version":3,"file":"index.js","sources":["pages/verify/index.vue","E:/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvdmVyaWZ5L2luZGV4LnZ1ZQ"],"sourcesContent":["<template>\r\n  <view class=\"page\">\r\n    <view class=\"header glass-card\">\r\n      <view>\r\n        <text class=\"title\">卡密验证与资源下载</text>\r\n        <text class=\"subtitle\">输入卡密后自动校验授权状态并生成下载链接</text>\r\n      </view>\r\n    </view>\r\n\r\n    <view class=\"context-card glass-card\">\r\n      <view class=\"context-header\">\r\n        <text class=\"context-label\">当前软件位</text>\r\n        <text class=\"context-value\">{{ contextLabel }}</text>\r\n      </view>\r\n      <view v-if=\"contextCodeLabel\" class=\"context-sub\">绑定码：{{ contextCodeLabel }}</view>\r\n      <view v-if=\"contextAgentLabel\" class=\"context-sub\">所属代理：{{ contextAgentLabel }}</view>\r\n      <view v-if=\"shareContextError\" class=\"context-sub error\">{{ shareContextError }}</view>\r\n      <view v-if=\"!shareContextError && showShareInfo\" class=\"context-share\">\r\n        <text class=\"share-label\">{{ shareLabel }}</text>\r\n        <view class=\"share-row\">\r\n          <text class=\"share-url\" @tap=\"copyShareLink\">{{ shareDisplayValue }}</text>\r\n          <button class=\"share-btn\" @tap=\"copyShareLink\">复制</button>\r\n          <button v-if=\"isMiniProgram\" class=\"share-btn ghost\" @tap=\"openSharePage\">打开</button>\r\n        </view>\r\n        <text class=\"share-hint\">{{ shareHint }}</text>\r\n      </view>\r\n    </view>\r\n\r\n    <view v-if=\"isGeneratorMode\" class=\"generator-card glass-card\">\r\n      <text class=\"section-title\">生成分享链接</text>\r\n      <view class=\"field\">\r\n        <text class=\"field-label\">绑定的软件码</text>\r\n        <picker mode=\"selector\" :range=\"bindingOptions\" range-key=\"label\" @change=\"handleBindingChange\">\r\n          <view class=\"picker-value\">{{ currentBindingLabel }}</view>\r\n        </picker>\r\n      </view>\r\n      <view class=\"field\">\r\n        <text class=\"field-label\">软件位</text>\r\n        <picker mode=\"selector\" :range=\"softwareOptions\" range-key=\"label\" @change=\"handleSoftwareChange\">\r\n          <view class=\"picker-value\">{{ currentSoftwareLabel }}</view>\r\n        </picker>\r\n      </view>\r\n      <view class=\"generator-actions\">\r\n        <button class=\"secondary\" :disabled=\"!generatorContext\" @tap=\"generateShareLink\">\r\n          生成分享{{ isH5 ? '链接' : '路径' }}\r\n        </button>\r\n        <button\r\n          v-if=\"showShareInfo && shareOriginIsGenerated\"\r\n          class=\"secondary ghost\"\r\n          @tap=\"copyShareLink\"\r\n        >\r\n          复制{{ isH5 ? '链接' : '路径' }}\r\n        </button>\r\n        <button\r\n          v-if=\"showShareInfo && shareOriginIsGenerated && isMiniProgram\"\r\n          class=\"secondary ghost\"\r\n          @tap=\"openSharePage\"\r\n        >\r\n          打开页面\r\n        </button>\r\n      </view>\r\n      <view v-if=\"showShareInfo && shareOriginIsGenerated\" class=\"share-preview\">{{ shareDisplayValue }}</view>\r\n    </view>\r\n\r\n    <view class=\"verify-card glass-card\">\r\n      <view class=\"form\">\r\n        <text class=\"form-label\">卡密</text>\r\n        <input\r\n          v-model=\"code\"\r\n          class=\"form-input\"\r\n          placeholder=\"请输入需要验证的卡密编号\"\r\n          confirm-type=\"done\"\r\n        />\r\n        <button class=\"form-submit\" :disabled=\"loading || !canVerify\" @tap=\"handleVerify\">\r\n          {{ loading ? '验证中...' : '立即验证' }}\r\n        </button>\r\n      </view>\r\n\r\n      <view v-if=\"payload\" class=\"result\">\r\n        <view :class=\"['status-banner', statusStyle.statusClass]\">\r\n          <text class=\"status-title\">{{ statusStyle.title }}</text>\r\n          <text class=\"status-message\">{{ payload.message }}</text>\r\n        </view>\r\n\r\n        <view v-if=\"payload.stats\" class=\"stats\">\r\n          <view class=\"stat glass-light\">\r\n            <text class=\"stat-label\">验证次数</text>\r\n            <text class=\"stat-value\">{{ payload.stats.attemptNumber }}</text>\r\n          </view>\r\n          <view class=\"stat glass-light\">\r\n            <text class=\"stat-label\">剩余下载</text>\r\n            <text class=\"stat-value\">{{ payload.stats.remainingDownloads }}</text>\r\n          </view>\r\n          <view v-if=\"payload.stats.expiresAt\" class=\"stat glass-light\">\r\n            <text class=\"stat-label\">有效期</text>\r\n            <text class=\"stat-value\">{{ payload.stats.expiresAt }}</text>\r\n          </view>\r\n        </view>\r\n\r\n        <view v-if=\"payload.downloadUrl\" class=\"download\">\r\n          <text class=\"download-label\">资源包下载地址</text>\r\n          <view class=\"download-row\">\r\n            <text class=\"download-url\" @tap=\"copyUrl(payload.downloadUrl)\">{{ payload.downloadUrl }}</text>\r\n            <button class=\"download-btn\" @tap=\"copyUrl(payload.downloadUrl)\">复制链接</button>\r\n          </view>\r\n          <text v-if=\"payload.extractionCode\" class=\"download-code\">提取码：{{ payload.extractionCode }}</text>\r\n        </view>\r\n\r\n        <view class=\"history\">\r\n          <text class=\"history-title\">下载记录</text>\r\n          <view v-if=\"!payload.history.length\" class=\"history-empty\">暂无下载记录</view>\r\n          <view v-else class=\"history-list\">\r\n            <view v-for=\"item in payload.history\" :key=\"item.id\" class=\"history-item glass-light\">\r\n              <view class=\"history-row\">\r\n                <text class=\"history-label\">链接</text>\r\n                <text class=\"history-value\">{{ item.url }}</text>\r\n              </view>\r\n              <view class=\"history-row\">\r\n                <text class=\"history-label\">提取码</text>\r\n                <text class=\"history-value\">{{ item.extractionCode || '—' }}</text>\r\n              </view>\r\n              <view class=\"history-row\">\r\n                <text class=\"history-label\">分配时间</text>\r\n                <text class=\"history-value\">{{ item.assignedAt }}</text>\r\n              </view>\r\n            </view>\r\n          </view>\r\n        </view>\r\n      </view>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { computed, ref, watch } from 'vue';\r\nimport { onLoad } from '@dcloudio/uni-app';\r\nimport { storeToRefs } from 'pinia';\r\nimport { apiRequest, setBaseURL } from '@/common/api';\r\nimport type { CardVerificationShareContext } from '@/common/types';\r\nimport { useAppStore } from '@/stores/app';\r\nimport { usePlatformStore } from '@/stores/platform';\r\n\r\ninterface ActiveVerificationContext {\r\n  software: string;\r\n  softwareCode?: string;\r\n  agentAccount?: string;\r\n  displayName?: string;\r\n  agentDisplayName?: string;\r\n  gateway?: string;\r\n}\r\n\r\ninterface ShareCandidate {\r\n  software?: string;\r\n  softwareCode?: string;\r\n  agentAccount?: string;\r\n  gateway?: string;\r\n  slug?: string;\r\n  softwareDisplayName?: string;\r\n  agentDisplayName?: string;\r\n}\r\n\r\ndeclare const getCurrentPages: (() => Array<{ route?: string }>) | undefined;\r\ndeclare const Buffer: any;\r\n\r\nconst appStore = useAppStore();\r\nconst platformStore = usePlatformStore();\r\nconst { verification } = storeToRefs(appStore);\r\nconst { selectedSoftware, softwareList } = storeToRefs(appStore);\r\nconst { bindings, selectedBinding } = storeToRefs(platformStore);\r\n\r\nconst systemInfo = typeof uni !== 'undefined' && typeof uni.getSystemInfoSync === 'function' ? uni.getSystemInfoSync() : null;\r\nconst uniPlatform = (systemInfo?.uniPlatform || '').toLowerCase();\r\nconst isMiniProgram = uniPlatform.startsWith('mp');\r\nconst isH5 = typeof window !== 'undefined' && typeof document !== 'undefined';\r\n\r\nconst code = ref('');\r\nconst shareQuery = ref('');\r\nconst shareOrigin = ref<'link' | 'generated' | null>(null);\r\nconst linkContext = ref<ActiveVerificationContext | null>(null);\r\nconst shareContextError = ref('');\r\nconst generatorBindingId = ref<number | null>(null);\r\nconst generatorSoftware = ref('');\r\nconst defaultGateway = ref('');\r\n\r\nconst payload = computed(() => verification.value);\r\nconst loading = computed(() => appStore.loading.verification);\r\nconst isGeneratorMode = computed(() => !linkContext.value);\r\nconst canVerify = computed(() => {\r\n  const ctx = activeContext.value;\r\n  return !!ctx && !!ctx.softwareCode && !shareContextError.value;\r\n});\r\n\r\nconst bindingOptions = computed(() =>\r\n  bindings.value.map((item) => ({\r\n    value: item.bindingId,\r\n    label: `${item.authorDisplayName} (${item.softwareCode})`\r\n  }))\r\n);\r\n\r\nconst softwareOptions = computed(() =>\r\n  softwareList.value.map((item) => ({\r\n    value: item.softwareName,\r\n    label: item.softwareName\r\n  }))\r\n);\r\n\r\nconst shareLabel = computed(() => (isH5 ? '分享链接' : '分享路径'));\r\nconst shareNavigatePath = computed(() => {\r\n  if (!shareQuery.value) {\r\n    return '';\r\n  }\r\n  return `/pages/verify/share?${shareQuery.value}`;\r\n});\r\nconst shareHref = computed(() => {\r\n  if (!shareQuery.value) {\r\n    return '';\r\n  }\r\n  if (isH5 && typeof window !== 'undefined' && window.location) {\r\n    return `${window.location.origin}/#/pages/verify/share?${shareQuery.value}`;\r\n  }\r\n  return shareNavigatePath.value;\r\n});\r\nconst shareDisplayValue = computed(() => (isH5 ? shareHref.value : shareNavigatePath.value));\r\nconst shareOriginIsGenerated = computed(() => shareOrigin.value === 'generated');\r\nconst hasShareInfo = computed(() => !!shareQuery.value);\r\nconst showShareInfo = computed(() => shareOriginIsGenerated.value && hasShareInfo.value);\r\n\r\nconst generatorContext = computed<ActiveVerificationContext | null>(() => {\r\n  if (!isGeneratorMode.value) {\r\n    return null;\r\n  }\r\n  const softwareName = (generatorSoftware.value || selectedSoftware.value || '').trim();\r\n  if (!softwareName) {\r\n    return null;\r\n  }\r\n  const binding =\r\n    bindings.value.find((item) => item.bindingId === generatorBindingId.value) || selectedBinding.value;\r\n  const softwareCodeValue = binding?.softwareCode?.trim();\r\n  const agentAccountValue = platformStore.agent?.username?.trim();\r\n  return {\r\n    software: softwareName,\r\n    softwareCode: softwareCodeValue || undefined,\r\n    agentAccount: agentAccountValue || undefined,\r\n    displayName: softwareName\r\n  };\r\n});\r\n\r\nconst activeContext = computed<ActiveVerificationContext | null>(() => linkContext.value ?? generatorContext.value);\r\n\r\nconst contextLabel = computed(\r\n  () => activeContext.value?.displayName || activeContext.value?.software || '未选择'\r\n);\r\nconst contextCodeLabel = computed(() => activeContext.value?.softwareCode || '');\r\nconst contextAgentLabel = computed(\r\n  () => activeContext.value?.agentDisplayName || activeContext.value?.agentAccount || ''\r\n);\r\n\r\nconst currentBindingLabel = computed(() => {\r\n  if (!isGeneratorMode.value) {\r\n    return contextCodeLabel.value || '未提供绑定信息';\r\n  }\r\n  const option = bindingOptions.value.find((item) => item.value === generatorBindingId.value);\r\n  return option?.label || '请选择绑定软件码';\r\n});\r\n\r\nconst currentSoftwareLabel = computed(() => {\r\n  if (!isGeneratorMode.value) {\r\n    return contextLabel.value;\r\n  }\r\n  const option = softwareOptions.value.find((item) => item.value === generatorSoftware.value);\r\n  return option?.label || '请选择软件位';\r\n});\r\n\r\nwatch(\r\n  bindings,\r\n  (list) => {\r\n    if (!isGeneratorMode.value) {\r\n      return;\r\n    }\r\n    if (list.length > 0 && generatorBindingId.value == null) {\r\n      generatorBindingId.value = list[0].bindingId;\r\n    }\r\n  },\r\n  { immediate: true }\r\n);\r\n\r\nwatch(\r\n  selectedBinding,\r\n  (binding) => {\r\n    if (!isGeneratorMode.value || !binding) {\r\n      return;\r\n    }\r\n    if (generatorBindingId.value == null) {\r\n      generatorBindingId.value = binding.bindingId;\r\n    }\r\n  },\r\n  { immediate: true }\r\n);\r\n\r\nwatch(\r\n  selectedSoftware,\r\n  (software) => {\r\n    if (!isGeneratorMode.value) {\r\n      return;\r\n    }\r\n    if (!generatorSoftware.value && software) {\r\n      generatorSoftware.value = software;\r\n    }\r\n  },\r\n  { immediate: true }\r\n);\r\n\r\nwatch(\r\n  bindingOptions,\r\n  (options) => {\r\n    if (!isGeneratorMode.value) {\r\n      return;\r\n    }\r\n    if (!options.length) {\r\n      generatorBindingId.value = null;\r\n      return;\r\n    }\r\n    if (!options.some((item) => item.value === generatorBindingId.value)) {\r\n      generatorBindingId.value = options[0].value;\r\n    }\r\n  },\r\n  { immediate: true }\r\n);\r\n\r\nwatch(\r\n  softwareOptions,\r\n  (options) => {\r\n    if (!isGeneratorMode.value) {\r\n      return;\r\n    }\r\n    if (!options.length) {\r\n      generatorSoftware.value = '';\r\n      return;\r\n    }\r\n    if (!options.some((item) => item.value === generatorSoftware.value)) {\r\n      generatorSoftware.value = options[0].value;\r\n    }\r\n  },\r\n  { immediate: true }\r\n);\r\n\r\nwatch([generatorBindingId, generatorSoftware], () => {\r\n  if (shareOrigin.value === 'generated') {\r\n    shareQuery.value = '';\r\n    shareOrigin.value = null;\r\n  }\r\n});\r\n\r\n\r\nfunction handleBindingChange(event: any) {\r\n  const index = Number(event?.detail?.value ?? 0);\r\n  const option = bindingOptions.value[index];\r\n  generatorBindingId.value = option?.value ?? null;\r\n}\r\n\r\nfunction handleSoftwareChange(event: any) {\r\n  const index = Number(event?.detail?.value ?? 0);\r\n  const option = softwareOptions.value[index];\r\n  generatorSoftware.value = option?.value ?? '';\r\n}\r\n\r\nfunction handleVerify() {\r\n  if (!code.value.trim()) {\r\n    uni.showToast({ title: '请输入卡密', icon: 'none' });\r\n    return;\r\n  }\r\n  if (!canVerify.value) {\r\n    const message = shareContextError.value || '未选择软件位，无法验证';\r\n    uni.showToast({ title: message, icon: 'none' });\r\n    return;\r\n  }\r\n  const ctx = activeContext.value;\r\n  if (!ctx) {\r\n    uni.showToast({ title: '未选择软件位，无法验证', icon: 'none' });\r\n    return;\r\n  }\r\n  appStore.loadVerification(code.value.trim(), ctx);\r\n}\r\n\r\nfunction copyUrl(url: string) {\r\n  if (!url) {\r\n    uni.showToast({ title: '暂无链接可复制', icon: 'none' });\r\n    return;\r\n  }\r\n  uni.setClipboardData({\r\n    data: url,\r\n    success: () => {\r\n      uni.showToast({ title: '链接已复制', icon: 'success' });\r\n    }\r\n  });\r\n}\r\n\r\nfunction copyShareLink() {\r\n  if (!showShareInfo.value || !shareDisplayValue.value) {\r\n    uni.showToast({ title: '暂无分享信息', icon: 'none' });\r\n    return;\r\n  }\r\n  copyUrl(shareDisplayValue.value);\r\n}\r\n\r\nfunction openSharePage() {\r\n  if (!shareNavigatePath.value) {\r\n    uni.showToast({ title: '暂无分享路径', icon: 'none' });\r\n    return;\r\n  }\r\n  uni.navigateTo({ url: shareNavigatePath.value });\r\n}\r\n\r\n\r\nfunction generateShareLink() {\r\n  const ctx = generatorContext.value;\r\n  if (!ctx) {\r\n    uni.showToast({ title: '请先选择绑定和软件位', icon: 'none' });\r\n    return;\r\n  }\r\n  const binding =\r\n    bindings.value.find((item) => item.bindingId === generatorBindingId.value) || selectedBinding.value;\r\n  if (!ctx.softwareCode) {\r\n    const codeValue = binding?.softwareCode ? `（${binding.softwareCode}）` : '';\r\n    uni.showToast({ title: `绑定缺少软件码${codeValue}`, icon: 'none' });\r\n    return;\r\n  }\r\n  shareQuery.value = buildShareQueryString(ctx);\r\n  shareOrigin.value = 'generated';\r\n  shareContextError.value = '';\r\n  uni.showToast({ title: isH5 ? '已生成分享链接' : '已生成分享路径', icon: 'success' });\r\n}\r\n\r\nfunction buildShareCandidate(\r\n  source: Record<string, any> | undefined\r\n): { detected: boolean; candidate: ShareCandidate } {\r\n  const candidate: ShareCandidate = {};\r\n  let detected = false;\r\n\r\n  if (!source) {\r\n    return { detected: false, candidate };\r\n  }\r\n\r\n  const readValue = (...keys: string[]): string => {\r\n    for (const key of keys) {\r\n      const direct = extractValue(key);\r\n      if (direct) {\r\n        return direct;\r\n      }\r\n    }\r\n    return '';\r\n  };\r\n\r\n  const extractValue = (key: string): string => {\r\n    const raw = source[key];\r\n    if (typeof raw === 'string' && raw.trim()) {\r\n      return decodeURIComponentSafe(raw);\r\n    }\r\n    const lower = key.toLowerCase();\r\n    if (lower !== key) {\r\n      const fallback = source[lower];\r\n      if (typeof fallback === 'string' && fallback.trim()) {\r\n        return decodeURIComponentSafe(fallback);\r\n      }\r\n    }\r\n    return '';\r\n  };\r\n\r\n  const softwareValue = normalizeParam(readValue('software', 's', 'softwareName', 'slot'));\r\n  if (softwareValue) {\r\n    candidate.software = softwareValue;\r\n    detected = true;\r\n  }\r\n\r\n  const displayValue = normalizeParam(\r\n    readValue('display', 'softwareDisplay', 'softwareDisplayName', 'name')\r\n  );\r\n  if (displayValue) {\r\n    candidate.softwareDisplayName = displayValue;\r\n    detected = true;\r\n  }\r\n\r\n  const codeValue = normalizeParam(readValue('code', 'c', 'softwareCode', 'binding'));\r\n  if (codeValue) {\r\n    candidate.softwareCode = codeValue;\r\n    detected = true;\r\n  }\r\n\r\n  const agentValue = normalizeParam(readValue('agent', 'a', 'agentAccount'));\r\n  if (agentValue) {\r\n    candidate.agentAccount = agentValue;\r\n    detected = true;\r\n  }\r\n\r\n  const agentDisplayValue = normalizeParam(\r\n    readValue('agentName', 'agentDisplay', 'agentDisplayName')\r\n  );\r\n  if (agentDisplayValue) {\r\n    candidate.agentDisplayName = agentDisplayValue;\r\n    detected = true;\r\n  }\r\n\r\n  const gatewayRaw = normalizeParam(readValue('gateway', 'api', 'gw'));\r\n  if (gatewayRaw) {\r\n    detected = true;\r\n    const normalizedGateway = resolveGateway(gatewayRaw);\r\n    if (normalizedGateway) {\r\n      candidate.gateway = normalizedGateway;\r\n    }\r\n  }\r\n\r\n  const slugValue = normalizeParam(readValue('share', 'context', 'slug', 'token'));\r\n  if (slugValue) {\r\n    candidate.slug = slugValue;\r\n    detected = true;\r\n  }\r\n\r\n  return { detected, candidate };\r\n}\r\n\r\nasync function detectShareCandidateFromRoute(): Promise<{\r\n  detected: boolean;\r\n  candidate: ShareCandidate;\r\n}> {\r\n  if (typeof getCurrentPages !== 'function') {\r\n    return { detected: false, candidate: {} as ShareCandidate };\r\n  }\r\n\r\n  const pages = getCurrentPages();\r\n  if (!Array.isArray(pages) || !pages.length) {\r\n    return { detected: false, candidate: {} as ShareCandidate };\r\n  }\r\n\r\n  const current = pages[pages.length - 1] as any;\r\n  const fullPath: string = current?.$page?.fullPath || current?.route || '';\r\n  if (!fullPath) {\r\n    return { detected: false, candidate: {} as ShareCandidate };\r\n  }\r\n\r\n  const queryIndex = fullPath.indexOf('?');\r\n  if (queryIndex >= 0) {\r\n    const queryString = fullPath.slice(queryIndex + 1);\r\n    const map = parseQuery(queryString);\r\n    return buildShareCandidate(map);\r\n  }\r\n\r\n  const segments = fullPath.split('/').filter(Boolean);\r\n  if (segments.length > 2) {\r\n    const slug = decodeURIComponentSafe(segments[segments.length - 1]);\r\n    if (slug) {\r\n      return buildShareCandidate({ share: slug });\r\n    }\r\n  }\r\n\r\n  return { detected: false, candidate: {} as ShareCandidate };\r\n}\r\n\r\nasync function resolveContextFromCandidate(\r\n  candidate: ShareCandidate\r\n): Promise<ActiveVerificationContext | null> {\r\n  const slugContext = candidate.slug ? decodeLegacySlug(candidate.slug) : null;\r\n\r\n  const gatewayValue =\r\n    resolveGateway(candidate.gateway) || resolveGateway(slugContext?.gateway);\r\n\r\n  const softwareValue =\r\n    normalizeParam(candidate.software) || normalizeParam(slugContext?.software);\r\n  const codeValue =\r\n    normalizeParam(candidate.softwareCode) || normalizeParam(slugContext?.softwareCode);\r\n  const agentAccountValue =\r\n    normalizeParam(candidate.agentAccount) || normalizeParam(slugContext?.agentAccount);\r\n  const displayValue = normalizeParam(candidate.softwareDisplayName);\r\n  const agentDisplayValue = normalizeParam(candidate.agentDisplayName);\r\n\r\n  if (softwareValue && codeValue) {\r\n    return {\r\n      software: softwareValue,\r\n      softwareCode: codeValue,\r\n      agentAccount: agentAccountValue || undefined,\r\n      displayName: displayValue || softwareValue,\r\n      agentDisplayName: agentDisplayValue || undefined,\r\n      gateway: gatewayValue || undefined\r\n    };\r\n  }\r\n\r\n  if (!codeValue) {\r\n    return null;\r\n  }\r\n\r\n  const remote = await fetchShareContextByCode(codeValue, gatewayValue || undefined);\r\n  if (!remote) {\r\n    return null;\r\n  }\r\n\r\n  const remoteSoftware = normalizeParam(remote.software);\r\n  const remoteCode = normalizeParam(remote.softwareCode) || codeValue;\r\n  if (!remoteSoftware) {\r\n    return null;\r\n  }\r\n\r\n  return {\r\n    software: remoteSoftware,\r\n    softwareCode: remoteCode,\r\n    agentAccount: agentAccountValue || normalizeParam(remote.agentAccount) || undefined,\r\n    displayName:\r\n      displayValue || normalizeParam(remote.softwareDisplayName) || remoteSoftware,\r\n    agentDisplayName:\r\n      agentDisplayValue || normalizeParam(remote.agentDisplayName) || undefined,\r\n    gateway: gatewayValue || undefined\r\n  };\r\n}\r\n\r\nasync function fetchShareContextByCode(\r\n  code: string,\r\n  gateway?: string\r\n): Promise<CardVerificationShareContext | null> {\r\n  const normalized = normalizeParam(code);\r\n  if (!normalized) {\r\n    return null;\r\n  }\r\n\r\n  const endpoint = gateway\r\n    ? `${gateway}/api/card-verification/context`\r\n    : '/api/card-verification/context';\r\n\r\n  try {\r\n    const payload = await apiRequest<CardVerificationShareContext>({\r\n      url: endpoint,\r\n      method: 'GET',\r\n      data: { softwareCode: normalized },\r\n      skipProxy: true,\r\n      auth: false\r\n    });\r\n    if (!payload) {\r\n      return null;\r\n    }\r\n    return payload;\r\n  } catch (error) {\r\n    uni.__f__('warn','at pages/verify/index.vue:639','Failed to load verification context', error);\r\n    return null;\r\n  }\r\n}\r\n\r\nfunction applyLinkContext(context: ActiveVerificationContext) {\r\n  const sanitizedGateway = resolveGateway(context.gateway);\r\n  if (sanitizedGateway) {\r\n    defaultGateway.value = sanitizedGateway;\r\n    setBaseURL(sanitizedGateway);\r\n  }\r\n\r\n  const nextContext: ActiveVerificationContext = {\r\n    software: context.software,\r\n    softwareCode: context.softwareCode,\r\n    agentAccount: context.agentAccount,\r\n    displayName: context.displayName || context.software,\r\n    agentDisplayName: context.agentDisplayName || context.agentAccount,\r\n    gateway: sanitizedGateway || undefined\r\n  };\r\n\r\n  linkContext.value = nextContext;\r\n  shareQuery.value = buildShareQueryString(nextContext);\r\n  verification.value = null;\r\n  shareContextError.value = '';\r\n  code.value = '';\r\n  shareOrigin.value = 'link';\r\n}\r\n\r\nfunction parseQuery(input: string): Record<string, string> {\r\n  const map: Record<string, string> = {};\r\n  if (!input) {\r\n    return map;\r\n  }\r\n\r\n  input.split('&').forEach((segment) => {\r\n    if (!segment) {\r\n      return;\r\n    }\r\n    const [rawKey, rawValue = ''] = segment.split('=');\r\n    const key = (rawKey || '').trim();\r\n    if (!key) {\r\n      return;\r\n    }\r\n    const decoded = decodeURIComponentSafe(rawValue);\r\n    map[key] = decoded;\r\n    const lower = key.toLowerCase();\r\n    if (lower !== key && map[lower] == null) {\r\n      map[lower] = decoded;\r\n    }\r\n  });\r\n\r\n  return map;\r\n}\r\n\r\nfunction decodeURIComponentSafe(value: any): string {\r\n  if (typeof value !== 'string') {\r\n    return '';\r\n  }\r\n  try {\r\n    return decodeURIComponent(value);\r\n  } catch (error) {\r\n    return value;\r\n  }\r\n}\r\n\r\nfunction normalizeParam(value: any): string {\r\n  if (typeof value !== 'string') {\r\n    return '';\r\n  }\r\n  return value.trim();\r\n}\r\n\r\nfunction buildShareQueryString(context: ActiveVerificationContext): string {\r\n  const parts: string[] = [`software=${encodeURIComponent(context.software)}`];\r\n  if (context.softwareCode) {\r\n    parts.push(`code=${encodeURIComponent(context.softwareCode)}`);\r\n  }\r\n  if (context.agentAccount) {\r\n    parts.push(`agent=${encodeURIComponent(context.agentAccount)}`);\r\n  }\r\n  const gateway = context.gateway || defaultGateway.value;\r\n  const normalizedGateway = resolveGateway(gateway);\r\n  if (normalizedGateway) {\r\n    parts.push(`gateway=${encodeURIComponent(normalizedGateway)}`);\r\n  }\r\n  return parts.join('&');\r\n}\r\n\r\nfunction resolveGateway(raw?: string | null): string {\r\n  if (!raw) {\r\n    return '';\r\n  }\r\n  const trimmed = raw.trim();\r\n  if (!trimmed) {\r\n    return '';\r\n  }\r\n  const lower = trimmed.toLowerCase();\r\n  if (!lower.startsWith('http://') && !lower.startsWith('https://')) {\r\n    return '';\r\n  }\r\n  return trimmed.replace(/\\/+$/, '');\r\n}\r\n\r\nfunction decodeLegacySlug(slug: string): ActiveVerificationContext | null {\r\n  if (!slug) {\r\n    return null;\r\n  }\r\n  try {\r\n    let base64 = slug.replace(/-/g, '+').replace(/_/g, '/');\r\n    const padding = base64.length % 4;\r\n    if (padding) {\r\n      base64 = base64.padEnd(base64.length + (4 - padding), '=');\r\n    }\r\n\r\n    let buffer: ArrayBuffer;\r\n    if (typeof uni !== 'undefined' && typeof uni.base64ToArrayBuffer === 'function') {\r\n      buffer = uni.base64ToArrayBuffer(base64);\r\n    } else if (typeof atob === 'function') {\r\n      const binary = atob(base64);\r\n      const bytes = new Uint8Array(binary.length);\r\n      for (let i = 0; i < binary.length; i++) {\r\n        bytes[i] = binary.charCodeAt(i);\r\n      }\r\n      buffer = bytes.buffer;\r\n    } else if (typeof Buffer !== 'undefined') {\r\n      const buf = Buffer.from(base64, 'base64');\r\n      buffer = buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\r\n    } else {\r\n      return null;\r\n    }\r\n\r\n    const json = typeof TextDecoder !== 'undefined'\r\n      ? new TextDecoder().decode(new Uint8Array(buffer))\r\n      : utf8Decode(new Uint8Array(buffer));\r\n    const raw = JSON.parse(json) ?? {};\r\n    const software = normalizeParam(raw.s || raw.software || raw.softwareName || raw.slot);\r\n    const softwareCode = normalizeParam(raw.c || raw.code || raw.softwareCode || raw.binding);\r\n    const agentAccount = normalizeParam(raw.a || raw.agent || raw.agentAccount);\r\n    const gateway = resolveGateway(normalizeParam(raw.g || raw.gateway));\r\n    if (!software || !softwareCode) {\r\n      return null;\r\n    }\r\n    return {\r\n      software,\r\n      softwareCode,\r\n      agentAccount: agentAccount || undefined,\r\n      gateway: gateway || undefined\r\n    };\r\n  } catch (error) {\r\n    uni.__f__('warn','at pages/verify/index.vue:789','Failed to decode legacy share slug', error);\r\n    return null;\r\n  }\r\n}\r\n\r\nonLoad(async (options) => {\r\n  shareOrigin.value = null;\r\n  shareQuery.value = '';\r\n  shareContextError.value = '';\r\n  linkContext.value = null;\r\n\r\n  const primaryDetection = buildShareCandidate(options);\r\n  let detection = primaryDetection;\r\n  if (!detection.detected) {\r\n    detection = await detectShareCandidateFromRoute();\r\n  }\r\n\r\n  if (!detection.detected) {\r\n    return;\r\n  }\r\n\r\n  shareOrigin.value = 'link';\r\n  shareContextError.value = '链接解析中，请稍候';\r\n\r\n  try {\r\n    const context = await resolveContextFromCandidate(detection.candidate);\r\n    if (context) {\r\n      applyLinkContext(context);\r\n    } else {\r\n      shareContextError.value = '链接信息缺失或已失效，请联系代理重新生成';\r\n    }\r\n  } catch (error) {\r\n    uni.__f__('warn','at pages/verify/index.vue:821','Failed to resolve share link context', error);\r\n    shareContextError.value = '解析分享信息失败，请稍后再试';\r\n  }\r\n});\r\n\r\nconst statusStyle = computed(() => {\r\n  switch (payload.value?.status) {\r\n    case 'success':\r\n      return { title: '验证成功', statusClass: 'status-success' };\r\n    case 'warning':\r\n      return { title: '请注意', statusClass: 'status-warning' };\r\n    case 'error':\r\n      return { title: '验证失败', statusClass: 'status-error' };\r\n    default:\r\n      return { title: '提醒', statusClass: 'status-info' };\r\n  }\r\n});\r\n\r\nconst shareHint = computed(() => (isH5 ? '复制链接分享给用户' : '复制或打开小程序路径'));\r\n\r\nfunction utf8Decode(bytes: Uint8Array): string {\r\n  if (typeof TextDecoder !== 'undefined') {\r\n    return new TextDecoder().decode(bytes);\r\n  }\r\n  let result = '';\r\n  for (let i = 0; i < bytes.length; ) {\r\n    const byte1 = bytes[i++];\r\n    if (byte1 < 0x80) {\r\n      result += String.fromCharCode(byte1);\r\n    } else if (byte1 < 0xe0) {\r\n      const byte2 = bytes[i++];\r\n      result += String.fromCharCode(((byte1 & 0x1f) << 6) | (byte2 & 0x3f));\r\n    } else if (byte1 < 0xf0) {\r\n      const byte2 = bytes[i++];\r\n      const byte3 = bytes[i++];\r\n      result += String.fromCharCode(((byte1 & 0x0f) << 12) | ((byte2 & 0x3f) << 6) | (byte3 & 0x3f));\r\n    } else {\r\n      const byte2 = bytes[i++];\r\n      const byte3 = bytes[i++];\r\n      const byte4 = bytes[i++];\r\n      const codePoint =\r\n        ((byte1 & 0x07) << 18) |\r\n        ((byte2 & 0x3f) << 12) |\r\n        ((byte3 & 0x3f) << 6) |\r\n        (byte4 & 0x3f);\r\n      const offset = codePoint - 0x10000;\r\n      const high = 0xd800 + (offset >> 10);\r\n      const low = 0xdc00 + (offset & 0x3ff);\r\n      result += String.fromCharCode(high, low);\r\n    }\r\n  }\r\n  return result;\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.page {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 32rpx;\r\n  padding: 40rpx 28rpx 80rpx;\r\n}\r\n\r\n.header {\r\n  padding: 32rpx;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 16rpx;\r\n}\r\n\r\n.title {\r\n  font-size: 42rpx;\r\n  font-weight: 600;\r\n  color: var(--text-primary);\r\n}\r\n\r\n.subtitle {\r\n  font-size: 26rpx;\r\n  color: var(--text-muted);\r\n}\r\n\r\n.context-card,\r\n.generator-card {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 24rpx;\r\n  padding: 32rpx;\r\n}\r\n\r\n.context-header {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 6rpx;\r\n}\r\n\r\n.context-label {\r\n  font-size: 24rpx;\r\n  color: var(--text-muted);\r\n}\r\n\r\n.context-value {\r\n  font-size: 30rpx;\r\n  font-weight: 600;\r\n  color: var(--text-primary);\r\n}\r\n\r\n.context-sub {\r\n  font-size: 24rpx;\r\n  color: var(--text-secondary);\r\n}\r\n\r\n.context-sub.loading {\r\n  color: var(--text-muted);\r\n}\r\n\r\n.context-sub.error {\r\n  color: #ff6b6b;\r\n}\r\n\r\n.context-share {\r\n  display: grid;\r\n  gap: 12rpx;\r\n}\r\n\r\n.share-row {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 16rpx;\r\n}\r\n\r\n.share-label {\r\n  font-size: 24rpx;\r\n  color: var(--text-muted);\r\n}\r\n\r\n.share-url {\r\n  flex: 1;\r\n  font-size: 26rpx;\r\n  color: var(--accent-color);\r\n  word-break: break-all;\r\n}\r\n\r\n.share-btn {\r\n  padding: 12rpx 20rpx;\r\n  border-radius: 999rpx;\r\n  font-size: 24rpx;\r\n  background: var(--surface-light);\r\n  color: var(--text-primary);\r\n}\r\n\r\n.share-btn.ghost {\r\n  background: transparent;\r\n  border: 1rpx solid rgba(56, 189, 248, 0.35);\r\n  color: var(--accent-color);\r\n}\r\n\r\n.share-hint {\r\n  font-size: 22rpx;\r\n  color: var(--text-muted);\r\n}\r\n\r\n.generator-card .section-title {\r\n  font-size: 28rpx;\r\n  font-weight: 600;\r\n  color: var(--text-primary);\r\n}\r\n\r\n.field {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 12rpx;\r\n}\r\n\r\n.field-label {\r\n  font-size: 24rpx;\r\n  color: var(--text-muted);\r\n}\r\n\r\n.picker-value {\r\n  padding: 18rpx 22rpx;\r\n  border-radius: 18rpx;\r\n  background: var(--surface-light);\r\n  border: 1rpx solid var(--outline-color);\r\n  color: var(--text-primary);\r\n  font-size: 26rpx;\r\n}\r\n\r\n.generator-actions {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 16rpx;\r\n}\r\n\r\n.share-preview {\r\n  font-size: 24rpx;\r\n  color: var(--text-secondary);\r\n  word-break: break-all;\r\n}\r\n\r\n.secondary {\r\n  padding: 14rpx 28rpx;\r\n  border-radius: 999rpx;\r\n  border: none;\r\n  font-size: 26rpx;\r\n  font-weight: 500;\r\n  color: var(--text-primary);\r\n  background: rgba(255, 255, 255, 0.08);\r\n}\r\n\r\n.secondary.ghost {\r\n  border: 1rpx solid rgba(255, 255, 255, 0.16);\r\n}\r\n\r\n.verify-card {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 32rpx;\r\n  padding: 36rpx;\r\n}\r\n\r\n.form {\r\n  display: grid;\r\n  gap: 20rpx;\r\n}\r\n\r\n.form-label {\r\n  font-size: 24rpx;\r\n  color: var(--text-muted);\r\n}\r\n\r\n.form-input {\r\n  padding: 18rpx 22rpx;\r\n  border-radius: 22rpx;\r\n  background: var(--surface-light);\r\n  border: 1rpx solid var(--outline-color);\r\n  color: var(--text-primary);\r\n  font-size: 28rpx;\r\n}\r\n\r\n.form-submit {\r\n  padding: 18rpx 24rpx;\r\n  border-radius: 999rpx;\r\n  border: none;\r\n  font-size: 28rpx;\r\n  font-weight: 600;\r\n  color: #04101c;\r\n  background: var(--accent-gradient);\r\n}\r\n\r\n.form-submit:disabled {\r\n  opacity: 0.65;\r\n}\r\n\r\n.result {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 28rpx;\r\n}\r\n\r\n.status-banner {\r\n  padding: 24rpx;\r\n  border-radius: 24rpx;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 12rpx;\r\n}\r\n\r\n.status-success {\r\n  background: rgba(16, 185, 129, 0.15);\r\n  border: 1rpx solid rgba(16, 185, 129, 0.4);\r\n}\r\n\r\n.status-warning {\r\n  background: rgba(251, 191, 36, 0.12);\r\n  border: 1rpx solid rgba(251, 191, 36, 0.35);\r\n}\r\n\r\n.status-error {\r\n  background: rgba(248, 113, 113, 0.14);\r\n  border: 1rpx solid rgba(248, 113, 113, 0.35);\r\n}\r\n\r\n.status-info {\r\n  background: rgba(56, 189, 248, 0.14);\r\n  border: 1rpx solid rgba(56, 189, 248, 0.35);\r\n}\r\n\r\n.status-title {\r\n  font-size: 30rpx;\r\n  font-weight: 600;\r\n  color: var(--text-primary);\r\n}\r\n\r\n.status-message {\r\n  font-size: 24rpx;\r\n  color: var(--text-muted);\r\n}\r\n\r\n.stats {\r\n  display: grid;\r\n  gap: 16rpx;\r\n  grid-template-columns: repeat(auto-fit, minmax(180rpx, 1fr));\r\n}\r\n\r\n.stat {\r\n  padding: 18rpx 20rpx;\r\n  border-radius: 18rpx;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 8rpx;\r\n}\r\n\r\n.stat-label {\r\n  font-size: 24rpx;\r\n  color: var(--text-muted);\r\n}\r\n\r\n.stat-value {\r\n  font-size: 30rpx;\r\n  font-weight: 600;\r\n  color: var(--text-primary);\r\n}\r\n\r\n.download {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 12rpx;\r\n  background: rgba(56, 189, 248, 0.08);\r\n  border-radius: 18rpx;\r\n  padding: 18rpx 22rpx;\r\n}\r\n\r\n.download-label {\r\n  font-size: 24rpx;\r\n  color: var(--text-muted);\r\n}\r\n\r\n.download-row {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 16rpx;\r\n}\r\n\r\n.download-url {\r\n  flex: 1;\r\n  font-size: 24rpx;\r\n  color: var(--text-primary);\r\n  word-break: break-all;\r\n}\r\n\r\n.download-btn {\r\n  padding: 12rpx 20rpx;\r\n  border-radius: 12rpx;\r\n  border: none;\r\n  background: rgba(56, 189, 248, 0.25);\r\n  color: #38bdf8;\r\n  font-size: 24rpx;\r\n}\r\n\r\n.download-code {\r\n  font-size: 22rpx;\r\n  color: var(--text-muted);\r\n}\r\n\r\n.history {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 16rpx;\r\n}\r\n\r\n.history-title {\r\n  font-size: 28rpx;\r\n  font-weight: 600;\r\n  color: var(--text-primary);\r\n}\r\n\r\n.history-empty {\r\n  padding: 16rpx;\r\n  border-radius: 14rpx;\r\n  background: var(--surface-light);\r\n  color: var(--text-muted);\r\n  font-size: 24rpx;\r\n}\r\n\r\n.history-list {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 12rpx;\r\n}\r\n\r\n.history-item {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 10rpx;\r\n  padding: 18rpx 20rpx;\r\n}\r\n\r\n.history-row {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  font-size: 24rpx;\r\n  color: var(--text-muted);\r\n}\r\n\r\n.history-label {\r\n  color: var(--text-muted);\r\n}\r\n\r\n.history-value {\r\n  color: var(--text-primary);\r\n  margin-left: 20rpx;\r\n  text-align: right;\r\n}\r\n</style>\r\n","import MiniProgramPage from 'C:/Users/Administrator/source/repos/wwwskbjxyz/SPTEST-V1/SProtectAgentWeb.Api/wwwroot/uniapp/pages/verify/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["useAppStore","usePlatformStore","storeToRefs","uni","ref","computed","watch","code","payload","apiRequest","setBaseURL","onLoad"],"mappings":"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"}
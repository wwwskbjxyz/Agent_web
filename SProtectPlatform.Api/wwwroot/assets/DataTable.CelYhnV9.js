import{d as l,h as e,Z as a,r as s,y as t,o as u,c as o,w as r,a as n,b as c,t as y,k as i,J as d,K as k,l as f,B as v,F as b,j as p,i as m,e as _,S as w,f as g,_ as h}from"./index-fvgcSFN3.js";const C=h(l({__name:"DataTable",props:{title:{},subtitle:{default:""},columns:{},rows:{},loading:{type:Boolean,default:!1},layout:{default:"table"},primaryColumn:{default:""},operationsColumn:{default:""},collapseDetails:{type:Boolean,default:!0}},setup(l){const h=l,C=e((()=>{var l;return(null==(l=h.columns)?void 0:l.length)?h.columns.length:1})),$=e((()=>({gridTemplateColumns:`repeat(${C.value}, minmax(200rpx, auto))`}))),x=e((()=>({"--column-count":C.value,minWidth:`${Math.max(220*C.value,600)}rpx`}))),D=e((()=>h.layout??"table")),j=e((()=>"stack"===D.value?"table--stack":"table--grid")),B=e((()=>{var l,e;return h.primaryColumn?h.primaryColumn:(null==(e=null==(l=h.columns)?void 0:l[0])?void 0:e.key)??""})),S=e((()=>{var l;if(h.operationsColumn)return h.operationsColumn;return(null==(l=h.columns)?void 0:l.some((l=>"operations"===l.key)))?"operations":""})),A=a(),T=e((()=>{const l=S.value;return!!l&&!!A[l]})),F=e((()=>(h.columns||[]).filter((l=>l.key!==B.value&&l.key!==S.value)))),I=e((()=>!!h.collapseDetails)),J=s({});function K(l,e){const a=B.value;return a&&l&&null!=l[a]?String(l[a]):`row-${e}`}function M(l){return!!J.value[l]}function W(l){return null==l||""===l?"—":"string"==typeof l||"number"==typeof l?l:Array.isArray(l)?l.join(", "):"boolean"==typeof l?l?"是":"否":String(l)}return t((()=>h.rows),(()=>{J.value={}})),(l,e)=>{const a=m,s=_,t=w,h=g;return u(),o(s,{class:p(["table-container glass-card",j.value])},{default:r((()=>[n(s,{class:"table-header"},{default:r((()=>[n(s,null,{default:r((()=>[n(a,{class:"table-title"},{default:r((()=>[c(y(l.title),1)])),_:1}),l.subtitle?(u(),o(a,{key:0,class:"table-subtitle"},{default:r((()=>[c(y(l.subtitle),1)])),_:1})):i("",!0)])),_:1}),n(s,{class:"table-actions"},{default:r((()=>[d(l.$slots,"actions",{},void 0,!0)])),_:3})])),_:3}),"table"===D.value?(u(),o(t,{key:0,"scroll-x":"",class:"table-scroll","show-scrollbar":!1},{default:r((()=>[n(s,{class:"table-wrapper",style:k(x.value)},{default:r((()=>[n(s,{class:"table-row table-row--head",style:k($.value)},{default:r((()=>[(u(!0),f(b,null,v(l.columns,(l=>(u(),o(s,{key:l.key,class:"table-cell",style:k(l.style)},{default:r((()=>[c(y(l.label),1)])),_:2},1032,["style"])))),128))])),_:1},8,["style"]),l.loading?(u(),o(s,{key:0,class:"table-empty"},{default:r((()=>[c("加载中...")])),_:1})):l.rows.length?(u(!0),f(b,{key:2},v(l.rows,((e,a)=>(u(),o(s,{key:a,class:"table-row",style:k($.value)},{default:r((()=>[(u(!0),f(b,null,v(l.columns,(a=>(u(),o(s,{key:a.key,class:"table-cell",style:k(a.style)},{default:r((()=>[d(l.$slots,a.key,{row:e},(()=>[c(y(W(e[a.key])),1)]),!0)])),_:2},1032,["style"])))),128))])),_:2},1032,["style"])))),128)):(u(),o(s,{key:1,class:"table-empty"},{default:r((()=>[c("暂无数据")])),_:1}))])),_:3},8,["style"])])),_:3})):(u(),o(s,{key:1,class:"stack-list"},{default:r((()=>[l.loading?(u(),o(s,{key:0,class:"table-empty"},{default:r((()=>[c("加载中...")])),_:1})):l.rows.length?(u(!0),f(b,{key:2},v(l.rows,((e,t)=>(u(),o(s,{key:K(e,t),class:"stack-row glass-light"},{default:r((()=>[n(s,{class:"stack-header"},{default:r((()=>[n(s,{class:"stack-title"},{default:r((()=>[d(l.$slots,B.value,{row:e},(()=>[c(y(W(B.value?e[B.value]:"")),1)]),!0)])),_:2},1024),F.value.length&&I.value?(u(),o(h,{key:0,class:"stack-toggle",onClick:l=>{return a=K(e,t),void(J.value[a]=!J.value[a]);var a}},{default:r((()=>[c(y(M(K(e,t))?"收起":"详情"),1)])),_:2},1032,["onClick"])):i("",!0)])),_:2},1024),T.value?(u(),o(s,{key:0,class:"stack-operations"},{default:r((()=>["operations"===S.value?d(l.$slots,"operations",{key:0,row:e},(()=>[c(y(W(e[S.value])),1)]),!0):d(l.$slots,S.value,{key:1,row:e},(()=>[c(y(W(e[S.value])),1)]),!0)])),_:2},1024)):i("",!0),!I.value||M(K(e,t))?(u(),o(s,{key:1,class:"stack-body"},{default:r((()=>[(u(!0),f(b,null,v(F.value,(t=>(u(),o(s,{key:t.key,class:"stack-field"},{default:r((()=>[n(a,{class:"stack-label"},{default:r((()=>[c(y(t.label),1)])),_:2},1024),n(s,{class:"stack-value"},{default:r((()=>[d(l.$slots,t.key,{row:e},(()=>[c(y(W(e[t.key])),1)]),!0)])),_:2},1024)])),_:2},1024)))),128))])),_:2},1024)):i("",!0)])),_:2},1024)))),128)):(u(),o(s,{key:1,class:"table-empty"},{default:r((()=>[c("暂无数据")])),_:1}))])),_:3}))])),_:3},8,["class"])}}}),[["__scopeId","data-v-284d3ee2"]]);export{C as D};

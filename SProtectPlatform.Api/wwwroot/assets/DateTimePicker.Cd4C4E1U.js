import{d as e,r as a,h as t,y as l,o as n,c as r,w as u,a as o,j as s,b as c,t as d,E as i,k as m,e as g,v,f as p,_ as h}from"./index-fvgcSFN3.js";const f=h(e({__name:"DateTimePicker",props:{modelValue:{default:""},placeholder:{default:"请选择时间"},clearable:{type:Boolean,default:!0},startYear:{default:void 0},endYear:{default:void 0}},emits:["update:modelValue","change"],setup(e,{emit:h}){const f=e,M=h,S=new Date,$=a([0,0,0,0,0]),x=a([]),y=a([]),D=Array.from({length:12},((e,a)=>a+1)),Y=Array.from({length:24},((e,a)=>a)),_=Array.from({length:60},((e,a)=>a)),b=t((()=>[x.value.map((e=>`${e}年`)),D.map((e=>`${e.toString().padStart(2,"0")}月`)),y.value.map((e=>`${e.toString().padStart(2,"0")}日`)),Y.map((e=>`${e.toString().padStart(2,"0")}时`)),_.map((e=>`${e.toString().padStart(2,"0")}分`))])),V=t((()=>{var e;const a=null==(e=f.modelValue)?void 0:e.trim();if(!a)return"";const t=a.replace("T"," ").replace(/\//g,"-");if(/^\d{4}-\d{2}-\d{2}\s\d{2}:\d{2}$/.test(t))return t;const l=new Date(t);return Number.isNaN(l.getTime())?"":k(l.getFullYear(),l.getMonth()+1,l.getDate(),l.getHours(),l.getMinutes())}));function k(e,a,t,l,n){const r=e=>e.toString().padStart(2,"0");return`${e}-${r(a)}-${r(t)} ${r(l)}:${r(n)}`}function w(e,a){const t=new Date(e,a,0).getDate();y.value=Array.from({length:t},((e,a)=>a+1))}function A(e){const a=null==e?void 0:e.trim();let t=new Date(a?a.replace("T"," "):"");a&&!Number.isNaN(t.getTime())||(t=S),function(e){const a=S.getFullYear(),t=f.startYear??a-5,l=f.endYear??a+5,n=Math.min(t,e),r=Math.max(l,e),u=[];for(let o=n;o<=r;o+=1)u.push(o);x.value=u}(t.getFullYear());const l=Math.max(0,x.value.findIndex((e=>e===t.getFullYear())));w(x.value[l]??t.getFullYear(),t.getMonth()+1);const n=[l,Math.max(0,t.getMonth()),Math.max(0,Math.min(y.value.length-1,t.getDate()-1)),Math.max(0,t.getHours()),Math.max(0,t.getMinutes())];$.value=n}function N(e){const a=e.detail.value;!Array.isArray(a)||a.length<5||($.value=[a[0],a[1],a[2],a[3],a[4]],function(e){const[a,t,l,n,r]=e,u=x.value[a]??x.value[0],o=D[t]??D[0];w(u,o);const s=k(u,o,y.value[l]??y.value[y.value.length-1]??1,Y[n]??0,_[r]??0);M("update:modelValue",s),M("change",s)}(a))}function F(e){const{column:a,value:t}=e.detail,l=[...$.value];if(l[a]=t,0===a||1===a){w(x.value[l[0]]??x.value[0],D[l[1]]??D[0]),l[2]>=y.value.length&&(l[2]=Math.max(0,y.value.length-1))}$.value=[l[0],l[1],l[2],l[3],l[4]]}function T(){M("update:modelValue",""),M("change","")}return l((()=>f.modelValue),(e=>{A(e)}),{immediate:!0}),(e,a)=>{const t=g,l=v,h=p;return n(),r(t,{class:"picker-wrapper"},{default:u((()=>[o(l,{mode:"multiSelector",range:b.value,value:$.value,onChange:N,onColumnchange:F},{default:u((()=>[o(t,{class:s(["picker-display",{placeholder:!V.value}])},{default:u((()=>[c(d(V.value||e.placeholder),1)])),_:1},8,["class"])])),_:1},8,["range","value"]),e.clearable&&e.modelValue?(n(),r(h,{key:0,class:"clear-btn",onClick:i(T,["stop"])},{default:u((()=>[c("清除")])),_:1})):m("",!0)])),_:1})}}}),[["__scopeId","data-v-955c2cbf"]]);export{f as D};

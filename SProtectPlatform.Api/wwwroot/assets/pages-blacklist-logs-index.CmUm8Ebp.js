import{d as t,D as e,x as a,h as s,r as n,z as r,aa as u,y as i,o as l,c,w as o,a as f,b as d,t as h,l as $,B as v,F as y,i as m,e as g,v as _,f as p,k as M,_ as w}from"./index-HILlddLG.js";"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function b(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var D={exports:{}};const S=b(D.exports=function(){var t=1e3,e=6e4,a=36e5,s="millisecond",n="second",r="minute",u="hour",i="day",l="week",c="month",o="quarter",f="year",d="date",h="Invalid Date",$=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,v=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,y={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(t){var e=["th","st","nd","rd"],a=t%100;return"["+t+(e[(a-20)%10]||e[a]||e[0])+"]"}},m=function(t,e,a){var s=String(t);return!s||s.length>=e?t:""+Array(e+1-s.length).join(a)+t},g={s:m,z:function(t){var e=-t.utcOffset(),a=Math.abs(e),s=Math.floor(a/60),n=a%60;return(e<=0?"+":"-")+m(s,2,"0")+":"+m(n,2,"0")},m:function t(e,a){if(e.date()<a.date())return-t(a,e);var s=12*(a.year()-e.year())+(a.month()-e.month()),n=e.clone().add(s,c),r=a-n<0,u=e.clone().add(s+(r?-1:1),c);return+(-(s+(a-n)/(r?n-u:u-n))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:c,y:f,w:l,d:i,D:d,h:u,m:r,s:n,ms:s,Q:o}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},_="en",p={};p[_]=y;var M="$isDayjsObject",w=function(t){return t instanceof k||!(!t||!t[M])},b=function t(e,a,s){var n;if(!e)return _;if("string"==typeof e){var r=e.toLowerCase();p[r]&&(n=r),a&&(p[r]=a,n=r);var u=e.split("-");if(!n&&u.length>1)return t(u[0])}else{var i=e.name;p[i]=e,n=i}return!s&&n&&(_=n),n||!s&&_},D=function(t,e){if(w(t))return t.clone();var a="object"==typeof e?e:{};return a.date=t,a.args=arguments,new k(a)},S=g;S.l=b,S.i=w,S.w=function(t,e){return D(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var k=function(){function y(t){this.$L=b(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[M]=!0}var m=y.prototype;return m.parse=function(t){this.$d=function(t){var e=t.date,a=t.utc;if(null===e)return new Date(NaN);if(S.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var s=e.match($);if(s){var n=s[2]-1||0,r=(s[7]||"0").substring(0,3);return a?new Date(Date.UTC(s[1],n,s[3]||1,s[4]||0,s[5]||0,s[6]||0,r)):new Date(s[1],n,s[3]||1,s[4]||0,s[5]||0,s[6]||0,r)}}return new Date(e)}(t),this.init()},m.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},m.$utils=function(){return S},m.isValid=function(){return!(this.$d.toString()===h)},m.isSame=function(t,e){var a=D(t);return this.startOf(e)<=a&&a<=this.endOf(e)},m.isAfter=function(t,e){return D(t)<this.startOf(e)},m.isBefore=function(t,e){return this.endOf(e)<D(t)},m.$g=function(t,e,a){return S.u(t)?this[e]:this.set(a,t)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(t,e){var a=this,s=!!S.u(e)||e,o=S.p(t),h=function(t,e){var n=S.w(a.$u?Date.UTC(a.$y,e,t):new Date(a.$y,e,t),a);return s?n:n.endOf(i)},$=function(t,e){return S.w(a.toDate()[t].apply(a.toDate("s"),(s?[0,0,0,0]:[23,59,59,999]).slice(e)),a)},v=this.$W,y=this.$M,m=this.$D,g="set"+(this.$u?"UTC":"");switch(o){case f:return s?h(1,0):h(31,11);case c:return s?h(1,y):h(0,y+1);case l:var _=this.$locale().weekStart||0,p=(v<_?v+7:v)-_;return h(s?m-p:m+(6-p),y);case i:case d:return $(g+"Hours",0);case u:return $(g+"Minutes",1);case r:return $(g+"Seconds",2);case n:return $(g+"Milliseconds",3);default:return this.clone()}},m.endOf=function(t){return this.startOf(t,!1)},m.$set=function(t,e){var a,l=S.p(t),o="set"+(this.$u?"UTC":""),h=(a={},a[i]=o+"Date",a[d]=o+"Date",a[c]=o+"Month",a[f]=o+"FullYear",a[u]=o+"Hours",a[r]=o+"Minutes",a[n]=o+"Seconds",a[s]=o+"Milliseconds",a)[l],$=l===i?this.$D+(e-this.$W):e;if(l===c||l===f){var v=this.clone().set(d,1);v.$d[h]($),v.init(),this.$d=v.set(d,Math.min(this.$D,v.daysInMonth())).$d}else h&&this.$d[h]($);return this.init(),this},m.set=function(t,e){return this.clone().$set(t,e)},m.get=function(t){return this[S.p(t)]()},m.add=function(s,o){var d,h=this;s=Number(s);var $=S.p(o),v=function(t){var e=D(h);return S.w(e.date(e.date()+Math.round(t*s)),h)};if($===c)return this.set(c,this.$M+s);if($===f)return this.set(f,this.$y+s);if($===i)return v(1);if($===l)return v(7);var y=(d={},d[r]=e,d[u]=a,d[n]=t,d)[$]||1,m=this.$d.getTime()+s*y;return S.w(m,this)},m.subtract=function(t,e){return this.add(-1*t,e)},m.format=function(t){var e=this,a=this.$locale();if(!this.isValid())return a.invalidDate||h;var s=t||"YYYY-MM-DDTHH:mm:ssZ",n=S.z(this),r=this.$H,u=this.$m,i=this.$M,l=a.weekdays,c=a.months,o=a.meridiem,f=function(t,a,n,r){return t&&(t[a]||t(e,s))||n[a].slice(0,r)},d=function(t){return S.s(r%12||12,t,"0")},$=o||function(t,e,a){var s=t<12?"AM":"PM";return a?s.toLowerCase():s};return s.replace(v,(function(t,s){return s||function(t){switch(t){case"YY":return String(e.$y).slice(-2);case"YYYY":return S.s(e.$y,4,"0");case"M":return i+1;case"MM":return S.s(i+1,2,"0");case"MMM":return f(a.monthsShort,i,c,3);case"MMMM":return f(c,i);case"D":return e.$D;case"DD":return S.s(e.$D,2,"0");case"d":return String(e.$W);case"dd":return f(a.weekdaysMin,e.$W,l,2);case"ddd":return f(a.weekdaysShort,e.$W,l,3);case"dddd":return l[e.$W];case"H":return String(r);case"HH":return S.s(r,2,"0");case"h":return d(1);case"hh":return d(2);case"a":return $(r,u,!0);case"A":return $(r,u,!1);case"m":return String(u);case"mm":return S.s(u,2,"0");case"s":return String(e.$s);case"ss":return S.s(e.$s,2,"0");case"SSS":return S.s(e.$ms,3,"0");case"Z":return n}return null}(t)||n.replace(":","")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(s,d,h){var $,v=this,y=S.p(d),m=D(s),g=(m.utcOffset()-this.utcOffset())*e,_=this-m,p=function(){return S.m(v,m)};switch(y){case f:$=p()/12;break;case c:$=p();break;case o:$=p()/3;break;case l:$=(_-g)/6048e5;break;case i:$=(_-g)/864e5;break;case u:$=_/a;break;case r:$=_/e;break;case n:$=_/t;break;default:$=_}return h?$:S.a($)},m.daysInMonth=function(){return this.endOf(c).$D},m.$locale=function(){return p[this.$L]},m.locale=function(t,e){if(!t)return this.$L;var a=this.clone(),s=b(t,e,!0);return s&&(a.$L=s),a},m.clone=function(){return S.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},y}(),O=k.prototype;return D.prototype=O,[["$ms",s],["$s",n],["$m",r],["$H",u],["$W",i],["$M",c],["$y",f],["$D",d]].forEach((function(t){O[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),D.extend=function(t,e){return t.$i||(t(e,k,D),t.$i=!0),D},D.locale=b,D.isDayjs=w,D.unix=function(t){return D(1e3*t)},D.en=p[_],D.Ls=p,D.p={},D}()),k=w(t({__name:"index",setup(t){const w=e(),{blacklistLogs:b,selectedSoftware:D}=a(w),k=s((()=>w.loading.blacklistLogs)),O=s((()=>b.value)),Y=[{label:"最近 50 条",value:50},{label:"最近 100 条",value:100},{label:"最近 200 条",value:200},{label:"最近 500 条",value:500}],x=n(2);function H(t){const e=Number(t.detail.value)||0;x.value=Math.min(Math.max(e,0),Y.length-1),C()}function L(t){if(!t)return"-";const e=S(t);return e.isValid()?e.format("YYYY-MM-DD HH:mm:ss"):t}async function T(){var t;const e=(null==(t=Y[x.value])?void 0:t.value)??200;await w.loadBlacklistLogs(e),w.markBlacklistLogsSeen()}async function C(){k.value||await T()}return r((async()=>{await T()})),u((()=>{w.markBlacklistLogsSeen()})),i((()=>D.value),(async(t,e)=>{t&&t!==e&&await T()})),(t,e)=>{const a=m,s=g,n=_,r=p;return l(),c(s,{class:"page"},{default:o((()=>[f(s,{class:"header glass-card"},{default:o((()=>[f(s,null,{default:o((()=>[f(a,{class:"title"},{default:o((()=>[d("黑名单日志")])),_:1}),f(a,{class:"subtitle"},{default:o((()=>[d("查看近期待处理的黑名单触发记录")])),_:1})])),_:1}),f(s,{class:"form"},{default:o((()=>[f(n,{mode:"selector",range:Y.map((t=>t.label)),value:x.value,onChange:H},{default:o((()=>[f(s,{class:"picker-display"},{default:o((()=>[d(h(Y[x.value].label),1)])),_:1})])),_:1},8,["range","value"]),f(r,{class:"btn ghost",disabled:k.value,onClick:C},{default:o((()=>[d("刷新")])),_:1},8,["disabled"])])),_:1})])),_:1}),f(s,{class:"list glass-card"},{default:o((()=>[k.value?(l(),c(s,{key:0,class:"empty"},{default:o((()=>[d("数据加载中...")])),_:1})):O.value.length?(l(),c(s,{key:2,class:"items"},{default:o((()=>[(l(!0),$(y,null,v(O.value,(t=>(l(),c(s,{key:t.id,class:"item glass-light"},{default:o((()=>[f(s,{class:"row"},{default:o((()=>[f(a,{class:"label"},{default:o((()=>[d("时间")])),_:1}),f(a,{class:"value"},{default:o((()=>[d(h(L(t.timestamp)),1)])),_:2},1024)])),_:2},1024),t.software?(l(),c(s,{key:0,class:"row"},{default:o((()=>[f(a,{class:"label"},{default:o((()=>[d("软件码")])),_:1}),f(a,{class:"value"},{default:o((()=>[d(h(t.software),1)])),_:2},1024)])),_:2},1024)):M("",!0),t.account?(l(),c(s,{key:1,class:"row"},{default:o((()=>[f(a,{class:"label"},{default:o((()=>[d("账号")])),_:1}),f(a,{class:"value"},{default:o((()=>[d(h(t.account),1)])),_:2},1024)])),_:2},1024)):M("",!0),t.machineCode?(l(),c(s,{key:2,class:"row"},{default:o((()=>[f(a,{class:"label"},{default:o((()=>[d("机器码")])),_:1}),f(a,{class:"value highlight"},{default:o((()=>[d(h(t.machineCode),1)])),_:2},1024)])),_:2},1024)):M("",!0),t.ip?(l(),c(s,{key:3,class:"row"},{default:o((()=>[f(a,{class:"label"},{default:o((()=>[d("IP")])),_:1}),f(a,{class:"value"},{default:o((()=>[d(h(t.ip),1)])),_:2},1024)])),_:2},1024)):M("",!0),t.reason?(l(),c(s,{key:4,class:"row"},{default:o((()=>[f(a,{class:"label"},{default:o((()=>[d("原因")])),_:1}),f(a,{class:"value"},{default:o((()=>[d(h(t.reason),1)])),_:2},1024)])),_:2},1024)):M("",!0)])),_:2},1024)))),128))])),_:1})):(l(),c(s,{key:1,class:"empty"},{default:o((()=>[d("当前软件暂无黑名单日志")])),_:1}))])),_:1})])),_:1})}}}),[["__scopeId","data-v-5549cc64"]]);export{k as default};
